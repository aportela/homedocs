import{Q as jt,D as gt,a as bt}from"./date-time-C6aGxrAY.js";import{b as ta,e as aa,m as la,n as na,Q as J,o as oa,h as Mt,i as Te,j as ra,_ as sa}from"./QItem-Ch9RgcXO.js";import{u as ia,c as ua,b as da,Q as de,a as ca}from"./QInput-Bn6qa3do.js";import{Q as H,n as Tt,g as fa}from"./QBtn-DLMd7gxD.js";import{a as Rt,C as Ae,Q as Ft}from"./ClosePopup-Cuig2ZUf.js";import{c as ma,S as va,a as ha,s as ga,b as ba,Q as yt}from"./QPagination-By-lwJhP.js";import{t as ya,p as ce,_ as pa,j as Le,e as xa,g as pt,i as _a,Q as Pe,a as Ne,o as xt,c as _t}from"./QItemLabel-BN-8s06S.js";import{e as Da,d as wa,Q as Dt}from"./QMarkupTable-q_MatDdJ.js";import{Q as Ca}from"./QPage-BWeOFJeS.js";import{a1 as ka,g as c,p as Ze,s as Xe,i as M,x as oe,q as b,a0 as De,n as Re,ae as qa,ab as Va,a as et,M as tt,j as z,b as j,k as re,e as h,w as y,a5 as Sa,u as s,N as be,o as R,J as Aa,a8 as Pa,c as te,a9 as ja,O as je,P as Me,l as ee,t as E,h as Ma,Q as Ta,V as Ra,z as Fa,m as he,_ as wt,Z as Ia}from"./index-BliOkcHh.js";import{a as Ba}from"./api-I8w-eQER.js";import{j as Oa,k as Ha,d as Ct,c as Ea,_ as $a}from"./CustomErrorBanner.vue_vue_type_script_setup_true_lang-gIiYZZpB.js";import{I as Ua}from"./InteractiveTagsFieldCustomSelect-DsYiWU28.js";import{_ as kt}from"./CustomExpansionWidget.vue_vue_type_script_setup_true_lang-aH-yVEL1.js";import{h as It,_ as Ya}from"./_plugin-vue_export-helper-BWF-eywi.js";import{u as at}from"./vue-i18n.runtime-2HrbWCRO.js";import{_ as Se}from"./ViewDocumentDetailsButton.vue_vue_type_script_setup_true_lang-DQAUnKMj.js";import"./localStorage-DcFk6gN0.js";import"./axios-BbAVdsOQ.js";import"./serverEnvironment-B6hdlTTj.js";import"./BrowseByTagButton.vue_vue_type_script_setup_true_lang-DozXiYUO.js";class Ge{field;label;order;constructor(g,m,x){this.field=g,this.label=m,this.order=x}refreshLabel(g){this.label=g.find(m=>m.field==this.field)?.label||""}toggle(g,m){this.field==g?m?this.order=m:this.order=this.order=="ASC"?"DESC":"ASC":(this.field=g,this.order=m||"ASC")}}class Qa{currentPageIndex;resultsPage;totalResults;totalPages;constructor(g,m,x,w){this.currentPageIndex=g,this.resultsPage=m,this.totalResults=x,this.totalPages=w}}const qt=()=>new Qa(1,32,0,0),Vt=()=>{const t=new va(null,null,null,null),g=new ha(null,null,null);return new ma(t,[],g)},St=()=>new Ge("lastUpdateTimestamp","Last update","DESC"),La=ka("advancedSearchData",{state:()=>({pager:qt(),filter:Vt(),sort:St()}),getters:{currentPager:t=>t.pager,currentFilter:t=>t.filter,currentSort:t=>t.sort},actions:{reset(){this.pager=qt(),this.filter=Vt(),this.sort=St()},setPager(t){this.pager=t},setFilter(t){this.filter=t},setSort(t){this.sort=t}}}),Na=["gregorian","persian"],At={mask:{type:String},locale:Object,calendar:{type:String,validator:t=>Na.includes(t),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},za=["update:modelValue"];function le(t){return t.year+"/"+ce(t.month)+"/"+ce(t.day)}function Wa(t,g){const m=c(()=>t.disable!==!0&&t.readonly!==!0),x=c(()=>m.value===!0?0:-1),w=c(()=>{const i=[];return t.color!==void 0&&i.push(`bg-${t.color}`),t.textColor!==void 0&&i.push(`text-${t.textColor}`),i.join(" ")});function A(){return t.locale!==void 0?{...g.lang.date,...t.locale}:g.lang.date}function _(i){const B=new Date,T=i===!0?null:0;if(t.calendar==="persian"){const F=ya(B);return{year:F.jy,month:F.jm,day:F.jd}}return{year:B.getFullYear(),month:B.getMonth()+1,day:B.getDate(),hour:T,minute:T,second:T,millisecond:T}}return{editable:m,tabindex:x,headerClass:w,getLocale:A,getCurrentDate:_}}const X=20,Ja=["Calendar","Years","Months"],Pt=t=>Ja.includes(t),ze=t=>/^-?[\d]+\/[0-1]\d$/.test(t),ge=" â€” ";function ne(t){return t.year+"/"+ce(t.month)}const We=Ze({name:"QDate",props:{...At,...ia,...ta,modelValue:{required:!0,validator:t=>typeof t=="string"||Array.isArray(t)===!0||Object(t)===t||t===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...At.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:ze},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:ze},navigationMaxYearMonth:{type:String,validator:ze},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Pt}},emits:[...za,"rangeStart","rangeEnd","navigation"],setup(t,{slots:g,emit:m}){const{proxy:x}=Xe(),{$q:w}=x,A=aa(t,w),{getCache:_}=Oa(),{tabindex:i,headerClass:B,getLocale:T,getCurrentDate:F}=Wa(t,w);let S;const C=ua(t),Y=da(C),L=M(null),q=M(ut()),V=M(T()),G=c(()=>ut()),K=c(()=>T()),O=c(()=>F()),n=M(dt(q.value,V.value)),o=M(t.defaultView),I=c(()=>w.lang.rtl===!0?"right":"left"),se=M(I.value),Z=M(I.value),ye=n.value.year,k=M(ye-ye%X-(ye<0?X:0)),v=M(null),u=c(()=>{const e=t.landscape===!0?"landscape":"portrait";return`q-date q-date--${e} q-date--${e}-${t.minimal===!0?"minimal":"standard"}`+(A.value===!0?" q-date--dark q-dark":"")+(t.bordered===!0?" q-date--bordered":"")+(t.square===!0?" q-date--square no-border-radius":"")+(t.flat===!0?" q-date--flat no-shadow":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-date--readonly":"")}),Q=c(()=>t.color||"primary"),ie=c(()=>t.textColor||"white"),we=c(()=>t.emitImmediately===!0&&t.multiple!==!0&&t.range!==!0),Fe=c(()=>Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue!==null&&t.modelValue!==void 0?[t.modelValue]:[]),W=c(()=>Fe.value.filter(e=>typeof e=="string").map(e=>Ee(e,q.value,V.value)).filter(e=>e.dateHash!==null&&e.day!==null&&e.month!==null&&e.year!==null)),fe=c(()=>{const e=a=>Ee(a,q.value,V.value);return Fe.value.filter(a=>qa(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:e(a.from),to:e(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),Ce=c(()=>t.calendar!=="persian"?e=>new Date(e.year,e.month-1,e.day):e=>{const a=pt(e.year,e.month,e.day);return new Date(a.gy,a.gm-1,a.gd)}),Ie=c(()=>t.calendar==="persian"?le:(e,a,l)=>xa(new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),a===void 0?q.value:a,l===void 0?V.value:l,e.year,e.timezoneOffset)),pe=c(()=>W.value.length+fe.value.reduce((e,a)=>e+1+_a(Ce.value(a.to),Ce.value(a.from)),0)),lt=c(()=>{if(t.title!==void 0&&t.title!==null&&t.title.length!==0)return t.title;if(v.value!==null){const l=v.value.init,r=Ce.value(l);return V.value.daysShort[r.getDay()]+", "+V.value.monthsShort[l.month-1]+" "+l.day+ge+"?"}if(pe.value===0)return ge;if(pe.value>1)return`${pe.value} ${V.value.pluralDay}`;const e=W.value[0],a=Ce.value(e);return isNaN(a.valueOf())===!0?ge:V.value.headerTitle!==void 0?V.value.headerTitle(a,e):V.value.daysShort[a.getDay()]+", "+V.value.monthsShort[e.month-1]+" "+e.day}),Bt=c(()=>W.value.concat(fe.value.map(a=>a.from)).sort((a,l)=>a.year-l.year||a.month-l.month)[0]),Ot=c(()=>W.value.concat(fe.value.map(a=>a.to)).sort((a,l)=>l.year-a.year||l.month-a.month)[0]),nt=c(()=>{if(t.subtitle!==void 0&&t.subtitle!==null&&t.subtitle.length!==0)return t.subtitle;if(pe.value===0)return ge;if(pe.value>1){const e=Bt.value,a=Ot.value,l=V.value.monthsShort;return l[e.month-1]+(e.year!==a.year?" "+e.year+ge+l[a.month-1]+" ":e.month!==a.month?ge+l[a.month-1]:"")+" "+a.year}return W.value[0].year}),ke=c(()=>{const e=[w.iconSet.datetime.arrowLeft,w.iconSet.datetime.arrowRight];return w.lang.rtl===!0?e.reverse():e}),ot=c(()=>t.firstDayOfWeek!==void 0?Number(t.firstDayOfWeek):V.value.firstDayOfWeek),Ht=c(()=>{const e=V.value.daysShort,a=ot.value;return a>0?e.slice(a,7).concat(e.slice(0,a)):e}),ae=c(()=>{const e=n.value;return t.calendar!=="persian"?new Date(e.year,e.month,0).getDate():Le(e.year,e.month)}),Et=c(()=>typeof t.eventColor=="function"?t.eventColor:()=>t.eventColor),$=c(()=>{if(t.navigationMinYearMonth===void 0)return null;const e=t.navigationMinYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),U=c(()=>{if(t.navigationMaxYearMonth===void 0)return null;const e=t.navigationMaxYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),Be=c(()=>{const e={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return $.value!==null&&$.value.year>=n.value.year&&(e.year.prev=!1,$.value.year===n.value.year&&$.value.month>=n.value.month&&(e.month.prev=!1)),U.value!==null&&U.value.year<=n.value.year&&(e.year.next=!1,U.value.year===n.value.year&&U.value.month<=n.value.month&&(e.month.next=!1)),e}),qe=c(()=>{const e={};return W.value.forEach(a=>{const l=ne(a);e[l]===void 0&&(e[l]=[]),e[l].push(a.day)}),e}),rt=c(()=>{const e={};return fe.value.forEach(a=>{const l=ne(a.from),r=ne(a.to);if(e[l]===void 0&&(e[l]=[]),e[l].push({from:a.from.day,to:l===r?a.to.day:void 0,range:a}),l<r){let d;const{year:D,month:f}=a.from,p=f<12?{year:D,month:f+1}:{year:D+1,month:1};for(;(d=ne(p))<=r;)e[d]===void 0&&(e[d]=[]),e[d].push({from:void 0,to:d===r?a.to.day:void 0,range:a}),p.month++,p.month>12&&(p.year++,p.month=1)}}),e}),xe=c(()=>{if(v.value===null)return;const{init:e,initHash:a,final:l,finalHash:r}=v.value,[d,D]=a<=r?[e,l]:[l,e],f=ne(d),p=ne(D);if(f!==N.value&&p!==N.value)return;const P={};return f===N.value?(P.from=d.day,P.includeFrom=!0):P.from=1,p===N.value?(P.to=D.day,P.includeTo=!0):P.to=ae.value,P}),N=c(()=>ne(n.value)),$t=c(()=>{const e={};if(t.options===void 0){for(let l=1;l<=ae.value;l++)e[l]=!0;return e}const a=typeof t.options=="function"?t.options:l=>t.options.includes(l);for(let l=1;l<=ae.value;l++){const r=N.value+"/"+ce(l);e[l]=a(r)}return e}),Ut=c(()=>{const e={};if(t.events===void 0)for(let a=1;a<=ae.value;a++)e[a]=!1;else{const a=typeof t.events=="function"?t.events:l=>t.events.includes(l);for(let l=1;l<=ae.value;l++){const r=N.value+"/"+ce(l);e[l]=a(r)===!0&&Et.value(r)}}return e}),Yt=c(()=>{let e,a;const{year:l,month:r}=n.value;if(t.calendar!=="persian")e=new Date(l,r-1,1),a=new Date(l,r-1,0).getDate();else{const d=pt(l,r,1);e=new Date(d.gy,d.gm-1,d.gd);let D=r-1,f=l;D===0&&(D=12,f--),a=Le(f,D)}return{days:e.getDay()-ot.value-1,endDay:a}}),st=c(()=>{const e=[],{days:a,endDay:l}=Yt.value,r=a<0?a+7:a;if(r<6)for(let f=l-r;f<=l;f++)e.push({i:f,fill:!0});const d=e.length;for(let f=1;f<=ae.value;f++){const p={i:f,event:Ut.value[f],classes:[]};$t.value[f]===!0&&(p.in=!0,p.flat=!0),e.push(p)}if(qe.value[N.value]!==void 0&&qe.value[N.value].forEach(f=>{const p=d+f-1;Object.assign(e[p],{selected:!0,unelevated:!0,flat:!1,color:Q.value,textColor:ie.value})}),rt.value[N.value]!==void 0&&rt.value[N.value].forEach(f=>{if(f.from!==void 0){const p=d+f.from-1,P=d+(f.to||ae.value)-1;for(let _e=p;_e<=P;_e++)Object.assign(e[_e],{range:f.range,unelevated:!0,color:Q.value,textColor:ie.value});Object.assign(e[p],{rangeFrom:!0,flat:!1}),f.to!==void 0&&Object.assign(e[P],{rangeTo:!0,flat:!1})}else if(f.to!==void 0){const p=d+f.to-1;for(let P=d;P<=p;P++)Object.assign(e[P],{range:f.range,unelevated:!0,color:Q.value,textColor:ie.value});Object.assign(e[p],{flat:!1,rangeTo:!0})}else{const p=d+ae.value-1;for(let P=d;P<=p;P++)Object.assign(e[P],{range:f.range,unelevated:!0,color:Q.value,textColor:ie.value})}}),xe.value!==void 0){const f=d+xe.value.from-1,p=d+xe.value.to-1;for(let P=f;P<=p;P++)e[P].color=Q.value,e[P].editRange=!0;xe.value.includeFrom===!0&&(e[f].editRangeFrom=!0),xe.value.includeTo===!0&&(e[p].editRangeTo=!0)}n.value.year===O.value.year&&n.value.month===O.value.month&&(e[d+O.value.day-1].today=!0);const D=e.length%7;if(D>0){const f=7-D;for(let p=1;p<=f;p++)e.push({i:p,fill:!0})}return e.forEach(f=>{let p="q-date__calendar-item ";f.fill===!0?p+="q-date__calendar-item--fill":(p+=`q-date__calendar-item--${f.in===!0?"in":"out"}`,f.range!==void 0&&(p+=` q-date__range${f.rangeTo===!0?"-to":f.rangeFrom===!0?"-from":""}`),f.editRange===!0&&(p+=` q-date__edit-range${f.editRangeFrom===!0?"-from":""}${f.editRangeTo===!0?"-to":""}`),(f.range!==void 0||f.editRange===!0)&&(p+=` text-${f.color}`)),f.classes=p}),e}),Qt=c(()=>t.disable===!0?{"aria-disabled":"true"}:{});oe(()=>t.modelValue,e=>{if(S===JSON.stringify(e))S=0;else{const a=dt(q.value,V.value);me(a.year,a.month,a)}}),oe(o,()=>{L.value!==null&&x.$el.contains(document.activeElement)===!0&&L.value.focus()}),oe(()=>n.value.year+"|"+n.value.month,()=>{m("navigation",{year:n.value.year,month:n.value.month})}),oe(G,e=>{ht(e,V.value,"mask"),q.value=e}),oe(K,e=>{ht(q.value,e,"locale"),V.value=e});function Oe(e){S=JSON.stringify(e)}function it(){const{year:e,month:a,day:l}=O.value,r={...n.value,year:e,month:a,day:l},d=qe.value[ne(r)];(d===void 0||d.includes(r.day)===!1)&&Ue(r),He(r.year,r.month)}function Lt(e){Pt(e)===!0&&(o.value=e)}function Nt(e,a){["month","year"].includes(e)&&(e==="month"?ft:$e)(a===!0?-1:1)}function He(e,a){o.value="Calendar",me(e,a)}function zt(e,a){if(t.range===!1||!e){v.value=null;return}const l=Object.assign({...n.value},e),r=a!==void 0?Object.assign({...n.value},a):l;v.value={init:l,initHash:le(l),final:r,finalHash:le(r)},He(l.year,l.month)}function ut(){return t.calendar==="persian"?"YYYY/MM/DD":t.mask}function Ee(e,a,l){return pa(e,a,l,t.calendar,{hour:0,minute:0,second:0,millisecond:0})}function dt(e,a){const l=Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue?[t.modelValue]:[];if(l.length===0)return ct();const r=l[l.length-1],d=Ee(r.from!==void 0?r.from:r,e,a);return d.dateHash===null?ct():d}function ct(){let e,a;if(t.defaultYearMonth!==void 0){const l=t.defaultYearMonth.split("/");e=parseInt(l[0],10),a=parseInt(l[1],10)}else{const l=O.value!==void 0?O.value:F();e=l.year,a=l.month}return{year:e,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:e+"/"+ce(a)+"/01"}}function ft(e){let a=n.value.year,l=Number(n.value.month)+e;l===13?(l=1,a++):l===0&&(l=12,a--),me(a,l),we.value===!0&&Ve("month")}function $e(e){const a=Number(n.value.year)+e;me(a,n.value.month),we.value===!0&&Ve("year")}function Wt(e){me(e,n.value.month),o.value=t.defaultView==="Years"?"Months":"Calendar",we.value===!0&&Ve("year")}function Jt(e){me(n.value.year,e),o.value="Calendar",we.value===!0&&Ve("month")}function Kt(e,a){(qe.value[a]?.includes(e.day)===!0?Ye:Ue)(e)}function ue(e){return{year:e.year,month:e.month,day:e.day}}function me(e,a,l){if($.value!==null&&e<=$.value.year&&((a<$.value.month||e<$.value.year)&&(a=$.value.month),e=$.value.year),U.value!==null&&e>=U.value.year&&((a>U.value.month||e>U.value.year)&&(a=U.value.month),e=U.value.year),l!==void 0){const{hour:d,minute:D,second:f,millisecond:p,timezoneOffset:P,timeHash:_e}=l;Object.assign(n.value,{hour:d,minute:D,second:f,millisecond:p,timezoneOffset:P,timeHash:_e})}const r=e+"/"+ce(a)+"/01";r!==n.value.dateHash&&(se.value=n.value.dateHash<r==(w.lang.rtl!==!0)?"left":"right",e!==n.value.year&&(Z.value=se.value),Re(()=>{k.value=e-e%X-(e<0?X:0),Object.assign(n.value,{year:e,month:a,day:1,dateHash:r})}))}function mt(e,a,l){const r=e!==null&&e.length===1&&t.multiple===!1?e[0]:e,{reason:d,details:D}=vt(a,l);Oe(r),m("update:modelValue",r,d,D)}function Ve(e){const a=W.value[0]!==void 0&&W.value[0].dateHash!==null?{...W.value[0]}:{...n.value};Re(()=>{a.year=n.value.year,a.month=n.value.month;const l=t.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Le(a.year,a.month);a.day=Math.min(Math.max(1,a.day),l);const r=ve(a),{details:d}=vt("",a);Oe(r),m("update:modelValue",r,e,d)})}function vt(e,a){return a.from!==void 0?{reason:`${e}-range`,details:{...ue(a.target),from:ue(a.from),to:ue(a.to)}}:{reason:`${e}-day`,details:ue(a)}}function ve(e,a,l){return e.from!==void 0?{from:Ie.value(e.from,a,l),to:Ie.value(e.to,a,l)}:Ie.value(e,a,l)}function Ue(e){let a;if(t.multiple===!0)if(e.from!==void 0){const l=le(e.from),r=le(e.to),d=W.value.filter(f=>f.dateHash<l||f.dateHash>r),D=fe.value.filter(({from:f,to:p})=>p.dateHash<l||f.dateHash>r);a=d.concat(D).concat(e).map(f=>ve(f))}else{const l=Fe.value.slice();l.push(ve(e)),a=l}else a=ve(e);mt(a,"add",e)}function Ye(e){if(t.noUnset===!0)return;let a=null;if(t.multiple===!0&&Array.isArray(t.modelValue)===!0){const l=ve(e);e.from!==void 0?a=t.modelValue.filter(r=>r.from!==void 0?r.from!==l.from&&r.to!==l.to:!0):a=t.modelValue.filter(r=>r!==l),a.length===0&&(a=null)}mt(a,"remove",e)}function ht(e,a,l){const r=W.value.concat(fe.value).map(D=>ve(D,e,a)).filter(D=>D.from!==void 0?D.from.dateHash!==null&&D.to.dateHash!==null:D.dateHash!==null),d=(t.multiple===!0?r:r[0])||null;Oe(d),m("update:modelValue",d,l)}function Gt(){if(t.minimal!==!0)return b("div",{class:"q-date__header "+B.value},[b("div",{class:"relative-position"},[b(De,{name:"q-transition--fade"},()=>b("div",{key:"h-yr-"+nt.value,class:"q-date__header-subtitle q-date__header-link "+(o.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,..._("vY",{onClick(){o.value="Years"},onKeyup(e){e.keyCode===13&&(o.value="Years")}})},[nt.value]))]),b("div",{class:"q-date__header-title relative-position flex no-wrap"},[b("div",{class:"relative-position col"},[b(De,{name:"q-transition--fade"},()=>b("div",{key:"h-sub"+lt.value,class:"q-date__header-title-label q-date__header-link "+(o.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,..._("vC",{onClick(){o.value="Calendar"},onKeyup(e){e.keyCode===13&&(o.value="Calendar")}})},[lt.value]))]),t.todayBtn===!0?b(H,{class:"q-date__header-today self-start",icon:w.iconSet.datetime.today,"aria-label":w.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:i.value,onClick:it}):null])])}function Qe({label:e,type:a,key:l,dir:r,goTo:d,boundaries:D,cls:f}){return[b("div",{class:"row items-center q-date__arrow"},[b(H,{round:!0,dense:!0,size:"sm",flat:!0,icon:ke.value[0],"aria-label":a==="Years"?w.lang.date.prevYear:w.lang.date.prevMonth,tabindex:i.value,disable:D.prev===!1,..._("go-#"+a,{onClick(){d(-1)}})})]),b("div",{class:"relative-position overflow-hidden flex flex-center"+f},[b(De,{name:"q-transition--jump-"+r},()=>b("div",{key:l},[b(H,{flat:!0,dense:!0,noCaps:!0,label:e,tabindex:i.value,..._("view#"+a,{onClick:()=>{o.value=a}})})]))]),b("div",{class:"row items-center q-date__arrow"},[b(H,{round:!0,dense:!0,size:"sm",flat:!0,icon:ke.value[1],"aria-label":a==="Years"?w.lang.date.nextYear:w.lang.date.nextMonth,tabindex:i.value,disable:D.next===!1,..._("go+#"+a,{onClick(){d(1)}})})])]}const Zt={Calendar:()=>[b("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[b("div",{class:"q-date__navigation row items-center no-wrap"},Qe({label:V.value.months[n.value.month-1],type:"Months",key:n.value.month,dir:se.value,goTo:ft,boundaries:Be.value.month,cls:" col"}).concat(Qe({label:n.value.year,type:"Years",key:n.value.year,dir:Z.value,goTo:$e,boundaries:Be.value.year,cls:""}))),b("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Ht.value.map(e=>b("div",{class:"q-date__calendar-item"},[b("div",e)]))),b("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[b(De,{name:"q-transition--slide-"+se.value},()=>b("div",{key:N.value,class:"q-date__calendar-days fit"},st.value.map(e=>b("div",{class:e.classes},[e.in===!0?b(H,{class:e.today===!0?"q-date__today":"",dense:!0,flat:e.flat,unelevated:e.unelevated,color:e.color,textColor:e.textColor,label:e.i,tabindex:i.value,..._("day#"+e.i,{onClick:()=>{Xt(e.i)},onMouseover:()=>{ea(e.i)}})},e.event!==!1?()=>b("div",{class:"q-date__event bg-"+e.event}):null):b("div",""+e.i)]))))])])],Months(){const e=n.value.year===O.value.year,a=r=>$.value!==null&&n.value.year===$.value.year&&$.value.month>r||U.value!==null&&n.value.year===U.value.year&&U.value.month<r,l=V.value.monthsShort.map((r,d)=>{const D=n.value.month===d+1;return b("div",{class:"q-date__months-item flex flex-center"},[b(H,{class:e===!0&&O.value.month===d+1?"q-date__today":null,flat:D!==!0,label:r,unelevated:D,color:D===!0?Q.value:null,textColor:D===!0?ie.value:null,tabindex:i.value,disable:a(d+1),..._("month#"+d,{onClick:()=>{Jt(d+1)}})})])});return t.yearsInMonthView===!0&&l.unshift(b("div",{class:"row no-wrap full-width"},[Qe({label:n.value.year,type:"Years",key:n.value.year,dir:Z.value,goTo:$e,boundaries:Be.value.year,cls:" col"})])),b("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},l)},Years(){const e=k.value,a=e+X,l=[],r=d=>$.value!==null&&$.value.year>d||U.value!==null&&U.value.year<d;for(let d=e;d<=a;d++){const D=n.value.year===d;l.push(b("div",{class:"q-date__years-item flex flex-center"},[b(H,{key:"yr"+d,class:O.value.year===d?"q-date__today":null,flat:!D,label:d,dense:!0,unelevated:D,color:D===!0?Q.value:null,textColor:D===!0?ie.value:null,tabindex:i.value,disable:r(d),..._("yr#"+d,{onClick:()=>{Wt(d)}})})]))}return b("div",{class:"q-date__view q-date__years flex flex-center"},[b("div",{class:"col-auto"},[b(H,{round:!0,dense:!0,flat:!0,icon:ke.value[0],"aria-label":w.lang.date.prevRangeYears(X),tabindex:i.value,disable:r(e),..._("y-",{onClick:()=>{k.value-=X}})})]),b("div",{class:"q-date__years-content col self-stretch row items-center"},l),b("div",{class:"col-auto"},[b(H,{round:!0,dense:!0,flat:!0,icon:ke.value[1],"aria-label":w.lang.date.nextRangeYears(X),tabindex:i.value,disable:r(a),..._("y+",{onClick:()=>{k.value+=X}})})])])}};function Xt(e){const a={...n.value,day:e};if(t.range===!1){Kt(a,N.value);return}if(v.value===null){const l=st.value.find(d=>d.fill!==!0&&d.i===e);if(t.noUnset!==!0&&l.range!==void 0){Ye({target:a,from:l.range.from,to:l.range.to});return}if(l.selected===!0){Ye(a);return}const r=le(a);v.value={init:a,initHash:r,final:a,finalHash:r},m("rangeStart",ue(a))}else{const l=v.value.initHash,r=le(a),d=l<=r?{from:v.value.init,to:a}:{from:a,to:v.value.init};v.value=null,Ue(l===r?a:{target:a,...d}),m("rangeEnd",{from:ue(d.from),to:ue(d.to)})}}function ea(e){if(v.value!==null){const a={...n.value,day:e};Object.assign(v.value,{final:a,finalHash:le(a)})}}return Object.assign(x,{setToday:it,setView:Lt,offsetCalendar:Nt,setCalendarTo:He,setEditingRange:zt}),()=>{const e=[b("div",{class:"q-date__content col relative-position"},[b(De,{name:"q-transition--fade"},Zt[o.value])])],a=It(g.default);return a!==void 0&&e.push(b("div",{class:"q-date__actions"},a)),t.name!==void 0&&t.disable!==!0&&Y(e,"push"),b("div",{class:u.value,...Qt.value},[Gt(),b("div",{ref:L,class:"q-date__main col column",tabindex:-1},e)])}}}),Je=Ze({name:"QPopupProxy",props:{...la,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(t,{slots:g,emit:m,attrs:x}){const{proxy:w}=Xe(),{$q:A}=w,_=M(!1),i=M(null),B=c(()=>parseInt(t.breakpoint,10)),{canShow:T}=na({showing:_});function F(){return A.screen.width<B.value||A.screen.height<B.value?"dialog":"menu"}const S=M(F()),C=c(()=>S.value==="menu"?{maxHeight:"99vh"}:{});oe(()=>F(),q=>{_.value!==!0&&(S.value=q)});function Y(q){_.value=!0,m("show",q)}function L(q){_.value=!1,S.value=F(),m("hide",q)}return Object.assign(w,{show(q){T(q)===!0&&i.value.show(q)},hide(q){i.value.hide(q)},toggle(q){i.value.toggle(q)}}),Va(w,"currentComponent",()=>({type:S.value,ref:i.value})),()=>{const q={ref:i,...C.value,...x,onShow:Y,onHide:L};let V;return S.value==="dialog"?V=Da:(V=Rt,Object.assign(q,{target:t.target,contextMenu:t.contextMenu,noParentEvent:!0,separateClosePopup:!0})),b(V,q,g.default)}}}),Ka={class:"row q-col-gutter-xs"},Ga={class:"col"},Za={key:0,class:"col"},Xa={class:"row items-center justify-end"},el={key:1,class:"col"},tl={class:"row items-center justify-end"},al={key:2,class:"col"},ll={class:"row items-center justify-end"},Ke=et({__name:"DateFilterFieldCustomInputSelector",props:{modelValue:{},label:{default:""},dense:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},autoOpenPopUps:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(t,{expose:g,emit:m}){const{t:x}=at(),w=m,A=t,_=M(null),i=M(null),B=M(null),T=M(null),F=M(null),S=M(null),C=c({get(){return A.modelValue},set(n){w("update:modelValue",n)}}),Y=c(()=>ga.map(n=>({...n,label:x(n.labelKey)}))),L=c({get(){return A.modelValue.currentType===0?Y.value[0]:Y.value.find(n=>n.value===A.modelValue.currentType)},set(n){C.value.setType(n?.value||0),w("update:modelValue",C.value)}}),q=c(()=>A.disable||C.value.state.denyChanges),V=()=>{C.value.recalcTimestamps(),T.value?.hide()},G=()=>{C.value.recalcTimestamps(),F.value?.hide()},K=()=>{C.value.recalcTimestamps(),S.value?.hide()},O=()=>{C.value.state.denyChanges||Re().then(()=>{switch(C.value.currentType){case 7:B.value?.focus();break;case 8:_.value?.focus();break;case 9:i.value?.focus();break;case 10:_.value?.focus();break}}).catch(n=>{console.error(n)})};return g({focus:O}),tt(()=>{A.autofocus&&O()}),(n,o)=>(R(),z("div",Ka,[j("div",Ga,[h(wa,{dense:"","options-dense":"",outlined:"",clearable:C.value.currentType!==0,modelValue:L.value,"onUpdate:modelValue":o[0]||(o[0]=I=>L.value=I),options:Y.value,label:t.label,disable:t.disable},{prepend:y(()=>[Sa(n.$slots,"prepend",{},()=>[h(J,{name:"calendar_month"})])]),_:3},8,["clearable","modelValue","options","label","disable"])]),C.value.hasFrom()?(R(),z("div",Za,[h(s(de),{dense:"",outlined:"",mask:"date",modelValue:C.value.formattedDate.from,"onUpdate:modelValue":o[2]||(o[2]=I=>C.value.formattedDate.from=I),label:s(x)("From date"),disable:q.value,ref_key:"qInputFromDateRef",ref:_,error:!C.value.formattedDate.from,"error-message":s(x)("Field is required")},{append:y(()=>[h(J,{name:"event",class:"cursor-pointer"},{default:y(()=>[h(s(Je),{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"qInputFromDatePopupProfyRef",ref:T},{default:y(()=>[h(We,{modelValue:C.value.formattedDate.from,"onUpdate:modelValue":[o[1]||(o[1]=I=>C.value.formattedDate.from=I),V],minimal:""},{default:y(()=>[j("div",Xa,[be(h(H,{label:s(x)("Close"),"no-caps":"",color:"primary",flat:""},null,8,["label"]),[[Ae]])])]),_:1},8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message"])])):re("",!0),C.value.hasTo()?(R(),z("div",el,[h(s(de),{dense:"",outlined:"",mask:"date",modelValue:C.value.formattedDate.to,"onUpdate:modelValue":o[4]||(o[4]=I=>C.value.formattedDate.to=I),label:s(x)("To date"),disable:q.value,ref_key:"qInputToDateRef",ref:i,error:!C.value.formattedDate.to,"error-message":s(x)("Field is required")},{append:y(()=>[h(J,{name:"event",class:"cursor-pointer"},{default:y(()=>[h(s(Je),{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"qInputToDatePopupProfyRef",ref:F},{default:y(()=>[h(We,{modelValue:C.value.formattedDate.to,"onUpdate:modelValue":[o[3]||(o[3]=I=>C.value.formattedDate.to=I),G],minimal:""},{default:y(()=>[j("div",tl,[be(h(H,{label:s(x)("Close"),"no-caps":"",color:"primary",flat:""},null,8,["label"]),[[Ae]])])]),_:1},8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message"])])):re("",!0),C.value.hasFixed()?(R(),z("div",al,[h(s(de),{dense:"",outlined:"",mask:"date",modelValue:C.value.formattedDate.fixed,"onUpdate:modelValue":o[6]||(o[6]=I=>C.value.formattedDate.fixed=I),label:s(x)("Fixed date"),disable:q.value,ref_key:"qInputFixedDateRef",ref:B,error:!C.value.formattedDate.fixed,"error-message":s(x)("Field is required")},{append:y(()=>[h(J,{name:"event",class:"cursor-pointer"},{default:y(()=>[h(s(Je),{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"qInputFixedDatePopupProfyRef",ref:S},{default:y(()=>[h(We,{modelValue:C.value.formattedDate.fixed,"onUpdate:modelValue":[o[5]||(o[5]=I=>C.value.formattedDate.fixed=I),K],minimal:""},{default:y(()=>[j("div",ll,[be(h(H,{label:s(x)("Close"),"no-caps":"",color:"primary",flat:""},null,8,["label"]),[[Ae]])])]),_:1},8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message"])])):re("",!0)]))}}),nl=Object.keys(Tt);function ol(t){return nl.reduce((g,m)=>{const x=t[m];return x!==void 0&&(g[m]=x),g},{})}const rl=Ze({name:"QBtnDropdown",props:{...Tt,...oa,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(t,{slots:g,emit:m}){const{proxy:x}=Xe(),w=M(t.modelValue),A=M(null),_=Ha(),i=c(()=>{const n={"aria-expanded":w.value===!0?"true":"false","aria-haspopup":"true","aria-controls":_.value,"aria-label":t.toggleAriaLabel||x.$q.lang.label[w.value===!0?"collapse":"expand"](t.label)};return(t.disable===!0||t.split===!1&&t.disableMainBtn===!0||t.disableDropdown===!0)&&(n["aria-disabled"]="true"),n}),B=c(()=>"q-btn-dropdown__arrow"+(w.value===!0&&t.noIconAnimation===!1?" rotate-180":"")+(t.split===!1?" q-btn-dropdown__arrow-container":"")),T=c(()=>fa(t)),F=c(()=>ol(t));oe(()=>t.modelValue,n=>{A.value?.[n?"show":"hide"]()}),oe(()=>t.split,O);function S(n){w.value=!0,m("beforeShow",n)}function C(n){m("show",n),m("update:modelValue",!0)}function Y(n){w.value=!1,m("beforeHide",n)}function L(n){m("hide",n),m("update:modelValue",!1)}function q(n){m("click",n)}function V(n){Aa(n),O(),m("click",n)}function G(n){A.value?.toggle(n)}function K(n){A.value?.show(n)}function O(n){A.value?.hide(n)}return Object.assign(x,{show:K,hide:O,toggle:G}),tt(()=>{t.modelValue===!0&&K()}),()=>{const n=[b(J,{class:B.value,name:t.dropdownIcon||x.$q.iconSet.arrow.dropdown})];return t.disableDropdown!==!0&&n.push(b(Rt,{ref:A,id:_.value,class:t.contentClass,style:t.contentStyle,cover:t.cover,fit:!0,persistent:t.persistent,noEscDismiss:t.noEscDismiss,noRouteDismiss:t.noRouteDismiss,autoClose:t.autoClose,noFocus:t.noFocus,noRefocus:t.noRefocus,anchor:t.menuAnchor,self:t.menuSelf,offset:t.menuOffset,separateClosePopup:!0,transitionShow:t.transitionShow,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,onBeforeShow:S,onShow:C,onBeforeHide:Y,onHide:L},g.default)),t.split===!1?b(H,{class:"q-btn-dropdown q-btn-dropdown--simple",...F.value,...i.value,disable:t.disable===!0||t.disableMainBtn===!0,noWrap:!0,round:!1,onClick:q},{default:()=>It(g.label,[]).concat(n),loading:g.loading}):b(Ft,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:t.rounded,square:t.square,...T.value,glossy:t.glossy,stretch:t.stretch},()=>[b(H,{class:"q-btn-dropdown--current",...F.value,disable:t.disable===!0||t.disableMainBtn===!0,noWrap:!0,round:!1,onClick:V},{default:g.label,loading:g.loading}),b(H,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...i.value,...T.value,disable:t.disable===!0||t.disableDropdown===!0,rounded:t.rounded,color:t.color,textColor:t.textColor,dense:t.dense,size:t.size,padding:t.padding,ripple:t.ripple},()=>n)])}}}),sl=et({__name:"SortByFieldCustomButtonDropdown",props:{options:{},current:{},dense:{type:Boolean,default:!1}},emits:["change"],setup(t,{emit:g}){const m=Pa(),{t:x}=at(),w=g,A=t,_=c({get(){return A.current},set(){}}),i=c(()=>x("Current sort by",{label:_.value.label?x(_.value.label):null,order:_.value.order?x(_.value.order=="DESC"?"descending":"ascending"):null})),B=T=>{w("change",T)};return(T,F)=>(R(),te(rl,ja(s(m),{label:i.value,dense:t.dense}),{default:y(()=>[h(jt,null,{default:y(()=>[(R(!0),z(Me,null,je(t.options,(S,C)=>be((R(),te(Mt,{dense:t.dense,key:C,onClick:Y=>B(S),clickable:!(S.field==_.value.field&&S.order==_.value.order),disable:S.field==_.value.field&&S.order==_.value.order},{default:y(()=>[h(Te,{avatar:""},{default:y(()=>[h(J,{name:S.order=="ASC"?"keyboard_double_arrow_up":"keyboard_double_arrow_down"},null,8,["name"])]),_:2},1024),h(Te,null,{default:y(()=>[h(Pe,null,{default:y(()=>[ee(E(s(x)("Current sort by",{label:s(x)(S.label),order:S.order=="DESC"?s(x)("descending"):s(x)("ascending")})),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["dense","onClick","clickable","disable"])),[[Ae]])),128))]),_:1})]),_:1},16,["label","dense"]))}}),il={class:"row q-col-gutter-sm"},ul={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6"},dl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6"},cl={key:0,class:"q-ma-md flex flex-center"},fl={class:"lt-xl"},ml={class:"lt-xl"},vl=["onClick"],hl={class:"td-document-link gt-lg"},gl={class:"gt-lg"},bl={class:"gt-lg"},yl={class:"gt-lg"},pl={class:"gt-lg"},xl={key:3,class:"q-ma-md flex flex-center"},_l=et({__name:"AdvancedSearchPage",setup(t){const{t:g}=at(),m=Ta(),{screen:x}=ra(),w=[{field:"title",title:"Title",defaultClass:"gt-lg"},{field:"createdOnTimestamp",title:"Creation date",defaultClass:"gt-lg"},{field:"lastUpdateTimestamp",title:"Last update",defaultClass:"gt-lg"},{field:"attachmentCount",title:"Attachments",defaultClass:"gt-lg"},{field:"noteCount",title:"Notes",defaultClass:"gt-lg"}],A=[];w.forEach(k=>{A.push(new Ge(k.field,k.title,"ASC")),A.push(new Ge(k.field,k.title,"DESC"))});const _=M(!1),i=Ma({...Ct}),B=M(m.meta.conditionsFilterExpanded===!0),T=M(null),F=c(()=>m.name==="advancedSearch"),S=Ra([]),C=c(()=>x.lt.xl),Y=c(()=>S.value.length>0),L=c(()=>!i.ajaxRunning&&i.ajaxErrors),q=c(()=>!i.ajaxRunning&&_.value&&!Y.value),V=c(()=>m.params.fixedCreationDate!==void 0),G=c(()=>m.params.fixedLastUpdate!==void 0),K=c(()=>m.params.fixedUpdatedOn!==void 0),O=c(()=>o.sort.order=="ASC"?"keyboard_double_arrow_up":"keyboard_double_arrow_down"),n=c(()=>{let k=0;return o.filter.text.title&&k++,o.filter.text.description&&k++,o.filter.text.notesBody&&k++,o.filter.text.attachmentsFilename&&k++,o.filter.tags.length>0&&(k+=o.filter.tags.length),o.filter.dates?.createdAt.state.hasValue&&k++,o.filter.dates?.lastUpdateAt.state.hasValue&&k++,o.filter.dates?.updatedAt.state.hasValue&&k++,k}),o=La();F.value||(o.reset(),m.params.tag!==void 0&&typeof m.params.tag=="string"&&(o.filter.tags=[m.params.tag]),V.value&&typeof m.params.fixedCreationDate=="string"?(o.filter.dates.createdAt.skipClearOnRecalc.fixed=!0,o.filter.dates.createdAt.formattedDate.fixed=m.params.fixedCreationDate?m.params.fixedCreationDate.replaceAll("-","/"):null,o.filter.dates.createdAt.setType(7)):G.value&&typeof m.params.fixedLastUpdate=="string"?(o.filter.dates.lastUpdateAt.skipClearOnRecalc.fixed=!0,o.filter.dates.lastUpdateAt.formattedDate.fixed=m.params.fixedLastUpdate?m.params.fixedLastUpdate.replaceAll("-","/"):null,o.filter.dates.lastUpdateAt.setType(7)):K.value&&typeof m.params.fixedUpdatedOn=="string"&&(o.filter.dates.updatedAt.skipClearOnRecalc.fixed=!0,o.filter.dates.updatedAt.formattedDate.fixed=m.params.fixedUpdatedOn?m.params.fixedUpdatedOn.replaceAll("-","/"):null,o.filter.dates.updatedAt.setType(7)));const I=k=>{o.pager.currentPageIndex=k,Z(!1)},se=(k,v)=>{i.ajaxRunning||(o.sort.toggle(k,v),o.sort.refreshLabel(A),Z(!1))},Z=k=>{k&&(o.pager.currentPageIndex=1),Object.assign(i,Ct),i.ajaxRunning=!0,Ba.document.search(o.pager,o.filter,o.sort,!1).then(v=>{v.data.results&&(S.value=[],o.pager.currentPageIndex=v.data.results.pagination.currentPage,o.pager.resultsPage=v.data.results.pagination.resultsPage,o.pager.totalResults=v.data.results.pagination.totalResults,o.pager.totalPages=v.data.results.pagination.totalPages,S.value=v.data.results.documents.map(u=>new ba(g,u.id,new gt(g,u.createdAtTimestamp),new gt(g,u.updatedAtTimestamp),u.title,u.description,u.tags,u.attachmentCount,u.noteCount,u.matchedFragments,"")),_.value=!0,T.value?.expand())}).catch(v=>{if(i.ajaxErrors=!0,v.isAPIError)switch(i.ajaxAPIErrorDetails=v.customAPIErrorDetails,v.response.status){case 400:i.ajaxErrorMessage="API Error: invalid/missing param";break;case 401:i.ajaxErrors=!1,Ne.emit("reAuthRequired",{emitter:"AdvancedSearchPage.onSubmitForm"});break;default:i.ajaxErrorMessage="API Error: fatal error";break}else i.ajaxErrorMessage=`Uncaught exception: ${v}`,console.error(v);_.value=!0}).finally(()=>{i.ajaxRunning=!1})},ye=()=>{o.reset(),_.value=!1,S.value=[]};return tt(()=>{m.meta.autoLaunchSearch===!0&&Re().then(()=>{Z(!0)}).catch(k=>{console.error(k)}),Ne.on("reAuthSucess",k=>{k.to?.includes("AdvancedSearchPage.onSubmitForm")&&Z(!1)})}),Fa(()=>{Ne.off("reAuthSucess")}),(k,v)=>(R(),te(Ca,null,{default:y(()=>[h(kt,{title:"Advanced search",icon:"filter_alt",loading:i.ajaxRunning,error:i.ajaxErrors,expanded:B.value},{"header-extra":y(()=>[be(h(bt,{square:"",size:"sm",class:"theme-q-chip-highlight"},{default:y(()=>[ee(E(s(g)("Total search conditions count",{count:n.value})),1)]),_:1},512),[[wt,n.value>0]])]),content:y(()=>[j("form",{onSubmit:v[8]||(v[8]=he(u=>Z(!0),["prevent","stop"])),onReset:he(ye,["prevent","stop"]),autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false",class:"q-pa-md"},[j("div",il,[j("div",ul,[h(de,{class:"q-mb-md",dense:"",outlined:"",modelValue:s(o).filter.text.title,"onUpdate:modelValue":v[0]||(v[0]=u=>s(o).filter.text.title=u),modelModifiers:{trim:!0},type:"text",name:"title",clearable:"",label:s(g)("Document title"),disable:i.ajaxRunning,autofocus:!0,placeholder:s(g)("Type text condition")},{prepend:y(()=>[h(J,{name:"article"})]),_:1},8,["modelValue","label","disable","placeholder"]),h(de,{class:"q-mb-md",dense:"",outlined:"",modelValue:s(o).filter.text.description,"onUpdate:modelValue":v[1]||(v[1]=u=>s(o).filter.text.description=u),modelModifiers:{trim:!0},type:"text",name:"description",clearable:"",label:s(g)("Document description"),disable:i.ajaxRunning,placeholder:s(g)("Type text condition")},{prepend:y(()=>[h(J,{name:"article"})]),_:1},8,["modelValue","label","disable","placeholder"]),h(de,{class:"q-mb-md",dense:"",outlined:"",modelValue:s(o).filter.text.notesBody,"onUpdate:modelValue":v[2]||(v[2]=u=>s(o).filter.text.notesBody=u),modelModifiers:{trim:!0},type:"text",name:"notesBody",clearable:"",label:s(g)("Document notes"),disable:i.ajaxRunning,placeholder:s(g)("Type text condition")},{prepend:y(()=>[h(J,{name:"speaker_notes"})]),_:1},8,["modelValue","label","disable","placeholder"]),h(de,{class:"q-mb-md",dense:"",outlined:"",modelValue:s(o).filter.text.attachmentsFilename,"onUpdate:modelValue":v[3]||(v[3]=u=>s(o).filter.text.attachmentsFilename=u),modelModifiers:{trim:!0},type:"text",name:"notesBody",clearable:"",label:s(g)("Document attachment filenames"),disable:i.ajaxRunning,placeholder:s(g)("Type text condition")},{prepend:y(()=>[h(J,{name:"attach_file"})]),_:1},8,["modelValue","label","disable","placeholder"])]),j("div",dl,[h(Ke,{label:s(g)("Document creation date"),disable:i.ajaxRunning||V.value,modelValue:s(o).filter.dates.createdAt,"onUpdate:modelValue":v[4]||(v[4]=u=>s(o).filter.dates.createdAt=u),"auto-open-pop-ups":!V.value,class:"q-mb-md"},null,8,["label","disable","modelValue","auto-open-pop-ups"]),h(Ke,{label:s(g)("Document last update"),disable:i.ajaxRunning||G.value,modelValue:s(o).filter.dates.lastUpdateAt,"onUpdate:modelValue":v[5]||(v[5]=u=>s(o).filter.dates.lastUpdateAt=u),"auto-open-pop-ups":!G.value,class:"q-mb-md"},null,8,["label","disable","modelValue","auto-open-pop-ups"]),h(Ke,{label:s(g)("Document updated on"),disable:i.ajaxRunning||K.value,modelValue:s(o).filter.dates.updatedAt,"onUpdate:modelValue":v[6]||(v[6]=u=>s(o).filter.dates.updatedAt=u),"auto-open-pop-ups":!K.value,class:"q-mb-md"},null,8,["label","disable","modelValue","auto-open-pop-ups"]),h(Ua,{modelValue:s(o).filter.tags,"onUpdate:modelValue":v[7]||(v[7]=u=>s(o).filter.tags=u),label:"Document tags",disabled:i.ajaxRunning,dense:"","start-mode-editable":!0,"deny-change-editable-mode":!0,clearable:"",placeholder:s(g)("Type text condition"),class:"q-mb-md q-pb-none"},null,8,["modelValue","disabled","placeholder"])])]),h(Ft,{spread:"",class:"q-mt-md"},{default:y(()=>[h(H,{color:"primary",size:"md",label:k.$t("Search"),"no-caps":"",icon:"search",disable:i.ajaxRunning,loading:i.ajaxRunning,type:"submit"},{loading:y(()=>[h(ca,{class:"on-left"}),ee(" "+E(s(g)("Searching...")),1)]),_:1},8,["label","disable","loading"]),F.value?(R(),te(H,{key:0,class:"action-secondary",size:"md",label:k.$t("Reset filters"),"no-caps":"",icon:"undo",disable:i.ajaxRunning||n.value<1,type:"reset"},null,8,["label","disable"])):re("",!0)]),_:1})],32),L.value?(R(),te(Ea,{key:0,text:i.ajaxErrorMessage||"Error loading data","api-error":i.ajaxAPIErrorDetails,class:"q-ma-md"},null,8,["text","api-error"])):q.value?(R(),te($a,{key:1,warning:"",text:"No results found with current filter",class:"q-ma-md"})):re("",!0)]),_:1},8,["loading","error","expanded"]),be(h(kt,{title:"Results",icon:"folder_open",staticIcon:!0,loading:i.ajaxRunning,error:i.ajaxErrors,expanded:"",class:"q-mt-sm",ref_key:"resultsWidgetRef",ref:T},{"header-extra":y(()=>[h(bt,{square:"",size:"sm",color:"grey-7","text-color":"white"},{default:y(()=>[ee(E(s(g)("Total search results count",{count:s(o).pager.totalResults})),1)]),_:1})]),content:y(()=>[s(o).pager.totalPages>1?(R(),z("div",cl,[h(yt,{modelValue:s(o).pager.currentPageIndex,"onUpdate:modelValue":[v[9]||(v[9]=u=>s(o).pager.currentPageIndex=u),I],color:"dark",max:s(o).pager.totalPages,"max-pages":5,"boundary-numbers":"","direction-links":"","boundary-links":"",disable:i.ajaxRunning,class:"theme-default-q-pagination"},null,8,["modelValue","max","disable"])])):re("",!0),C.value?(R(),te(Dt,{key:1,class:"q-ma-md"},{default:y(()=>[j("thead",null,[j("tr",null,[j("th",fl,[h(sl,{square:"",dense:"","no-caps":"",options:A,current:s(o).sort,onChange:v[10]||(v[10]=u=>se(u.field,u.order)),flat:"",class:"action-primary fit full-height"},null,8,["current"])])])]),j("tbody",null,[(R(!0),z(Me,null,je(S.value,u=>(R(),z("tr",{key:u.id},[j("td",ml,[h(jt,{dense:""},{default:y(()=>[h(Mt,{clickable:"",disable:i.ajaxRunning,to:{name:"document",params:{id:u.id}},class:"bg-transparent"},{default:y(()=>[h(Te,null,{default:y(()=>[h(Pe,null,{default:y(()=>[ee(E(s(g)("Title"))+": "+E(u.title),1)]),_:2},1024),h(Pe,{caption:""},{default:y(()=>[ee(E(s(g)("Creation date"))+": "+E(u.createdAt.dateTime)+" ("+E(u.createdAt.timeAgo)+")",1)]),_:2},1024),u.updatedAt?.dateTime?(R(),te(Pe,{key:0,caption:""},{default:y(()=>[ee(E(s(g)("Last update"))+": "+E(u.updatedAt.dateTime)+" ("+E(u.updatedAt.timeAgo)+")",1)]),_:2},1024)):re("",!0)]),_:2},1024),h(Te,{side:"",top:""},{default:y(()=>[h(Se,{size:"md",square:"",class:"min-width-9em",count:u.attachmentCount,label:"Total attachments count","tool-tip":"View document attachments",disable:i.ajaxRunning,onClick:he(Q=>s(xt)(u.id,u.title),["stop","prevent"])},null,8,["count","disable","onClick"]),h(Se,{size:"md",square:"",class:"min-width-9em",count:u.noteCount,label:"Total notes","tool-tip":"View document notes",disable:i.ajaxRunning,onClick:he(Q=>s(_t)(u.id,u.title),["stop","prevent"])},null,8,["count","disable","onClick"])]),_:2},1024)]),_:2},1032,["disable","to"])]),_:2},1024)])]))),128))])]),_:1})):(R(),te(Dt,{key:2,class:"q-ma-md"},{default:y(()=>[j("thead",null,[j("tr",null,[v[12]||(v[12]=j("th",{class:"lt-xl"},null,-1)),(R(),z(Me,null,je(w,(u,Q)=>j("th",{key:Q,class:Ia(["text-left",u.defaultClass,{"cursor-not-allowed":i.ajaxRunning,"cursor-pointer":!i.ajaxRunning,"action-primary":s(o).sort.field===u.field}]),onClick:ie=>se(u.field)},[h(J,{name:s(o).sort.field===u.field?O.value:"sort",size:"sm"},null,8,["name"]),ee(" "+E(s(g)(u.title))+" ",1),h(sa,null,{default:y(()=>[ee(E(s(g)("Toggle sort by this column",{field:s(g)(u.title)})),1)]),_:2},1024)],10,vl)),64))])]),j("tbody",null,[(R(!0),z(Me,null,je(S.value,u=>(R(),z("tr",{key:u.id},[v[13]||(v[13]=j("td",{class:"lt-xl"},null,-1)),j("td",hl,[h(H,{align:"left","no-caps":"",flat:"",to:{name:"document",params:{id:u.id}},class:"fit text-decoration-hover",label:u.title},null,8,["to","label"])]),j("td",gl,E(u.createdAt.dateTime),1),j("td",bl,E(u.updatedAt?.dateTime),1),j("td",yl,[h(Se,{size:"md",square:"",class:"min-width-8em",count:u.attachmentCount,label:"Total attachments count","tool-tip":"View document attachments",disable:i.ajaxRunning,onClick:he(Q=>s(xt)(u.id,u.title),["stop","prevent"]),"q-chip-class":"'q-chip-8em'"},null,8,["count","disable","onClick"])]),j("td",pl,[h(Se,{size:"md",square:"",class:"min-width-8em",count:u.noteCount,label:"Total notes","tool-tip":"View document notes",disable:i.ajaxRunning,onClick:he(Q=>s(_t)(u.id,u.title),["stop","prevent"]),"q-chip-class":"'q-chip-8em'"},null,8,["count","disable","onClick"])])]))),128))])]),_:1})),s(o).pager.totalPages>1?(R(),z("div",xl,[h(yt,{modelValue:s(o).pager.currentPageIndex,"onUpdate:modelValue":[v[11]||(v[11]=u=>s(o).pager.currentPageIndex=u),I],color:"dark",max:s(o).pager.totalPages,"max-pages":5,"boundary-numbers":"","direction-links":"","boundary-links":"",disable:i.ajaxRunning,class:"theme-default-q-pagination"},null,8,["modelValue","max","disable"])])):re("",!0)]),_:1},8,["loading","error"]),[[wt,Y.value]])]),_:1}))}}),Yl=Ya(_l,[["__scopeId","data-v-f64e9518"]]);export{Yl as default};
