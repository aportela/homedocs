import{Q as jt,D as gt,a as bt}from"./date-time-BzOgC_OT.js";import{b as ea,e as ta,m as aa,n as la,Q as W,o as na,h as Mt,i as je,_ as oa}from"./QItem-D4EQvWHO.js";import{u as ra,c as sa,b as ia,Q as ie,a as ua}from"./QInput-CMfaQJRq.js";import{Q as O,n as At,g as da}from"./QBtn-BcnWqC13.js";import{a as Ft,C as Se,Q as Rt}from"./ClosePopup-CzXLbngJ.js";import{c as ca,S as fa,a as ma,s as va,b as ha,Q as yt}from"./QPagination-CkZuArtw.js";import{t as ga,p as ue,_ as ba,j as Ye,e as ya,g as pt,i as pa,Q as Pe,a as Ue,o as xt,c as _t}from"./QItemLabel-D2xHNXGJ.js";import{e as xa,d as _a,Q as wa}from"./QMarkupTable-o0JdIHH4.js";import{Q as Da}from"./QPage-JA5HT188.js";import{a0 as Ca,g as f,p as Ge,s as Ze,i as A,x as le,q as h,$ as xe,n as Me,ad as ka,aa as qa,a as Xe,M as et,j as J,b as H,k as ne,e as m,w as y,a4 as Va,u,N as _e,o as $,J as Sa,a7 as Pa,c as se,a8 as ja,O as We,P as Je,l as Z,t as E,h as wt,Q as Ma,z as Aa,m as he,Z as Fa,Y as Ra}from"./index-BSZHI2pT.js";import{a as Ta}from"./api-DiLYfQz-.js";import{j as Ia,k as Ba,d as Dt,c as Ha,_ as Oa}from"./CustomErrorBanner.vue_vue_type_script_setup_true_lang-a2ZcyAYi.js";import{I as $a}from"./InteractiveTagsFieldCustomSelect-CXhgXvXH.js";import{_ as Ct}from"./CustomExpansionWidget.vue_vue_type_script_setup_true_lang-BNzkgcxa.js";import{h as Tt,_ as Ea}from"./_plugin-vue_export-helper-BidlGddk.js";import{u as tt}from"./vue-i18n.runtime-C1BpSJts.js";import{_ as Ve}from"./ViewDocumentDetailsButton.vue_vue_type_script_setup_true_lang-Chcpa00U.js";import"./localStorage-dsyGJO5t.js";import"./axios-RI6aZEej.js";import"./session-bV_Kq9am.js";import"./BrowseByTagButton.vue_vue_type_script_setup_true_lang-DVpKc6yV.js";class Ke{field;label;order;constructor(v,g,w){this.field=v,this.label=g,this.order=w}refreshLabel(v){this.label=v.find(g=>g.field==this.field)?.label||""}toggle(v,g){this.field==v?g?this.order=g:this.order=this.order=="ASC"?"DESC":"ASC":(this.field=v,this.order=g||"ASC")}}class Ya{currentPageIndex;resultsPage;totalResults;totalPages;constructor(v,g,w,x){this.currentPageIndex=v,this.resultsPage=g,this.totalResults=w,this.totalPages=x}}const kt=()=>new Ya(1,32,0,0),qt=()=>{const t=new fa(null,null,null,null),v=new ma(null,null,null);return new ca(t,[],v)},Vt=()=>new Ke("lastUpdateTimestamp","Last update","DESC"),Ua=Ca("advancedSearchData",{state:()=>({pager:kt(),filter:qt(),sort:Vt()}),getters:{currentPager:t=>t.pager,currentFilter:t=>t.filter,currentSort:t=>t.sort},actions:{reset(){this.pager=kt(),this.filter=qt(),this.sort=Vt()},setPager(t){this.pager=t},setFilter(t){this.filter=t},setSort(t){this.sort=t}}}),Qa=["gregorian","persian"],St={mask:{type:String},locale:Object,calendar:{type:String,validator:t=>Qa.includes(t),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},La=["update:modelValue"];function te(t){return t.year+"/"+ue(t.month)+"/"+ue(t.day)}function Na(t,v){const g=f(()=>t.disable!==!0&&t.readonly!==!0),w=f(()=>g.value===!0?0:-1),x=f(()=>{const C=[];return t.color!==void 0&&C.push(`bg-${t.color}`),t.textColor!==void 0&&C.push(`text-${t.textColor}`),C.join(" ")});function j(){return t.locale!==void 0?{...v.lang.date,...t.locale}:v.lang.date}function r(C){const I=new Date,F=C===!0?null:0;if(t.calendar==="persian"){const s=ga(I);return{year:s.jy,month:s.jm,day:s.jd}}return{year:I.getFullYear(),month:I.getMonth()+1,day:I.getDate(),hour:F,minute:F,second:F,millisecond:F}}return{editable:g,tabindex:w,headerClass:x,getLocale:j,getCurrentDate:r}}const G=20,za=["Calendar","Years","Months"],Pt=t=>za.includes(t),Qe=t=>/^-?[\d]+\/[0-1]\d$/.test(t),ge=" â€” ";function ae(t){return t.year+"/"+ue(t.month)}const Le=Ge({name:"QDate",props:{...St,...ra,...ea,modelValue:{required:!0,validator:t=>typeof t=="string"||Array.isArray(t)===!0||Object(t)===t||t===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...St.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Qe},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Qe},navigationMaxYearMonth:{type:String,validator:Qe},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Pt}},emits:[...La,"rangeStart","rangeEnd","navigation"],setup(t,{slots:v,emit:g}){const{proxy:w}=Ze(),{$q:x}=w,j=ta(t,x),{getCache:r}=Ia(),{tabindex:C,headerClass:I,getLocale:F,getCurrentDate:s}=Na(t,x);let P;const D=sa(t),Q=ia(D),L=A(null),k=A(ut()),q=A(F()),K=f(()=>ut()),X=f(()=>F()),B=f(()=>s()),n=A(dt(k.value,q.value)),V=A(t.defaultView),R=f(()=>x.lang.rtl===!0?"right":"left"),de=A(R.value),S=A(R.value),b=n.value.year,i=A(b-b%G-(b<0?G:0)),T=A(null),at=f(()=>{const e=t.landscape===!0?"landscape":"portrait";return`q-date q-date--${e} q-date--${e}-${t.minimal===!0?"minimal":"standard"}`+(j.value===!0?" q-date--dark q-dark":"")+(t.bordered===!0?" q-date--bordered":"")+(t.square===!0?" q-date--square no-border-radius":"")+(t.flat===!0?" q-date--flat no-shadow":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-date--readonly":"")}),oe=f(()=>t.color||"primary"),ce=f(()=>t.textColor||"white"),we=f(()=>t.emitImmediately===!0&&t.multiple!==!0&&t.range!==!0),Ae=f(()=>Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue!==null&&t.modelValue!==void 0?[t.modelValue]:[]),z=f(()=>Ae.value.filter(e=>typeof e=="string").map(e=>Be(e,k.value,q.value)).filter(e=>e.dateHash!==null&&e.day!==null&&e.month!==null&&e.year!==null)),fe=f(()=>{const e=a=>Be(a,k.value,q.value);return Ae.value.filter(a=>ka(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:e(a.from),to:e(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),De=f(()=>t.calendar!=="persian"?e=>new Date(e.year,e.month-1,e.day):e=>{const a=pt(e.year,e.month,e.day);return new Date(a.gy,a.gm-1,a.gd)}),Fe=f(()=>t.calendar==="persian"?te:(e,a,l)=>ya(new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),a===void 0?k.value:a,l===void 0?q.value:l,e.year,e.timezoneOffset)),be=f(()=>z.value.length+fe.value.reduce((e,a)=>e+1+pa(De.value(a.to),De.value(a.from)),0)),lt=f(()=>{if(t.title!==void 0&&t.title!==null&&t.title.length!==0)return t.title;if(T.value!==null){const l=T.value.init,o=De.value(l);return q.value.daysShort[o.getDay()]+", "+q.value.monthsShort[l.month-1]+" "+l.day+ge+"?"}if(be.value===0)return ge;if(be.value>1)return`${be.value} ${q.value.pluralDay}`;const e=z.value[0],a=De.value(e);return isNaN(a.valueOf())===!0?ge:q.value.headerTitle!==void 0?q.value.headerTitle(a,e):q.value.daysShort[a.getDay()]+", "+q.value.monthsShort[e.month-1]+" "+e.day}),It=f(()=>z.value.concat(fe.value.map(a=>a.from)).sort((a,l)=>a.year-l.year||a.month-l.month)[0]),Bt=f(()=>z.value.concat(fe.value.map(a=>a.to)).sort((a,l)=>l.year-a.year||l.month-a.month)[0]),nt=f(()=>{if(t.subtitle!==void 0&&t.subtitle!==null&&t.subtitle.length!==0)return t.subtitle;if(be.value===0)return ge;if(be.value>1){const e=It.value,a=Bt.value,l=q.value.monthsShort;return l[e.month-1]+(e.year!==a.year?" "+e.year+ge+l[a.month-1]+" ":e.month!==a.month?ge+l[a.month-1]:"")+" "+a.year}return z.value[0].year}),Ce=f(()=>{const e=[x.iconSet.datetime.arrowLeft,x.iconSet.datetime.arrowRight];return x.lang.rtl===!0?e.reverse():e}),ot=f(()=>t.firstDayOfWeek!==void 0?Number(t.firstDayOfWeek):q.value.firstDayOfWeek),Ht=f(()=>{const e=q.value.daysShort,a=ot.value;return a>0?e.slice(a,7).concat(e.slice(0,a)):e}),ee=f(()=>{const e=n.value;return t.calendar!=="persian"?new Date(e.year,e.month,0).getDate():Ye(e.year,e.month)}),Ot=f(()=>typeof t.eventColor=="function"?t.eventColor:()=>t.eventColor),Y=f(()=>{if(t.navigationMinYearMonth===void 0)return null;const e=t.navigationMinYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),U=f(()=>{if(t.navigationMaxYearMonth===void 0)return null;const e=t.navigationMaxYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),Re=f(()=>{const e={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return Y.value!==null&&Y.value.year>=n.value.year&&(e.year.prev=!1,Y.value.year===n.value.year&&Y.value.month>=n.value.month&&(e.month.prev=!1)),U.value!==null&&U.value.year<=n.value.year&&(e.year.next=!1,U.value.year===n.value.year&&U.value.month<=n.value.month&&(e.month.next=!1)),e}),ke=f(()=>{const e={};return z.value.forEach(a=>{const l=ae(a);e[l]===void 0&&(e[l]=[]),e[l].push(a.day)}),e}),rt=f(()=>{const e={};return fe.value.forEach(a=>{const l=ae(a.from),o=ae(a.to);if(e[l]===void 0&&(e[l]=[]),e[l].push({from:a.from.day,to:l===o?a.to.day:void 0,range:a}),l<o){let d;const{year:_,month:c}=a.from,p=c<12?{year:_,month:c+1}:{year:_+1,month:1};for(;(d=ae(p))<=o;)e[d]===void 0&&(e[d]=[]),e[d].push({from:void 0,to:d===o?a.to.day:void 0,range:a}),p.month++,p.month>12&&(p.year++,p.month=1)}}),e}),ye=f(()=>{if(T.value===null)return;const{init:e,initHash:a,final:l,finalHash:o}=T.value,[d,_]=a<=o?[e,l]:[l,e],c=ae(d),p=ae(_);if(c!==N.value&&p!==N.value)return;const M={};return c===N.value?(M.from=d.day,M.includeFrom=!0):M.from=1,p===N.value?(M.to=_.day,M.includeTo=!0):M.to=ee.value,M}),N=f(()=>ae(n.value)),$t=f(()=>{const e={};if(t.options===void 0){for(let l=1;l<=ee.value;l++)e[l]=!0;return e}const a=typeof t.options=="function"?t.options:l=>t.options.includes(l);for(let l=1;l<=ee.value;l++){const o=N.value+"/"+ue(l);e[l]=a(o)}return e}),Et=f(()=>{const e={};if(t.events===void 0)for(let a=1;a<=ee.value;a++)e[a]=!1;else{const a=typeof t.events=="function"?t.events:l=>t.events.includes(l);for(let l=1;l<=ee.value;l++){const o=N.value+"/"+ue(l);e[l]=a(o)===!0&&Ot.value(o)}}return e}),Yt=f(()=>{let e,a;const{year:l,month:o}=n.value;if(t.calendar!=="persian")e=new Date(l,o-1,1),a=new Date(l,o-1,0).getDate();else{const d=pt(l,o,1);e=new Date(d.gy,d.gm-1,d.gd);let _=o-1,c=l;_===0&&(_=12,c--),a=Ye(c,_)}return{days:e.getDay()-ot.value-1,endDay:a}}),st=f(()=>{const e=[],{days:a,endDay:l}=Yt.value,o=a<0?a+7:a;if(o<6)for(let c=l-o;c<=l;c++)e.push({i:c,fill:!0});const d=e.length;for(let c=1;c<=ee.value;c++){const p={i:c,event:Et.value[c],classes:[]};$t.value[c]===!0&&(p.in=!0,p.flat=!0),e.push(p)}if(ke.value[N.value]!==void 0&&ke.value[N.value].forEach(c=>{const p=d+c-1;Object.assign(e[p],{selected:!0,unelevated:!0,flat:!1,color:oe.value,textColor:ce.value})}),rt.value[N.value]!==void 0&&rt.value[N.value].forEach(c=>{if(c.from!==void 0){const p=d+c.from-1,M=d+(c.to||ee.value)-1;for(let pe=p;pe<=M;pe++)Object.assign(e[pe],{range:c.range,unelevated:!0,color:oe.value,textColor:ce.value});Object.assign(e[p],{rangeFrom:!0,flat:!1}),c.to!==void 0&&Object.assign(e[M],{rangeTo:!0,flat:!1})}else if(c.to!==void 0){const p=d+c.to-1;for(let M=d;M<=p;M++)Object.assign(e[M],{range:c.range,unelevated:!0,color:oe.value,textColor:ce.value});Object.assign(e[p],{flat:!1,rangeTo:!0})}else{const p=d+ee.value-1;for(let M=d;M<=p;M++)Object.assign(e[M],{range:c.range,unelevated:!0,color:oe.value,textColor:ce.value})}}),ye.value!==void 0){const c=d+ye.value.from-1,p=d+ye.value.to-1;for(let M=c;M<=p;M++)e[M].color=oe.value,e[M].editRange=!0;ye.value.includeFrom===!0&&(e[c].editRangeFrom=!0),ye.value.includeTo===!0&&(e[p].editRangeTo=!0)}n.value.year===B.value.year&&n.value.month===B.value.month&&(e[d+B.value.day-1].today=!0);const _=e.length%7;if(_>0){const c=7-_;for(let p=1;p<=c;p++)e.push({i:p,fill:!0})}return e.forEach(c=>{let p="q-date__calendar-item ";c.fill===!0?p+="q-date__calendar-item--fill":(p+=`q-date__calendar-item--${c.in===!0?"in":"out"}`,c.range!==void 0&&(p+=` q-date__range${c.rangeTo===!0?"-to":c.rangeFrom===!0?"-from":""}`),c.editRange===!0&&(p+=` q-date__edit-range${c.editRangeFrom===!0?"-from":""}${c.editRangeTo===!0?"-to":""}`),(c.range!==void 0||c.editRange===!0)&&(p+=` text-${c.color}`)),c.classes=p}),e}),Ut=f(()=>t.disable===!0?{"aria-disabled":"true"}:{});le(()=>t.modelValue,e=>{if(P===JSON.stringify(e))P=0;else{const a=dt(k.value,q.value);me(a.year,a.month,a)}}),le(V,()=>{L.value!==null&&w.$el.contains(document.activeElement)===!0&&L.value.focus()}),le(()=>n.value.year+"|"+n.value.month,()=>{g("navigation",{year:n.value.year,month:n.value.month})}),le(K,e=>{ht(e,q.value,"mask"),k.value=e}),le(X,e=>{ht(k.value,e,"locale"),q.value=e});function Te(e){P=JSON.stringify(e)}function it(){const{year:e,month:a,day:l}=B.value,o={...n.value,year:e,month:a,day:l},d=ke.value[ae(o)];(d===void 0||d.includes(o.day)===!1)&&Oe(o),Ie(o.year,o.month)}function Qt(e){Pt(e)===!0&&(V.value=e)}function Lt(e,a){["month","year"].includes(e)&&(e==="month"?ft:He)(a===!0?-1:1)}function Ie(e,a){V.value="Calendar",me(e,a)}function Nt(e,a){if(t.range===!1||!e){T.value=null;return}const l=Object.assign({...n.value},e),o=a!==void 0?Object.assign({...n.value},a):l;T.value={init:l,initHash:te(l),final:o,finalHash:te(o)},Ie(l.year,l.month)}function ut(){return t.calendar==="persian"?"YYYY/MM/DD":t.mask}function Be(e,a,l){return ba(e,a,l,t.calendar,{hour:0,minute:0,second:0,millisecond:0})}function dt(e,a){const l=Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue?[t.modelValue]:[];if(l.length===0)return ct();const o=l[l.length-1],d=Be(o.from!==void 0?o.from:o,e,a);return d.dateHash===null?ct():d}function ct(){let e,a;if(t.defaultYearMonth!==void 0){const l=t.defaultYearMonth.split("/");e=parseInt(l[0],10),a=parseInt(l[1],10)}else{const l=B.value!==void 0?B.value:s();e=l.year,a=l.month}return{year:e,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:e+"/"+ue(a)+"/01"}}function ft(e){let a=n.value.year,l=Number(n.value.month)+e;l===13?(l=1,a++):l===0&&(l=12,a--),me(a,l),we.value===!0&&qe("month")}function He(e){const a=Number(n.value.year)+e;me(a,n.value.month),we.value===!0&&qe("year")}function zt(e){me(e,n.value.month),V.value=t.defaultView==="Years"?"Months":"Calendar",we.value===!0&&qe("year")}function Wt(e){me(n.value.year,e),V.value="Calendar",we.value===!0&&qe("month")}function Jt(e,a){(ke.value[a]?.includes(e.day)===!0?$e:Oe)(e)}function re(e){return{year:e.year,month:e.month,day:e.day}}function me(e,a,l){if(Y.value!==null&&e<=Y.value.year&&((a<Y.value.month||e<Y.value.year)&&(a=Y.value.month),e=Y.value.year),U.value!==null&&e>=U.value.year&&((a>U.value.month||e>U.value.year)&&(a=U.value.month),e=U.value.year),l!==void 0){const{hour:d,minute:_,second:c,millisecond:p,timezoneOffset:M,timeHash:pe}=l;Object.assign(n.value,{hour:d,minute:_,second:c,millisecond:p,timezoneOffset:M,timeHash:pe})}const o=e+"/"+ue(a)+"/01";o!==n.value.dateHash&&(de.value=n.value.dateHash<o==(x.lang.rtl!==!0)?"left":"right",e!==n.value.year&&(S.value=de.value),Me(()=>{i.value=e-e%G-(e<0?G:0),Object.assign(n.value,{year:e,month:a,day:1,dateHash:o})}))}function mt(e,a,l){const o=e!==null&&e.length===1&&t.multiple===!1?e[0]:e,{reason:d,details:_}=vt(a,l);Te(o),g("update:modelValue",o,d,_)}function qe(e){const a=z.value[0]!==void 0&&z.value[0].dateHash!==null?{...z.value[0]}:{...n.value};Me(()=>{a.year=n.value.year,a.month=n.value.month;const l=t.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Ye(a.year,a.month);a.day=Math.min(Math.max(1,a.day),l);const o=ve(a),{details:d}=vt("",a);Te(o),g("update:modelValue",o,e,d)})}function vt(e,a){return a.from!==void 0?{reason:`${e}-range`,details:{...re(a.target),from:re(a.from),to:re(a.to)}}:{reason:`${e}-day`,details:re(a)}}function ve(e,a,l){return e.from!==void 0?{from:Fe.value(e.from,a,l),to:Fe.value(e.to,a,l)}:Fe.value(e,a,l)}function Oe(e){let a;if(t.multiple===!0)if(e.from!==void 0){const l=te(e.from),o=te(e.to),d=z.value.filter(c=>c.dateHash<l||c.dateHash>o),_=fe.value.filter(({from:c,to:p})=>p.dateHash<l||c.dateHash>o);a=d.concat(_).concat(e).map(c=>ve(c))}else{const l=Ae.value.slice();l.push(ve(e)),a=l}else a=ve(e);mt(a,"add",e)}function $e(e){if(t.noUnset===!0)return;let a=null;if(t.multiple===!0&&Array.isArray(t.modelValue)===!0){const l=ve(e);e.from!==void 0?a=t.modelValue.filter(o=>o.from!==void 0?o.from!==l.from&&o.to!==l.to:!0):a=t.modelValue.filter(o=>o!==l),a.length===0&&(a=null)}mt(a,"remove",e)}function ht(e,a,l){const o=z.value.concat(fe.value).map(_=>ve(_,e,a)).filter(_=>_.from!==void 0?_.from.dateHash!==null&&_.to.dateHash!==null:_.dateHash!==null),d=(t.multiple===!0?o:o[0])||null;Te(d),g("update:modelValue",d,l)}function Kt(){if(t.minimal!==!0)return h("div",{class:"q-date__header "+I.value},[h("div",{class:"relative-position"},[h(xe,{name:"q-transition--fade"},()=>h("div",{key:"h-yr-"+nt.value,class:"q-date__header-subtitle q-date__header-link "+(V.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:C.value,...r("vY",{onClick(){V.value="Years"},onKeyup(e){e.keyCode===13&&(V.value="Years")}})},[nt.value]))]),h("div",{class:"q-date__header-title relative-position flex no-wrap"},[h("div",{class:"relative-position col"},[h(xe,{name:"q-transition--fade"},()=>h("div",{key:"h-sub"+lt.value,class:"q-date__header-title-label q-date__header-link "+(V.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:C.value,...r("vC",{onClick(){V.value="Calendar"},onKeyup(e){e.keyCode===13&&(V.value="Calendar")}})},[lt.value]))]),t.todayBtn===!0?h(O,{class:"q-date__header-today self-start",icon:x.iconSet.datetime.today,"aria-label":x.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:C.value,onClick:it}):null])])}function Ee({label:e,type:a,key:l,dir:o,goTo:d,boundaries:_,cls:c}){return[h("div",{class:"row items-center q-date__arrow"},[h(O,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ce.value[0],"aria-label":a==="Years"?x.lang.date.prevYear:x.lang.date.prevMonth,tabindex:C.value,disable:_.prev===!1,...r("go-#"+a,{onClick(){d(-1)}})})]),h("div",{class:"relative-position overflow-hidden flex flex-center"+c},[h(xe,{name:"q-transition--jump-"+o},()=>h("div",{key:l},[h(O,{flat:!0,dense:!0,noCaps:!0,label:e,tabindex:C.value,...r("view#"+a,{onClick:()=>{V.value=a}})})]))]),h("div",{class:"row items-center q-date__arrow"},[h(O,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ce.value[1],"aria-label":a==="Years"?x.lang.date.nextYear:x.lang.date.nextMonth,tabindex:C.value,disable:_.next===!1,...r("go+#"+a,{onClick(){d(1)}})})])]}const Gt={Calendar:()=>[h("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[h("div",{class:"q-date__navigation row items-center no-wrap"},Ee({label:q.value.months[n.value.month-1],type:"Months",key:n.value.month,dir:de.value,goTo:ft,boundaries:Re.value.month,cls:" col"}).concat(Ee({label:n.value.year,type:"Years",key:n.value.year,dir:S.value,goTo:He,boundaries:Re.value.year,cls:""}))),h("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Ht.value.map(e=>h("div",{class:"q-date__calendar-item"},[h("div",e)]))),h("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[h(xe,{name:"q-transition--slide-"+de.value},()=>h("div",{key:N.value,class:"q-date__calendar-days fit"},st.value.map(e=>h("div",{class:e.classes},[e.in===!0?h(O,{class:e.today===!0?"q-date__today":"",dense:!0,flat:e.flat,unelevated:e.unelevated,color:e.color,textColor:e.textColor,label:e.i,tabindex:C.value,...r("day#"+e.i,{onClick:()=>{Zt(e.i)},onMouseover:()=>{Xt(e.i)}})},e.event!==!1?()=>h("div",{class:"q-date__event bg-"+e.event}):null):h("div",""+e.i)]))))])])],Months(){const e=n.value.year===B.value.year,a=o=>Y.value!==null&&n.value.year===Y.value.year&&Y.value.month>o||U.value!==null&&n.value.year===U.value.year&&U.value.month<o,l=q.value.monthsShort.map((o,d)=>{const _=n.value.month===d+1;return h("div",{class:"q-date__months-item flex flex-center"},[h(O,{class:e===!0&&B.value.month===d+1?"q-date__today":null,flat:_!==!0,label:o,unelevated:_,color:_===!0?oe.value:null,textColor:_===!0?ce.value:null,tabindex:C.value,disable:a(d+1),...r("month#"+d,{onClick:()=>{Wt(d+1)}})})])});return t.yearsInMonthView===!0&&l.unshift(h("div",{class:"row no-wrap full-width"},[Ee({label:n.value.year,type:"Years",key:n.value.year,dir:S.value,goTo:He,boundaries:Re.value.year,cls:" col"})])),h("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},l)},Years(){const e=i.value,a=e+G,l=[],o=d=>Y.value!==null&&Y.value.year>d||U.value!==null&&U.value.year<d;for(let d=e;d<=a;d++){const _=n.value.year===d;l.push(h("div",{class:"q-date__years-item flex flex-center"},[h(O,{key:"yr"+d,class:B.value.year===d?"q-date__today":null,flat:!_,label:d,dense:!0,unelevated:_,color:_===!0?oe.value:null,textColor:_===!0?ce.value:null,tabindex:C.value,disable:o(d),...r("yr#"+d,{onClick:()=>{zt(d)}})})]))}return h("div",{class:"q-date__view q-date__years flex flex-center"},[h("div",{class:"col-auto"},[h(O,{round:!0,dense:!0,flat:!0,icon:Ce.value[0],"aria-label":x.lang.date.prevRangeYears(G),tabindex:C.value,disable:o(e),...r("y-",{onClick:()=>{i.value-=G}})})]),h("div",{class:"q-date__years-content col self-stretch row items-center"},l),h("div",{class:"col-auto"},[h(O,{round:!0,dense:!0,flat:!0,icon:Ce.value[1],"aria-label":x.lang.date.nextRangeYears(G),tabindex:C.value,disable:o(a),...r("y+",{onClick:()=>{i.value+=G}})})])])}};function Zt(e){const a={...n.value,day:e};if(t.range===!1){Jt(a,N.value);return}if(T.value===null){const l=st.value.find(d=>d.fill!==!0&&d.i===e);if(t.noUnset!==!0&&l.range!==void 0){$e({target:a,from:l.range.from,to:l.range.to});return}if(l.selected===!0){$e(a);return}const o=te(a);T.value={init:a,initHash:o,final:a,finalHash:o},g("rangeStart",re(a))}else{const l=T.value.initHash,o=te(a),d=l<=o?{from:T.value.init,to:a}:{from:a,to:T.value.init};T.value=null,Oe(l===o?a:{target:a,...d}),g("rangeEnd",{from:re(d.from),to:re(d.to)})}}function Xt(e){if(T.value!==null){const a={...n.value,day:e};Object.assign(T.value,{final:a,finalHash:te(a)})}}return Object.assign(w,{setToday:it,setView:Qt,offsetCalendar:Lt,setCalendarTo:Ie,setEditingRange:Nt}),()=>{const e=[h("div",{class:"q-date__content col relative-position"},[h(xe,{name:"q-transition--fade"},Gt[V.value])])],a=Tt(v.default);return a!==void 0&&e.push(h("div",{class:"q-date__actions"},a)),t.name!==void 0&&t.disable!==!0&&Q(e,"push"),h("div",{class:at.value,...Ut.value},[Kt(),h("div",{ref:L,class:"q-date__main col column",tabindex:-1},e)])}}}),Ne=Ge({name:"QPopupProxy",props:{...aa,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(t,{slots:v,emit:g,attrs:w}){const{proxy:x}=Ze(),{$q:j}=x,r=A(!1),C=A(null),I=f(()=>parseInt(t.breakpoint,10)),{canShow:F}=la({showing:r});function s(){return j.screen.width<I.value||j.screen.height<I.value?"dialog":"menu"}const P=A(s()),D=f(()=>P.value==="menu"?{maxHeight:"99vh"}:{});le(()=>s(),k=>{r.value!==!0&&(P.value=k)});function Q(k){r.value=!0,g("show",k)}function L(k){r.value=!1,P.value=s(),g("hide",k)}return Object.assign(x,{show(k){F(k)===!0&&C.value.show(k)},hide(k){C.value.hide(k)},toggle(k){C.value.toggle(k)}}),qa(x,"currentComponent",()=>({type:P.value,ref:C.value})),()=>{const k={ref:C,...D.value,...w,onShow:Q,onHide:L};let q;return P.value==="dialog"?q=xa:(q=Ft,Object.assign(k,{target:t.target,contextMenu:t.contextMenu,noParentEvent:!0,separateClosePopup:!0})),h(q,k,v.default)}}}),Wa={class:"row q-col-gutter-xs"},Ja={class:"col"},Ka={key:0,class:"col"},Ga={class:"row items-center justify-end"},Za={key:1,class:"col"},Xa={class:"row items-center justify-end"},el={key:2,class:"col"},tl={class:"row items-center justify-end"},ze=Xe({__name:"DateFilterFieldCustomInputSelector",props:{modelValue:{},label:{default:""},dense:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},autoOpenPopUps:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(t,{expose:v,emit:g}){const{t:w}=tt(),x=g,j=t,r=A(null),C=A(null),I=A(null),F=A(null),s=A(null),P=A(null),D=f({get(){return j.modelValue},set(n){console.log("set",n),x("update:modelValue",n)}}),Q=f(()=>va.map(n=>({...n,label:w(n.labelKey)}))),L=f({get(){return j.modelValue.currentType===0?Q.value[0]:Q.value.find(n=>n.value===j.modelValue.currentType)},set(n){D.value.setType(n?.value||0),x("update:modelValue",D.value)}}),k=f(()=>j.disable||D.value.state.denyChanges),q=()=>{F.value?.hide()},K=()=>{s.value?.hide()},X=()=>{P.value?.hide()},B=()=>{D.value.state.denyChanges||Me().then(()=>{switch(D.value.currentType){case 7:I.value?.focus();break;case 8:r.value?.focus();break;case 9:C.value?.focus();break;case 10:r.value?.focus();break}}).catch(n=>{console.error(n)})};return v({focus:B}),et(()=>{j.autofocus&&B()}),(n,V)=>($(),J("div",Wa,[H("div",Ja,[m(_a,{class:"q-mb-md",dense:"","options-dense":"",outlined:"",clearable:D.value.currentType!==0,modelValue:L.value,"onUpdate:modelValue":V[0]||(V[0]=R=>L.value=R),options:Q.value,label:t.label,disable:t.disable},{prepend:y(()=>[Va(n.$slots,"prepend",{},()=>[m(W,{name:"calendar_month"})])]),_:3},8,["clearable","modelValue","options","label","disable"])]),D.value.hasFrom()?($(),J("div",Ka,[m(u(ie),{dense:"",outlined:"",mask:"date",modelValue:D.value.formattedDate.from,"onUpdate:modelValue":V[2]||(V[2]=R=>D.value.formattedDate.from=R),label:u(w)("From date"),disable:k.value,ref_key:"qInputFromDateRef",ref:r,error:!D.value.formattedDate.from,"error-message":u(w)("Field is required")},{append:y(()=>[m(W,{name:"event",class:"cursor-pointer"},{default:y(()=>[m(u(Ne),{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"qInputFromDatePopupProfyRef",ref:F},{default:y(()=>[m(Le,{modelValue:D.value.formattedDate.from,"onUpdate:modelValue":[V[1]||(V[1]=R=>D.value.formattedDate.from=R),q],minimal:""},{default:y(()=>[H("div",Ga,[_e(m(O,{label:"Close",color:"primary",flat:""},null,512),[[Se]])])]),_:1},8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message"])])):ne("",!0),D.value.hasTo()?($(),J("div",Za,[m(u(ie),{dense:"",outlined:"",mask:"date",modelValue:D.value.formattedDate.to,"onUpdate:modelValue":V[4]||(V[4]=R=>D.value.formattedDate.to=R),label:u(w)("To date"),disable:k.value,ref_key:"qInputToDateRef",ref:C,error:!D.value.formattedDate.to,"error-message":u(w)("Field is required")},{append:y(()=>[m(W,{name:"event",class:"cursor-pointer"},{default:y(()=>[m(u(Ne),{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"qInputToDatePopupProfyRef",ref:s},{default:y(()=>[m(Le,{modelValue:D.value.formattedDate.to,"onUpdate:modelValue":[V[3]||(V[3]=R=>D.value.formattedDate.to=R),K],minimal:""},{default:y(()=>[H("div",Xa,[_e(m(O,{label:"Close",color:"primary",flat:""},null,512),[[Se]])])]),_:1},8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message"])])):ne("",!0),D.value.hasFixed()?($(),J("div",el,[m(u(ie),{dense:"",outlined:"",mask:"date",modelValue:D.value.formattedDate.fixed,"onUpdate:modelValue":V[6]||(V[6]=R=>D.value.formattedDate.fixed=R),label:u(w)("Fixed date"),disable:k.value,ref_key:"qInputFixedDateRef",ref:I,error:!D.value.formattedDate.fixed,"error-message":u(w)("Field is required")},{append:y(()=>[m(W,{name:"event",class:"cursor-pointer"},{default:y(()=>[m(u(Ne),{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"qInputFixedDatePopupProfyRef",ref:P},{default:y(()=>[m(Le,{modelValue:D.value.formattedDate.fixed,"onUpdate:modelValue":[V[5]||(V[5]=R=>D.value.formattedDate.fixed=R),X],minimal:""},{default:y(()=>[H("div",tl,[_e(m(O,{label:"Close",color:"primary",flat:""},null,512),[[Se]])])]),_:1},8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message"])])):ne("",!0)]))}}),al=Object.keys(At);function ll(t){return al.reduce((v,g)=>{const w=t[g];return w!==void 0&&(v[g]=w),v},{})}const nl=Ge({name:"QBtnDropdown",props:{...At,...na,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(t,{slots:v,emit:g}){const{proxy:w}=Ze(),x=A(t.modelValue),j=A(null),r=Ba(),C=f(()=>{const n={"aria-expanded":x.value===!0?"true":"false","aria-haspopup":"true","aria-controls":r.value,"aria-label":t.toggleAriaLabel||w.$q.lang.label[x.value===!0?"collapse":"expand"](t.label)};return(t.disable===!0||t.split===!1&&t.disableMainBtn===!0||t.disableDropdown===!0)&&(n["aria-disabled"]="true"),n}),I=f(()=>"q-btn-dropdown__arrow"+(x.value===!0&&t.noIconAnimation===!1?" rotate-180":"")+(t.split===!1?" q-btn-dropdown__arrow-container":"")),F=f(()=>da(t)),s=f(()=>ll(t));le(()=>t.modelValue,n=>{j.value?.[n?"show":"hide"]()}),le(()=>t.split,B);function P(n){x.value=!0,g("beforeShow",n)}function D(n){g("show",n),g("update:modelValue",!0)}function Q(n){x.value=!1,g("beforeHide",n)}function L(n){g("hide",n),g("update:modelValue",!1)}function k(n){g("click",n)}function q(n){Sa(n),B(),g("click",n)}function K(n){j.value?.toggle(n)}function X(n){j.value?.show(n)}function B(n){j.value?.hide(n)}return Object.assign(w,{show:X,hide:B,toggle:K}),et(()=>{t.modelValue===!0&&X()}),()=>{const n=[h(W,{class:I.value,name:t.dropdownIcon||w.$q.iconSet.arrow.dropdown})];return t.disableDropdown!==!0&&n.push(h(Ft,{ref:j,id:r.value,class:t.contentClass,style:t.contentStyle,cover:t.cover,fit:!0,persistent:t.persistent,noEscDismiss:t.noEscDismiss,noRouteDismiss:t.noRouteDismiss,autoClose:t.autoClose,noFocus:t.noFocus,noRefocus:t.noRefocus,anchor:t.menuAnchor,self:t.menuSelf,offset:t.menuOffset,separateClosePopup:!0,transitionShow:t.transitionShow,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,onBeforeShow:P,onShow:D,onBeforeHide:Q,onHide:L},v.default)),t.split===!1?h(O,{class:"q-btn-dropdown q-btn-dropdown--simple",...s.value,...C.value,disable:t.disable===!0||t.disableMainBtn===!0,noWrap:!0,round:!1,onClick:k},{default:()=>Tt(v.label,[]).concat(n),loading:v.loading}):h(Rt,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:t.rounded,square:t.square,...F.value,glossy:t.glossy,stretch:t.stretch},()=>[h(O,{class:"q-btn-dropdown--current",...s.value,disable:t.disable===!0||t.disableMainBtn===!0,noWrap:!0,round:!1,onClick:q},{default:v.label,loading:v.loading}),h(O,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...C.value,...F.value,disable:t.disable===!0||t.disableDropdown===!0,rounded:t.rounded,color:t.color,textColor:t.textColor,dense:t.dense,size:t.size,padding:t.padding,ripple:t.ripple},()=>n)])}}}),ol=Xe({__name:"SortByFieldCustomButtonDropdown",props:{options:{},current:{},dense:{type:Boolean,default:!1}},emits:["change"],setup(t,{emit:v}){const g=Pa(),{t:w}=tt(),x=v,j=t,r=f({get(){return j.current},set(){}}),C=f(()=>w("Current sort by",{label:r.value.label?w(r.value.label):null,order:r.value.order?w(r.value.order=="DESC"?"descending":"ascending"):null})),I=F=>{x("change",F)};return(F,s)=>($(),se(nl,ja(u(g),{label:C.value,dense:t.dense}),{default:y(()=>[m(jt,null,{default:y(()=>[($(!0),J(Je,null,We(t.options,(P,D)=>_e(($(),se(Mt,{dense:t.dense,key:D,onClick:Q=>I(P),clickable:!(P.field==r.value.field&&P.order==r.value.order),disable:P.field==r.value.field&&P.order==r.value.order},{default:y(()=>[m(je,{avatar:""},{default:y(()=>[m(W,{name:P.order=="ASC"?"keyboard_double_arrow_up":"keyboard_double_arrow_down"},null,8,["name"])]),_:2},1024),m(je,null,{default:y(()=>[m(Pe,null,{default:y(()=>[Z(E(u(w)("Current sort by",{label:u(w)(P.label),order:P.order=="DESC"?u(w)("descending"):u(w)("ascending")})),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["dense","onClick","clickable","disable"])),[[Se]])),128))]),_:1})]),_:1},16,["label","dense"]))}}),rl={class:"row q-col-gutter-sm"},sl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6"},il={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6"},ul={key:0,class:"q-ma-md flex flex-center"},dl={class:"lt-xl"},cl=["onClick"],fl={class:"lt-xl"},ml={class:"td-document-link gt-lg"},vl={class:"gt-lg"},hl={class:"gt-lg"},gl={class:"gt-lg"},bl={class:"gt-lg"},yl={key:1,class:"q-ma-md flex flex-center"},pl=Xe({__name:"AdvancedSearchPage",setup(t){const{t:v}=tt(),g=Ma(),w=[{field:"title",title:"Title",defaultClass:"gt-lg"},{field:"createdOnTimestamp",title:"Creation date",defaultClass:"gt-lg"},{field:"lastUpdateTimestamp",title:"Last update",defaultClass:"gt-lg"},{field:"attachmentCount",title:"Attachments",defaultClass:"gt-lg"},{field:"noteCount",title:"Notes",defaultClass:"gt-lg"}],x=[];w.forEach(S=>{x.push(new Ke(S.field,S.title,"ASC")),x.push(new Ke(S.field,S.title,"DESC"))});const j=A(!1),r=wt({...Dt}),C=A(g.meta.conditionsFilterExpanded===!0),I=A(null),F=f(()=>g.name==="advancedSearch"),s=Ua();F.value||(s.reset(),g.params.tag!==void 0&&typeof g.params.tag=="string"&&(s.filter.tags=[g.params.tag]));const P=wt([]),D=f(()=>P.length>0),Q=f(()=>!r.ajaxRunning&&r.ajaxErrors),L=f(()=>!r.ajaxRunning&&j.value&&!D.value),k=f(()=>g.params.fixedCreationDate!==void 0),q=f(()=>g.params.fixedLastUpdate!==void 0),K=f(()=>g.params.fixedUpdatedOn!==void 0),X=f(()=>s.sort.order=="ASC"?"keyboard_double_arrow_up":"keyboard_double_arrow_down"),B=f(()=>{let S=0;return s.filter.text.title&&S++,s.filter.text.description&&S++,s.filter.text.notesBody&&S++,s.filter.text.attachmentsFilename&&S++,s.filter.tags.length>0&&(S+=s.filter.tags.length),s.filter.dates?.createdAt.state.hasValue&&S++,s.filter.dates?.lastUpdateAt.state.hasValue&&S++,s.filter.dates?.updatedAt.state.hasValue&&S++,S}),n=S=>{s.pager.currentPageIndex=S,R(!1)},V=(S,b)=>{r.ajaxRunning||(s.sort.toggle(S,b),s.sort.refreshLabel(x),R(!1))},R=S=>{S&&(s.pager.currentPageIndex=1),Object.assign(r,Dt),r.ajaxRunning=!0,Ta.document.search(s.pager,s.filter,s.sort,!1).then(b=>{b.data.results&&(P.length=0,s.pager.currentPageIndex=b.data.results.pagination.currentPage,s.pager.resultsPage=b.data.results.pagination.resultsPage,s.pager.totalResults=b.data.results.pagination.totalResults,s.pager.totalPages=b.data.results.pagination.totalPages,P.push(...b.data.results.documents.map(i=>new ha(v,i.id,new gt(v,i.createdAtTimestamp),new gt(v,i.updatedAtTimestamp),i.title,i.description,i.tags,i.attachmentCount,i.noteCount,i.matchedFragments,""))),j.value=!0,I.value?.expand())}).catch(b=>{if(r.ajaxErrors=!0,b.isAPIError)switch(r.ajaxAPIErrorDetails=b.customAPIErrorDetails,b.response.status){case 400:r.ajaxErrorMessage="API Error: invalid/missing param";break;case 401:r.ajaxErrorMessage="Auth session expired, requesting new...",Ue.emit("reAuthRequired",{emitter:"AdvancedSearchPage.onSubmitForm"});break;default:r.ajaxErrorMessage="API Error: fatal error";break}else r.ajaxErrorMessage=`Uncaught exception: ${b}`,console.error(b);j.value=!0}).finally(()=>{r.ajaxRunning=!1})},de=()=>{s.reset(),j.value=!1,P.length=0};return et(()=>{k.value||q.value||K.value||F.value,g.meta.autoLaunchSearch===!0&&Me().then(()=>{R(!0)}).catch(S=>{console.error(S)}),Ue.on("reAuthSucess",S=>{S.to?.includes("AdvancedSearchPage.onSubmitForm")&&R(!1)})}),Aa(()=>{Ue.off("reAuthSucess")}),(S,b)=>($(),se(Da,null,{default:y(()=>[m(Ct,{title:"Advanced search",icon:"filter_alt",loading:r.ajaxRunning,error:r.ajaxErrors,expanded:C.value},{"header-extra":y(()=>[m(bt,{square:"",size:"sm",color:"grey-7","text-color":"white"},{default:y(()=>[Z(E(u(v)("Total search conditions count",{count:B.value})),1)]),_:1})]),content:y(()=>[H("form",{onSubmit:b[8]||(b[8]=he(i=>R(!0),["prevent","stop"])),onReset:he(de,["prevent","stop"]),autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false",class:"q-pa-md"},[H("div",rl,[H("div",sl,[m(ie,{class:"q-mb-md",dense:"",outlined:"",modelValue:u(s).filter.text.title,"onUpdate:modelValue":b[0]||(b[0]=i=>u(s).filter.text.title=i),modelModifiers:{trim:!0},type:"text",name:"title",clearable:"",label:u(v)("Document title"),disable:r.ajaxRunning,autofocus:!0,placeholder:u(v)("Type text condition")},{prepend:y(()=>[m(W,{name:"article"})]),_:1},8,["modelValue","label","disable","placeholder"]),m(ie,{class:"q-mb-md",dense:"",outlined:"",modelValue:u(s).filter.text.description,"onUpdate:modelValue":b[1]||(b[1]=i=>u(s).filter.text.description=i),modelModifiers:{trim:!0},type:"text",name:"description",clearable:"",label:u(v)("Document description"),disable:r.ajaxRunning,placeholder:u(v)("Type text condition")},{prepend:y(()=>[m(W,{name:"article"})]),_:1},8,["modelValue","label","disable","placeholder"]),m(ie,{class:"q-mb-md",dense:"",outlined:"",modelValue:u(s).filter.text.notesBody,"onUpdate:modelValue":b[2]||(b[2]=i=>u(s).filter.text.notesBody=i),modelModifiers:{trim:!0},type:"text",name:"notesBody",clearable:"",label:u(v)("Document notes"),disable:r.ajaxRunning,placeholder:u(v)("Type text condition")},{prepend:y(()=>[m(W,{name:"speaker_notes"})]),_:1},8,["modelValue","label","disable","placeholder"]),m(ie,{class:"q-mb-md",dense:"",outlined:"",modelValue:u(s).filter.text.attachmentsFilename,"onUpdate:modelValue":b[3]||(b[3]=i=>u(s).filter.text.attachmentsFilename=i),modelModifiers:{trim:!0},type:"text",name:"notesBody",clearable:"",label:u(v)("Document attachment filenames"),disable:r.ajaxRunning,placeholder:u(v)("Type text condition")},{prepend:y(()=>[m(W,{name:"attach_file"})]),_:1},8,["modelValue","label","disable","placeholder"])]),H("div",il,[m($a,{modelValue:u(s).filter.tags,"onUpdate:modelValue":b[4]||(b[4]=i=>u(s).filter.tags=i),label:"Document tags",disabled:r.ajaxRunning,dense:"","start-mode-editable":!0,"deny-change-editable-mode":!0,clearable:"",placeholder:u(v)("Type text condition")},null,8,["modelValue","disabled","placeholder"]),m(ze,{label:u(v)("Document creation date"),disable:r.ajaxRunning||k.value,modelValue:u(s).filter.dates.createdAt,"onUpdate:modelValue":b[5]||(b[5]=i=>u(s).filter.dates.createdAt=i),"auto-open-pop-ups":!k.value},null,8,["label","disable","modelValue","auto-open-pop-ups"]),m(ze,{label:u(v)("Document last update"),disable:r.ajaxRunning||q.value,modelValue:u(s).filter.dates.lastUpdateAt,"onUpdate:modelValue":b[6]||(b[6]=i=>u(s).filter.dates.lastUpdateAt=i),"auto-open-pop-ups":!q.value},null,8,["label","disable","modelValue","auto-open-pop-ups"]),m(ze,{label:u(v)("Document updated on"),disable:r.ajaxRunning||K.value,modelValue:u(s).filter.dates.updatedAt,"onUpdate:modelValue":b[7]||(b[7]=i=>u(s).filter.dates.updatedAt=i),"auto-open-pop-ups":!K.value},null,8,["label","disable","modelValue","auto-open-pop-ups"])])]),m(Rt,{spread:""},{default:y(()=>[m(O,{color:"primary",size:"md",label:S.$t("Search"),"no-caps":"",icon:"search",disable:r.ajaxRunning,loading:r.ajaxRunning,type:"submit"},{loading:y(()=>[m(ua,{class:"on-left"}),Z(" "+E(u(v)("Searching...")),1)]),_:1},8,["label","disable","loading"]),F.value?($(),se(O,{key:0,class:"action-secondary",size:"md",label:S.$t("Reset filters"),"no-caps":"",icon:"undo",disable:r.ajaxRunning||B.value<1,type:"reset"},null,8,["label","disable"])):ne("",!0)]),_:1})],32),Q.value?($(),se(Ha,{key:0,text:r.ajaxErrorMessage||"Error loading data","api-error":r.ajaxAPIErrorDetails,class:"q-ma-md"},null,8,["text","api-error"])):L.value?($(),se(Oa,{key:1,warning:"",text:"No results found with current filter",class:"q-ma-md"})):ne("",!0)]),_:1},8,["loading","error","expanded"]),_e(m(Ct,{title:"Results",icon:"folder_open",staticIcon:!0,loading:r.ajaxRunning,error:r.ajaxErrors,expanded:"",class:"q-mt-sm",ref_key:"resultsWidgetRef",ref:I},{"header-extra":y(()=>[m(bt,{square:"",size:"sm",color:"grey-7","text-color":"white"},{default:y(()=>[Z(E(u(v)("Total search results count",{count:u(s).pager.totalResults})),1)]),_:1})]),content:y(()=>[u(s).pager.totalPages>1?($(),J("div",ul,[m(yt,{modelValue:u(s).pager.currentPageIndex,"onUpdate:modelValue":[b[9]||(b[9]=i=>u(s).pager.currentPageIndex=i),n],color:"dark",max:u(s).pager.totalPages,"max-pages":5,"boundary-numbers":"","direction-links":"","boundary-links":"",disable:r.ajaxRunning,class:"theme-default-q-pagination"},null,8,["modelValue","max","disable"])])):ne("",!0),m(wa,{class:"q-ma-md"},{default:y(()=>[H("thead",null,[H("tr",null,[H("th",dl,[m(ol,{square:"",dense:"","no-caps":"",options:x,current:u(s).sort,onChange:b[10]||(b[10]=i=>V(i.field,i.order)),flat:"",class:"action-primary fit full-height"},null,8,["current"])]),($(),J(Je,null,We(w,(i,T)=>H("th",{key:T,class:Ra(["text-left",i.defaultClass,{"cursor-not-allowed":r.ajaxRunning,"cursor-pointer":!r.ajaxRunning,"action-primary":u(s).sort.field===i.field}]),onClick:at=>V(i.field)},[m(W,{name:u(s).sort.field===i.field?X.value:"sort",size:"sm"},null,8,["name"]),Z(" "+E(u(v)(i.title))+" ",1),m(oa,null,{default:y(()=>[Z(E(u(v)("Toggle sort by this column",{field:u(v)(i.title)})),1)]),_:2},1024)],10,cl)),64))])]),H("tbody",null,[($(!0),J(Je,null,We(P,i=>($(),J("tr",{key:i.id},[H("td",fl,[m(jt,{dense:""},{default:y(()=>[m(Mt,{clickable:"",disable:r.ajaxRunning,to:{name:"document",params:{id:i.id}},class:"bg-transparent"},{default:y(()=>[m(je,null,{default:y(()=>[m(Pe,null,{default:y(()=>[Z(E(u(v)("Title"))+": "+E(i.title),1)]),_:2},1024),m(Pe,{caption:""},{default:y(()=>[Z(E(u(v)("Creation date"))+": "+E(i.createdAt.dateTime)+" ("+E(i.createdAt.timeAgo)+")",1)]),_:2},1024),i.updatedAt?.dateTime?($(),se(Pe,{key:0,caption:""},{default:y(()=>[Z(E(u(v)("Last update"))+": "+E(i.updatedAt.dateTime)+" ("+E(i.updatedAt.timeAgo)+")",1)]),_:2},1024)):ne("",!0)]),_:2},1024),m(je,{side:"",top:""},{default:y(()=>[m(Ve,{size:"md",square:"",class:"min-width-9em",count:i.attachmentCount,label:"Total attachments count","tool-tip":"View document attachments",disable:r.ajaxRunning,onClick:he(T=>u(xt)(i.id,i.title),["stop","prevent"])},null,8,["count","disable","onClick"]),m(Ve,{size:"md",square:"",class:"min-width-9em",count:i.noteCount,label:"Total notes","tool-tip":"View document notes",disable:r.ajaxRunning,onClick:he(T=>u(_t)(i.id,i.title),["stop","prevent"])},null,8,["count","disable","onClick"])]),_:2},1024)]),_:2},1032,["disable","to"])]),_:2},1024)]),H("td",ml,[m(O,{align:"left","no-caps":"",flat:"",to:{name:"document",params:{id:i.id}},class:"fit text-decoration-hover",label:i.title},null,8,["to","label"])]),H("td",vl,E(i.createdAt.dateTime),1),H("td",hl,E(i.updatedAt?.dateTime),1),H("td",gl,[m(Ve,{size:"md",square:"",class:"min-width-8em",count:i.attachmentCount,label:"Total attachments count","tool-tip":"View document attachments",disable:r.ajaxRunning,onClick:he(T=>u(xt)(i.id,i.title),["stop","prevent"]),"q-chip-class":"'q-chip-8em'"},null,8,["count","disable","onClick"])]),H("td",bl,[m(Ve,{size:"md",square:"",class:"min-width-8em",count:i.noteCount,label:"Total notes","tool-tip":"View document notes",disable:r.ajaxRunning,onClick:he(T=>u(_t)(i.id,i.title),["stop","prevent"]),"q-chip-class":"'q-chip-8em'"},null,8,["count","disable","onClick"])])]))),128))])]),_:1}),u(s).pager.totalPages>1?($(),J("div",yl,[m(yt,{modelValue:u(s).pager.currentPageIndex,"onUpdate:modelValue":[b[11]||(b[11]=i=>u(s).pager.currentPageIndex=i),n],color:"dark",max:u(s).pager.totalPages,"max-pages":5,"boundary-numbers":"","direction-links":"","boundary-links":"",disable:r.ajaxRunning,class:"theme-default-q-pagination"},null,8,["modelValue","max","disable"])])):ne("",!0)]),_:1},8,["loading","error"]),[[Fa,D.value]])]),_:1}))}}),El=Ea(pl,[["__scopeId","data-v-9e669962"]]);export{El as default};
