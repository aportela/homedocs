import{Q as jt,D as gt,a as yt}from"./dateTime-BFTmAOKA.js";import{u as ta,b as aa,Q as J}from"./use-timeout-Dk6CO65c.js";import{u as la,b as na,a as oa,Q as de}from"./QInput-CjvEs_If.js";import{Q as ra}from"./QSpinnerHourglass-BJSb96dH.js";import{Q as H,n as Mt,g as sa}from"./QBtn-C-aNyInZ.js";import{a as Tt,C as Ae,Q as Rt}from"./ClosePopup-DMTUaPG6.js";import{Q as bt}from"./QPagination-Blwttbop.js";import{Q as Pe}from"./QItemLabel-CGAxV7IM.js";import{e as ia,f as ua,g as da,Q as Ft,c as Te,d as ca,_ as fa}from"./QItem-BX9y_1c8.js";import{Q as pt}from"./QMarkupTable-DelunEBn.js";import{Q as ma}from"./QPage-DqAH0F3p.js";import{a8 as va,j as c,x as Xe,z as Ze,l as M,B as oe,y as h,a5 as De,v as Re,al as ha,ai as ga,a as et,b as tt,R as at,n as z,f as j,p as re,h as v,w as b,ac as ya,g as s,S as ye,o as R,O as ba,af as pa,e as te,ag as xa,T as je,U as Me,q as ee,t as $,k as _a,V as Da,_ as wa,D as Ca,s as he,a3 as xt,a2 as ka}from"./index-B4QQtCX7.js";import{c as qa,S as Va,a as Sa,s as Aa,b as Pa}from"./searchFilter-DdlLKf-2.js";import{S as Ge,P as ja}from"./pager-B5QX6AQA.js";import{t as Ma,p as ce,_ as Ta,j as Le,e as Ra,g as _t,i as Fa,a as Ne,o as Dt,c as wt}from"./bus-CVwhliaE.js";import{a as Ia}from"./api-CoAF7EnE.js";import{f as Ba,h as Oa,d as Ct,a as Ha,_ as $a}from"./CustomErrorBanner.vue_vue_type_script_setup_true_lang-DBTLD8xq.js";import{I as Ea}from"./InteractiveTagsFieldCustomSelect-owqF6o8u.js";import{_ as kt}from"./CustomExpansionWidget.vue_vue_type_script_setup_true_lang-DowvR3NI.js";import{d as Ua,Q as Ya}from"./QSelect-Dvj2_7Nw.js";import{h as It,_ as Qa}from"./_plugin-vue_export-helper-BlOQ7VLK.js";import{_ as Se}from"./ViewDocumentDetailsButton.vue_vue_type_script_setup_true_lang-X8tzi3Zg.js";import"./dateUtils-tkffsgZl.js";import"./session-BvJG7K2f.js";import"./scroll-CCWCkPPq.js";import"./index-CG2WSiiR.js";import"./serverEnvironment-AswETgyQ.js";import"./BrowseByTagButton.vue_vue_type_script_setup_true_lang-BqhrY0lq.js";import"./QCardSection-7odpSX0S.js";const qt=()=>new ja(1,32,0,0),Vt=()=>{const t=new Va(null,null,null,null),y=new Sa(null,null,null);return new qa(t,[],y)},St=()=>new Ge("lastUpdateTimestamp","Last update","DESC"),La=va("advancedSearchData",{state:()=>({pager:qt(),filter:Vt(),sort:St()}),getters:{currentPager:t=>t.pager,currentFilter:t=>t.filter,currentSort:t=>t.sort},actions:{reset(){this.pager=qt(),this.filter=Vt(),this.sort=St()},setPager(t){this.pager=t},setFilter(t){this.filter=t},setSort(t){this.sort=t}}}),Na=["gregorian","persian"],At={mask:{type:String},locale:Object,calendar:{type:String,validator:t=>Na.includes(t),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},za=["update:modelValue"];function le(t){return t.year+"/"+ce(t.month)+"/"+ce(t.day)}function Wa(t,y){const g=c(()=>t.disable!==!0&&t.readonly!==!0),w=c(()=>g.value===!0?0:-1),C=c(()=>{const i=[];return t.color!==void 0&&i.push(`bg-${t.color}`),t.textColor!==void 0&&i.push(`text-${t.textColor}`),i.join(" ")});function A(){return t.locale!==void 0?{...y.lang.date,...t.locale}:y.lang.date}function x(i){const B=new Date,T=i===!0?null:0;if(t.calendar==="persian"){const F=Ma(B);return{year:F.jy,month:F.jm,day:F.jd}}return{year:B.getFullYear(),month:B.getMonth()+1,day:B.getDate(),hour:T,minute:T,second:T,millisecond:T}}return{editable:g,tabindex:w,headerClass:C,getLocale:A,getCurrentDate:x}}const Z=20,Ja=["Calendar","Years","Months"],Pt=t=>Ja.includes(t),ze=t=>/^-?[\d]+\/[0-1]\d$/.test(t),ge=" â€” ";function ne(t){return t.year+"/"+ce(t.month)}const We=Xe({name:"QDate",props:{...At,...la,...ta,modelValue:{required:!0,validator:t=>typeof t=="string"||Array.isArray(t)===!0||Object(t)===t||t===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...At.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:ze},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:ze},navigationMaxYearMonth:{type:String,validator:ze},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Pt}},emits:[...za,"rangeStart","rangeEnd","navigation"],setup(t,{slots:y,emit:g}){const{proxy:w}=Ze(),{$q:C}=w,A=aa(t,C),{getCache:x}=Ba(),{tabindex:i,headerClass:B,getLocale:T,getCurrentDate:F}=Wa(t,C);let S;const D=na(t),Y=oa(D),L=M(null),q=M(ut()),V=M(T()),G=c(()=>ut()),K=c(()=>T()),O=c(()=>F()),n=M(dt(q.value,V.value)),o=M(t.defaultView),I=c(()=>C.lang.rtl===!0?"right":"left"),se=M(I.value),X=M(I.value),be=n.value.year,k=M(be-be%Z-(be<0?Z:0)),m=M(null),u=c(()=>{const e=t.landscape===!0?"landscape":"portrait";return`q-date q-date--${e} q-date--${e}-${t.minimal===!0?"minimal":"standard"}`+(A.value===!0?" q-date--dark q-dark":"")+(t.bordered===!0?" q-date--bordered":"")+(t.square===!0?" q-date--square no-border-radius":"")+(t.flat===!0?" q-date--flat no-shadow":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-date--readonly":"")}),Q=c(()=>t.color||"primary"),ie=c(()=>t.textColor||"white"),we=c(()=>t.emitImmediately===!0&&t.multiple!==!0&&t.range!==!0),Fe=c(()=>Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue!==null&&t.modelValue!==void 0?[t.modelValue]:[]),W=c(()=>Fe.value.filter(e=>typeof e=="string").map(e=>$e(e,q.value,V.value)).filter(e=>e.dateHash!==null&&e.day!==null&&e.month!==null&&e.year!==null)),fe=c(()=>{const e=a=>$e(a,q.value,V.value);return Fe.value.filter(a=>ha(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:e(a.from),to:e(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),Ce=c(()=>t.calendar!=="persian"?e=>new Date(e.year,e.month-1,e.day):e=>{const a=_t(e.year,e.month,e.day);return new Date(a.gy,a.gm-1,a.gd)}),Ie=c(()=>t.calendar==="persian"?le:(e,a,l)=>Ra(new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),a===void 0?q.value:a,l===void 0?V.value:l,e.year,e.timezoneOffset)),pe=c(()=>W.value.length+fe.value.reduce((e,a)=>e+1+Fa(Ce.value(a.to),Ce.value(a.from)),0)),lt=c(()=>{if(t.title!==void 0&&t.title!==null&&t.title.length!==0)return t.title;if(m.value!==null){const l=m.value.init,r=Ce.value(l);return V.value.daysShort[r.getDay()]+", "+V.value.monthsShort[l.month-1]+" "+l.day+ge+"?"}if(pe.value===0)return ge;if(pe.value>1)return`${pe.value} ${V.value.pluralDay}`;const e=W.value[0],a=Ce.value(e);return isNaN(a.valueOf())===!0?ge:V.value.headerTitle!==void 0?V.value.headerTitle(a,e):V.value.daysShort[a.getDay()]+", "+V.value.monthsShort[e.month-1]+" "+e.day}),Bt=c(()=>W.value.concat(fe.value.map(a=>a.from)).sort((a,l)=>a.year-l.year||a.month-l.month)[0]),Ot=c(()=>W.value.concat(fe.value.map(a=>a.to)).sort((a,l)=>l.year-a.year||l.month-a.month)[0]),nt=c(()=>{if(t.subtitle!==void 0&&t.subtitle!==null&&t.subtitle.length!==0)return t.subtitle;if(pe.value===0)return ge;if(pe.value>1){const e=Bt.value,a=Ot.value,l=V.value.monthsShort;return l[e.month-1]+(e.year!==a.year?" "+e.year+ge+l[a.month-1]+" ":e.month!==a.month?ge+l[a.month-1]:"")+" "+a.year}return W.value[0].year}),ke=c(()=>{const e=[C.iconSet.datetime.arrowLeft,C.iconSet.datetime.arrowRight];return C.lang.rtl===!0?e.reverse():e}),ot=c(()=>t.firstDayOfWeek!==void 0?Number(t.firstDayOfWeek):V.value.firstDayOfWeek),Ht=c(()=>{const e=V.value.daysShort,a=ot.value;return a>0?e.slice(a,7).concat(e.slice(0,a)):e}),ae=c(()=>{const e=n.value;return t.calendar!=="persian"?new Date(e.year,e.month,0).getDate():Le(e.year,e.month)}),$t=c(()=>typeof t.eventColor=="function"?t.eventColor:()=>t.eventColor),E=c(()=>{if(t.navigationMinYearMonth===void 0)return null;const e=t.navigationMinYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),U=c(()=>{if(t.navigationMaxYearMonth===void 0)return null;const e=t.navigationMaxYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),Be=c(()=>{const e={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return E.value!==null&&E.value.year>=n.value.year&&(e.year.prev=!1,E.value.year===n.value.year&&E.value.month>=n.value.month&&(e.month.prev=!1)),U.value!==null&&U.value.year<=n.value.year&&(e.year.next=!1,U.value.year===n.value.year&&U.value.month<=n.value.month&&(e.month.next=!1)),e}),qe=c(()=>{const e={};return W.value.forEach(a=>{const l=ne(a);e[l]===void 0&&(e[l]=[]),e[l].push(a.day)}),e}),rt=c(()=>{const e={};return fe.value.forEach(a=>{const l=ne(a.from),r=ne(a.to);if(e[l]===void 0&&(e[l]=[]),e[l].push({from:a.from.day,to:l===r?a.to.day:void 0,range:a}),l<r){let d;const{year:_,month:f}=a.from,p=f<12?{year:_,month:f+1}:{year:_+1,month:1};for(;(d=ne(p))<=r;)e[d]===void 0&&(e[d]=[]),e[d].push({from:void 0,to:d===r?a.to.day:void 0,range:a}),p.month++,p.month>12&&(p.year++,p.month=1)}}),e}),xe=c(()=>{if(m.value===null)return;const{init:e,initHash:a,final:l,finalHash:r}=m.value,[d,_]=a<=r?[e,l]:[l,e],f=ne(d),p=ne(_);if(f!==N.value&&p!==N.value)return;const P={};return f===N.value?(P.from=d.day,P.includeFrom=!0):P.from=1,p===N.value?(P.to=_.day,P.includeTo=!0):P.to=ae.value,P}),N=c(()=>ne(n.value)),Et=c(()=>{const e={};if(t.options===void 0){for(let l=1;l<=ae.value;l++)e[l]=!0;return e}const a=typeof t.options=="function"?t.options:l=>t.options.includes(l);for(let l=1;l<=ae.value;l++){const r=N.value+"/"+ce(l);e[l]=a(r)}return e}),Ut=c(()=>{const e={};if(t.events===void 0)for(let a=1;a<=ae.value;a++)e[a]=!1;else{const a=typeof t.events=="function"?t.events:l=>t.events.includes(l);for(let l=1;l<=ae.value;l++){const r=N.value+"/"+ce(l);e[l]=a(r)===!0&&$t.value(r)}}return e}),Yt=c(()=>{let e,a;const{year:l,month:r}=n.value;if(t.calendar!=="persian")e=new Date(l,r-1,1),a=new Date(l,r-1,0).getDate();else{const d=_t(l,r,1);e=new Date(d.gy,d.gm-1,d.gd);let _=r-1,f=l;_===0&&(_=12,f--),a=Le(f,_)}return{days:e.getDay()-ot.value-1,endDay:a}}),st=c(()=>{const e=[],{days:a,endDay:l}=Yt.value,r=a<0?a+7:a;if(r<6)for(let f=l-r;f<=l;f++)e.push({i:f,fill:!0});const d=e.length;for(let f=1;f<=ae.value;f++){const p={i:f,event:Ut.value[f],classes:[]};Et.value[f]===!0&&(p.in=!0,p.flat=!0),e.push(p)}if(qe.value[N.value]!==void 0&&qe.value[N.value].forEach(f=>{const p=d+f-1;Object.assign(e[p],{selected:!0,unelevated:!0,flat:!1,color:Q.value,textColor:ie.value})}),rt.value[N.value]!==void 0&&rt.value[N.value].forEach(f=>{if(f.from!==void 0){const p=d+f.from-1,P=d+(f.to||ae.value)-1;for(let _e=p;_e<=P;_e++)Object.assign(e[_e],{range:f.range,unelevated:!0,color:Q.value,textColor:ie.value});Object.assign(e[p],{rangeFrom:!0,flat:!1}),f.to!==void 0&&Object.assign(e[P],{rangeTo:!0,flat:!1})}else if(f.to!==void 0){const p=d+f.to-1;for(let P=d;P<=p;P++)Object.assign(e[P],{range:f.range,unelevated:!0,color:Q.value,textColor:ie.value});Object.assign(e[p],{flat:!1,rangeTo:!0})}else{const p=d+ae.value-1;for(let P=d;P<=p;P++)Object.assign(e[P],{range:f.range,unelevated:!0,color:Q.value,textColor:ie.value})}}),xe.value!==void 0){const f=d+xe.value.from-1,p=d+xe.value.to-1;for(let P=f;P<=p;P++)e[P].color=Q.value,e[P].editRange=!0;xe.value.includeFrom===!0&&(e[f].editRangeFrom=!0),xe.value.includeTo===!0&&(e[p].editRangeTo=!0)}n.value.year===O.value.year&&n.value.month===O.value.month&&(e[d+O.value.day-1].today=!0);const _=e.length%7;if(_>0){const f=7-_;for(let p=1;p<=f;p++)e.push({i:p,fill:!0})}return e.forEach(f=>{let p="q-date__calendar-item ";f.fill===!0?p+="q-date__calendar-item--fill":(p+=`q-date__calendar-item--${f.in===!0?"in":"out"}`,f.range!==void 0&&(p+=` q-date__range${f.rangeTo===!0?"-to":f.rangeFrom===!0?"-from":""}`),f.editRange===!0&&(p+=` q-date__edit-range${f.editRangeFrom===!0?"-from":""}${f.editRangeTo===!0?"-to":""}`),(f.range!==void 0||f.editRange===!0)&&(p+=` text-${f.color}`)),f.classes=p}),e}),Qt=c(()=>t.disable===!0?{"aria-disabled":"true"}:{});oe(()=>t.modelValue,e=>{if(S===JSON.stringify(e))S=0;else{const a=dt(q.value,V.value);me(a.year,a.month,a)}}),oe(o,()=>{L.value!==null&&w.$el.contains(document.activeElement)===!0&&L.value.focus()}),oe(()=>n.value.year+"|"+n.value.month,()=>{g("navigation",{year:n.value.year,month:n.value.month})}),oe(G,e=>{ht(e,V.value,"mask"),q.value=e}),oe(K,e=>{ht(q.value,e,"locale"),V.value=e});function Oe(e){S=JSON.stringify(e)}function it(){const{year:e,month:a,day:l}=O.value,r={...n.value,year:e,month:a,day:l},d=qe.value[ne(r)];(d===void 0||d.includes(r.day)===!1)&&Ue(r),He(r.year,r.month)}function Lt(e){Pt(e)===!0&&(o.value=e)}function Nt(e,a){["month","year"].includes(e)&&(e==="month"?ft:Ee)(a===!0?-1:1)}function He(e,a){o.value="Calendar",me(e,a)}function zt(e,a){if(t.range===!1||!e){m.value=null;return}const l=Object.assign({...n.value},e),r=a!==void 0?Object.assign({...n.value},a):l;m.value={init:l,initHash:le(l),final:r,finalHash:le(r)},He(l.year,l.month)}function ut(){return t.calendar==="persian"?"YYYY/MM/DD":t.mask}function $e(e,a,l){return Ta(e,a,l,t.calendar,{hour:0,minute:0,second:0,millisecond:0})}function dt(e,a){const l=Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue?[t.modelValue]:[];if(l.length===0)return ct();const r=l[l.length-1],d=$e(r.from!==void 0?r.from:r,e,a);return d.dateHash===null?ct():d}function ct(){let e,a;if(t.defaultYearMonth!==void 0){const l=t.defaultYearMonth.split("/");e=parseInt(l[0],10),a=parseInt(l[1],10)}else{const l=O.value!==void 0?O.value:F();e=l.year,a=l.month}return{year:e,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:e+"/"+ce(a)+"/01"}}function ft(e){let a=n.value.year,l=Number(n.value.month)+e;l===13?(l=1,a++):l===0&&(l=12,a--),me(a,l),we.value===!0&&Ve("month")}function Ee(e){const a=Number(n.value.year)+e;me(a,n.value.month),we.value===!0&&Ve("year")}function Wt(e){me(e,n.value.month),o.value=t.defaultView==="Years"?"Months":"Calendar",we.value===!0&&Ve("year")}function Jt(e){me(n.value.year,e),o.value="Calendar",we.value===!0&&Ve("month")}function Kt(e,a){(qe.value[a]?.includes(e.day)===!0?Ye:Ue)(e)}function ue(e){return{year:e.year,month:e.month,day:e.day}}function me(e,a,l){if(E.value!==null&&e<=E.value.year&&((a<E.value.month||e<E.value.year)&&(a=E.value.month),e=E.value.year),U.value!==null&&e>=U.value.year&&((a>U.value.month||e>U.value.year)&&(a=U.value.month),e=U.value.year),l!==void 0){const{hour:d,minute:_,second:f,millisecond:p,timezoneOffset:P,timeHash:_e}=l;Object.assign(n.value,{hour:d,minute:_,second:f,millisecond:p,timezoneOffset:P,timeHash:_e})}const r=e+"/"+ce(a)+"/01";r!==n.value.dateHash&&(se.value=n.value.dateHash<r==(C.lang.rtl!==!0)?"left":"right",e!==n.value.year&&(X.value=se.value),Re(()=>{k.value=e-e%Z-(e<0?Z:0),Object.assign(n.value,{year:e,month:a,day:1,dateHash:r})}))}function mt(e,a,l){const r=e!==null&&e.length===1&&t.multiple===!1?e[0]:e,{reason:d,details:_}=vt(a,l);Oe(r),g("update:modelValue",r,d,_)}function Ve(e){const a=W.value[0]!==void 0&&W.value[0].dateHash!==null?{...W.value[0]}:{...n.value};Re(()=>{a.year=n.value.year,a.month=n.value.month;const l=t.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Le(a.year,a.month);a.day=Math.min(Math.max(1,a.day),l);const r=ve(a),{details:d}=vt("",a);Oe(r),g("update:modelValue",r,e,d)})}function vt(e,a){return a.from!==void 0?{reason:`${e}-range`,details:{...ue(a.target),from:ue(a.from),to:ue(a.to)}}:{reason:`${e}-day`,details:ue(a)}}function ve(e,a,l){return e.from!==void 0?{from:Ie.value(e.from,a,l),to:Ie.value(e.to,a,l)}:Ie.value(e,a,l)}function Ue(e){let a;if(t.multiple===!0)if(e.from!==void 0){const l=le(e.from),r=le(e.to),d=W.value.filter(f=>f.dateHash<l||f.dateHash>r),_=fe.value.filter(({from:f,to:p})=>p.dateHash<l||f.dateHash>r);a=d.concat(_).concat(e).map(f=>ve(f))}else{const l=Fe.value.slice();l.push(ve(e)),a=l}else a=ve(e);mt(a,"add",e)}function Ye(e){if(t.noUnset===!0)return;let a=null;if(t.multiple===!0&&Array.isArray(t.modelValue)===!0){const l=ve(e);e.from!==void 0?a=t.modelValue.filter(r=>r.from!==void 0?r.from!==l.from&&r.to!==l.to:!0):a=t.modelValue.filter(r=>r!==l),a.length===0&&(a=null)}mt(a,"remove",e)}function ht(e,a,l){const r=W.value.concat(fe.value).map(_=>ve(_,e,a)).filter(_=>_.from!==void 0?_.from.dateHash!==null&&_.to.dateHash!==null:_.dateHash!==null),d=(t.multiple===!0?r:r[0])||null;Oe(d),g("update:modelValue",d,l)}function Gt(){if(t.minimal!==!0)return h("div",{class:"q-date__header "+B.value},[h("div",{class:"relative-position"},[h(De,{name:"q-transition--fade"},()=>h("div",{key:"h-yr-"+nt.value,class:"q-date__header-subtitle q-date__header-link "+(o.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...x("vY",{onClick(){o.value="Years"},onKeyup(e){e.keyCode===13&&(o.value="Years")}})},[nt.value]))]),h("div",{class:"q-date__header-title relative-position flex no-wrap"},[h("div",{class:"relative-position col"},[h(De,{name:"q-transition--fade"},()=>h("div",{key:"h-sub"+lt.value,class:"q-date__header-title-label q-date__header-link "+(o.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...x("vC",{onClick(){o.value="Calendar"},onKeyup(e){e.keyCode===13&&(o.value="Calendar")}})},[lt.value]))]),t.todayBtn===!0?h(H,{class:"q-date__header-today self-start",icon:C.iconSet.datetime.today,"aria-label":C.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:i.value,onClick:it}):null])])}function Qe({label:e,type:a,key:l,dir:r,goTo:d,boundaries:_,cls:f}){return[h("div",{class:"row items-center q-date__arrow"},[h(H,{round:!0,dense:!0,size:"sm",flat:!0,icon:ke.value[0],"aria-label":a==="Years"?C.lang.date.prevYear:C.lang.date.prevMonth,tabindex:i.value,disable:_.prev===!1,...x("go-#"+a,{onClick(){d(-1)}})})]),h("div",{class:"relative-position overflow-hidden flex flex-center"+f},[h(De,{name:"q-transition--jump-"+r},()=>h("div",{key:l},[h(H,{flat:!0,dense:!0,noCaps:!0,label:e,tabindex:i.value,...x("view#"+a,{onClick:()=>{o.value=a}})})]))]),h("div",{class:"row items-center q-date__arrow"},[h(H,{round:!0,dense:!0,size:"sm",flat:!0,icon:ke.value[1],"aria-label":a==="Years"?C.lang.date.nextYear:C.lang.date.nextMonth,tabindex:i.value,disable:_.next===!1,...x("go+#"+a,{onClick(){d(1)}})})])]}const Xt={Calendar:()=>[h("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[h("div",{class:"q-date__navigation row items-center no-wrap"},Qe({label:V.value.months[n.value.month-1],type:"Months",key:n.value.month,dir:se.value,goTo:ft,boundaries:Be.value.month,cls:" col"}).concat(Qe({label:n.value.year,type:"Years",key:n.value.year,dir:X.value,goTo:Ee,boundaries:Be.value.year,cls:""}))),h("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Ht.value.map(e=>h("div",{class:"q-date__calendar-item"},[h("div",e)]))),h("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[h(De,{name:"q-transition--slide-"+se.value},()=>h("div",{key:N.value,class:"q-date__calendar-days fit"},st.value.map(e=>h("div",{class:e.classes},[e.in===!0?h(H,{class:e.today===!0?"q-date__today":"",dense:!0,flat:e.flat,unelevated:e.unelevated,color:e.color,textColor:e.textColor,label:e.i,tabindex:i.value,...x("day#"+e.i,{onClick:()=>{Zt(e.i)},onMouseover:()=>{ea(e.i)}})},e.event!==!1?()=>h("div",{class:"q-date__event bg-"+e.event}):null):h("div",""+e.i)]))))])])],Months(){const e=n.value.year===O.value.year,a=r=>E.value!==null&&n.value.year===E.value.year&&E.value.month>r||U.value!==null&&n.value.year===U.value.year&&U.value.month<r,l=V.value.monthsShort.map((r,d)=>{const _=n.value.month===d+1;return h("div",{class:"q-date__months-item flex flex-center"},[h(H,{class:e===!0&&O.value.month===d+1?"q-date__today":null,flat:_!==!0,label:r,unelevated:_,color:_===!0?Q.value:null,textColor:_===!0?ie.value:null,tabindex:i.value,disable:a(d+1),...x("month#"+d,{onClick:()=>{Jt(d+1)}})})])});return t.yearsInMonthView===!0&&l.unshift(h("div",{class:"row no-wrap full-width"},[Qe({label:n.value.year,type:"Years",key:n.value.year,dir:X.value,goTo:Ee,boundaries:Be.value.year,cls:" col"})])),h("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},l)},Years(){const e=k.value,a=e+Z,l=[],r=d=>E.value!==null&&E.value.year>d||U.value!==null&&U.value.year<d;for(let d=e;d<=a;d++){const _=n.value.year===d;l.push(h("div",{class:"q-date__years-item flex flex-center"},[h(H,{key:"yr"+d,class:O.value.year===d?"q-date__today":null,flat:!_,label:d,dense:!0,unelevated:_,color:_===!0?Q.value:null,textColor:_===!0?ie.value:null,tabindex:i.value,disable:r(d),...x("yr#"+d,{onClick:()=>{Wt(d)}})})]))}return h("div",{class:"q-date__view q-date__years flex flex-center"},[h("div",{class:"col-auto"},[h(H,{round:!0,dense:!0,flat:!0,icon:ke.value[0],"aria-label":C.lang.date.prevRangeYears(Z),tabindex:i.value,disable:r(e),...x("y-",{onClick:()=>{k.value-=Z}})})]),h("div",{class:"q-date__years-content col self-stretch row items-center"},l),h("div",{class:"col-auto"},[h(H,{round:!0,dense:!0,flat:!0,icon:ke.value[1],"aria-label":C.lang.date.nextRangeYears(Z),tabindex:i.value,disable:r(a),...x("y+",{onClick:()=>{k.value+=Z}})})])])}};function Zt(e){const a={...n.value,day:e};if(t.range===!1){Kt(a,N.value);return}if(m.value===null){const l=st.value.find(d=>d.fill!==!0&&d.i===e);if(t.noUnset!==!0&&l.range!==void 0){Ye({target:a,from:l.range.from,to:l.range.to});return}if(l.selected===!0){Ye(a);return}const r=le(a);m.value={init:a,initHash:r,final:a,finalHash:r},g("rangeStart",ue(a))}else{const l=m.value.initHash,r=le(a),d=l<=r?{from:m.value.init,to:a}:{from:a,to:m.value.init};m.value=null,Ue(l===r?a:{target:a,...d}),g("rangeEnd",{from:ue(d.from),to:ue(d.to)})}}function ea(e){if(m.value!==null){const a={...n.value,day:e};Object.assign(m.value,{final:a,finalHash:le(a)})}}return Object.assign(w,{setToday:it,setView:Lt,offsetCalendar:Nt,setCalendarTo:He,setEditingRange:zt}),()=>{const e=[h("div",{class:"q-date__content col relative-position"},[h(De,{name:"q-transition--fade"},Xt[o.value])])],a=It(y.default);return a!==void 0&&e.push(h("div",{class:"q-date__actions"},a)),t.name!==void 0&&t.disable!==!0&&Y(e,"push"),h("div",{class:u.value,...Qt.value},[Gt(),h("div",{ref:L,class:"q-date__main col column",tabindex:-1},e)])}}}),Je=Xe({name:"QPopupProxy",props:{...ia,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(t,{slots:y,emit:g,attrs:w}){const{proxy:C}=Ze(),{$q:A}=C,x=M(!1),i=M(null),B=c(()=>parseInt(t.breakpoint,10)),{canShow:T}=ua({showing:x});function F(){return A.screen.width<B.value||A.screen.height<B.value?"dialog":"menu"}const S=M(F()),D=c(()=>S.value==="menu"?{maxHeight:"99vh"}:{});oe(()=>F(),q=>{x.value!==!0&&(S.value=q)});function Y(q){x.value=!0,g("show",q)}function L(q){x.value=!1,S.value=F(),g("hide",q)}return Object.assign(C,{show(q){T(q)===!0&&i.value.show(q)},hide(q){i.value.hide(q)},toggle(q){i.value.toggle(q)}}),ga(C,"currentComponent",()=>({type:S.value,ref:i.value})),()=>{const q={ref:i,...D.value,...w,onShow:Y,onHide:L};let V;return S.value==="dialog"?V=Ua:(V=Tt,Object.assign(q,{target:t.target,contextMenu:t.contextMenu,noParentEvent:!0,separateClosePopup:!0})),h(V,q,y.default)}}}),Ka={class:"row q-col-gutter-xs"},Ga={class:"col"},Xa={key:0,class:"col"},Za={class:"row items-center justify-end"},el={key:1,class:"col"},tl={class:"row items-center justify-end"},al={key:2,class:"col"},ll={class:"row items-center justify-end"},Ke=et({__name:"DateFilterFieldCustomInputSelector",props:{modelValue:{},label:{default:""},dense:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},autoOpenPopUps:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(t,{expose:y,emit:g}){const{t:w}=tt(),C=g,A=t,x=M(null),i=M(null),B=M(null),T=M(null),F=M(null),S=M(null),D=c({get(){return A.modelValue},set(n){C("update:modelValue",n)}}),Y=c(()=>Aa.map(n=>({...n,label:w(n.labelKey)}))),L=c({get(){return A.modelValue.currentType===0?Y.value[0]:Y.value.find(n=>n.value===A.modelValue.currentType)},set(n){D.value.setType(n?.value||0),C("update:modelValue",D.value)}}),q=c(()=>A.disable||D.value.state.denyChanges),V=()=>{D.value.recalcTimestamps(),T.value?.hide()},G=()=>{D.value.recalcTimestamps(),F.value?.hide()},K=()=>{D.value.recalcTimestamps(),S.value?.hide()},O=()=>{D.value.state.denyChanges||Re().then(()=>{switch(D.value.currentType){case 7:B.value?.focus();break;case 8:x.value?.focus();break;case 9:i.value?.focus();break;case 10:x.value?.focus();break}}).catch(n=>{console.error(n)})};return y({focus:O}),at(()=>{A.autofocus&&O()}),(n,o)=>(R(),z("div",Ka,[j("div",Ga,[v(Ya,{dense:"","options-dense":"",outlined:"",clearable:D.value.currentType!==0,modelValue:L.value,"onUpdate:modelValue":o[0]||(o[0]=I=>L.value=I),options:Y.value,label:t.label,disable:t.disable},{prepend:b(()=>[ya(n.$slots,"prepend",{},()=>[v(J,{name:"calendar_month"})])]),_:3},8,["clearable","modelValue","options","label","disable"])]),D.value.hasFrom()?(R(),z("div",Xa,[v(s(de),{dense:"",outlined:"",mask:"date",modelValue:D.value.formattedDate.from,"onUpdate:modelValue":o[2]||(o[2]=I=>D.value.formattedDate.from=I),label:s(w)("From date"),disable:q.value,ref_key:"qInputFromDateRef",ref:x,error:!D.value.formattedDate.from,"error-message":s(w)("Field is required")},{append:b(()=>[v(J,{name:"event",class:"cursor-pointer"},{default:b(()=>[v(s(Je),{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"qInputFromDatePopupProfyRef",ref:T},{default:b(()=>[v(We,{modelValue:D.value.formattedDate.from,"onUpdate:modelValue":[o[1]||(o[1]=I=>D.value.formattedDate.from=I),V],minimal:""},{default:b(()=>[j("div",Za,[ye(v(H,{label:s(w)("Close"),"no-caps":"",color:"primary",flat:""},null,8,["label"]),[[Ae]])])]),_:1},8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message"])])):re("",!0),D.value.hasTo()?(R(),z("div",el,[v(s(de),{dense:"",outlined:"",mask:"date",modelValue:D.value.formattedDate.to,"onUpdate:modelValue":o[4]||(o[4]=I=>D.value.formattedDate.to=I),label:s(w)("To date"),disable:q.value,ref_key:"qInputToDateRef",ref:i,error:!D.value.formattedDate.to,"error-message":s(w)("Field is required")},{append:b(()=>[v(J,{name:"event",class:"cursor-pointer"},{default:b(()=>[v(s(Je),{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"qInputToDatePopupProfyRef",ref:F},{default:b(()=>[v(We,{modelValue:D.value.formattedDate.to,"onUpdate:modelValue":[o[3]||(o[3]=I=>D.value.formattedDate.to=I),G],minimal:""},{default:b(()=>[j("div",tl,[ye(v(H,{label:s(w)("Close"),"no-caps":"",color:"primary",flat:""},null,8,["label"]),[[Ae]])])]),_:1},8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message"])])):re("",!0),D.value.hasFixed()?(R(),z("div",al,[v(s(de),{dense:"",outlined:"",mask:"date",modelValue:D.value.formattedDate.fixed,"onUpdate:modelValue":o[6]||(o[6]=I=>D.value.formattedDate.fixed=I),label:s(w)("Fixed date"),disable:q.value,ref_key:"qInputFixedDateRef",ref:B,error:!D.value.formattedDate.fixed,"error-message":s(w)("Field is required")},{append:b(()=>[v(J,{name:"event",class:"cursor-pointer"},{default:b(()=>[v(s(Je),{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"qInputFixedDatePopupProfyRef",ref:S},{default:b(()=>[v(We,{modelValue:D.value.formattedDate.fixed,"onUpdate:modelValue":[o[5]||(o[5]=I=>D.value.formattedDate.fixed=I),K],minimal:""},{default:b(()=>[j("div",ll,[ye(v(H,{label:s(w)("Close"),"no-caps":"",color:"primary",flat:""},null,8,["label"]),[[Ae]])])]),_:1},8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message"])])):re("",!0)]))}}),nl=Object.keys(Mt);function ol(t){return nl.reduce((y,g)=>{const w=t[g];return w!==void 0&&(y[g]=w),y},{})}const rl=Xe({name:"QBtnDropdown",props:{...Mt,...da,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(t,{slots:y,emit:g}){const{proxy:w}=Ze(),C=M(t.modelValue),A=M(null),x=Oa(),i=c(()=>{const n={"aria-expanded":C.value===!0?"true":"false","aria-haspopup":"true","aria-controls":x.value,"aria-label":t.toggleAriaLabel||w.$q.lang.label[C.value===!0?"collapse":"expand"](t.label)};return(t.disable===!0||t.split===!1&&t.disableMainBtn===!0||t.disableDropdown===!0)&&(n["aria-disabled"]="true"),n}),B=c(()=>"q-btn-dropdown__arrow"+(C.value===!0&&t.noIconAnimation===!1?" rotate-180":"")+(t.split===!1?" q-btn-dropdown__arrow-container":"")),T=c(()=>sa(t)),F=c(()=>ol(t));oe(()=>t.modelValue,n=>{A.value?.[n?"show":"hide"]()}),oe(()=>t.split,O);function S(n){C.value=!0,g("beforeShow",n)}function D(n){g("show",n),g("update:modelValue",!0)}function Y(n){C.value=!1,g("beforeHide",n)}function L(n){g("hide",n),g("update:modelValue",!1)}function q(n){g("click",n)}function V(n){ba(n),O(),g("click",n)}function G(n){A.value?.toggle(n)}function K(n){A.value?.show(n)}function O(n){A.value?.hide(n)}return Object.assign(w,{show:K,hide:O,toggle:G}),at(()=>{t.modelValue===!0&&K()}),()=>{const n=[h(J,{class:B.value,name:t.dropdownIcon||w.$q.iconSet.arrow.dropdown})];return t.disableDropdown!==!0&&n.push(h(Tt,{ref:A,id:x.value,class:t.contentClass,style:t.contentStyle,cover:t.cover,fit:!0,persistent:t.persistent,noEscDismiss:t.noEscDismiss,noRouteDismiss:t.noRouteDismiss,autoClose:t.autoClose,noFocus:t.noFocus,noRefocus:t.noRefocus,anchor:t.menuAnchor,self:t.menuSelf,offset:t.menuOffset,separateClosePopup:!0,transitionShow:t.transitionShow,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,onBeforeShow:S,onShow:D,onBeforeHide:Y,onHide:L},y.default)),t.split===!1?h(H,{class:"q-btn-dropdown q-btn-dropdown--simple",...F.value,...i.value,disable:t.disable===!0||t.disableMainBtn===!0,noWrap:!0,round:!1,onClick:q},{default:()=>It(y.label,[]).concat(n),loading:y.loading}):h(Rt,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:t.rounded,square:t.square,...T.value,glossy:t.glossy,stretch:t.stretch},()=>[h(H,{class:"q-btn-dropdown--current",...F.value,disable:t.disable===!0||t.disableMainBtn===!0,noWrap:!0,round:!1,onClick:V},{default:y.label,loading:y.loading}),h(H,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...i.value,...T.value,disable:t.disable===!0||t.disableDropdown===!0,rounded:t.rounded,color:t.color,textColor:t.textColor,dense:t.dense,size:t.size,padding:t.padding,ripple:t.ripple},()=>n)])}}}),sl=et({__name:"SortByFieldCustomButtonDropdown",props:{options:{},current:{},dense:{type:Boolean,default:!1}},emits:["change"],setup(t,{emit:y}){const g=pa(),{t:w}=tt(),C=y,A=t,x=c({get(){return A.current},set(){}}),i=c(()=>w("Current sort by",{label:x.value.label?w(x.value.label):null,order:x.value.order?w(x.value.order=="DESC"?"descending":"ascending"):null})),B=T=>{C("change",T)};return(T,F)=>(R(),te(rl,xa(s(g),{label:i.value,dense:t.dense}),{default:b(()=>[v(jt,null,{default:b(()=>[(R(!0),z(Me,null,je(t.options,(S,D)=>ye((R(),te(Ft,{dense:t.dense,key:D,onClick:Y=>B(S),clickable:!(S.field==x.value.field&&S.order==x.value.order),disable:S.field==x.value.field&&S.order==x.value.order},{default:b(()=>[v(Te,{avatar:""},{default:b(()=>[v(J,{name:S.order=="ASC"?"keyboard_double_arrow_up":"keyboard_double_arrow_down"},null,8,["name"])]),_:2},1024),v(Te,null,{default:b(()=>[v(Pe,null,{default:b(()=>[ee($(s(w)("Current sort by",{label:s(w)(S.label),order:S.order=="DESC"?s(w)("descending"):s(w)("ascending")})),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["dense","onClick","clickable","disable"])),[[Ae]])),128))]),_:1})]),_:1},16,["label","dense"]))}}),il={class:"row q-col-gutter-sm"},ul={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6"},dl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6"},cl={key:0,class:"q-ma-md flex flex-center"},fl={class:"lt-xl"},ml={class:"lt-xl"},vl=["onClick"],hl={class:"td-document-link gt-lg"},gl={class:"gt-lg"},yl={class:"gt-lg"},bl={class:"gt-lg"},pl={class:"gt-lg"},xl={key:3,class:"q-ma-md flex flex-center"},_l=et({__name:"AdvancedSearchPage",setup(t){const{t:y}=tt(),g=Da(),{screen:w}=ca(),C=[{field:"title",title:"Title",defaultClass:"gt-lg"},{field:"createdOnTimestamp",title:"Creation date",defaultClass:"gt-lg"},{field:"lastUpdateTimestamp",title:"Last update",defaultClass:"gt-lg"},{field:"attachmentCount",title:"Attachments",defaultClass:"gt-lg"},{field:"noteCount",title:"Notes",defaultClass:"gt-lg"}],A=[];C.forEach(k=>{A.push(new Ge(k.field,k.title,"ASC")),A.push(new Ge(k.field,k.title,"DESC"))});const x=M(!1),i=_a({...Ct}),B=M(g.meta.conditionsFilterExpanded===!0),T=M(null),F=c(()=>g.name==="advancedSearch"),S=wa([]),D=c(()=>w.lt.xl),Y=c(()=>S.value.length>0),L=c(()=>!i.ajaxRunning&&i.ajaxErrors),q=c(()=>!i.ajaxRunning&&x.value&&!Y.value),V=c(()=>g.params.fixedCreationDate!==void 0),G=c(()=>g.params.fixedLastUpdate!==void 0),K=c(()=>g.params.fixedUpdatedOn!==void 0),O=c(()=>o.sort.order==="ASC"?"keyboard_double_arrow_up":"keyboard_double_arrow_down"),n=c(()=>{let k=0;return o.filter.text.title&&k++,o.filter.text.description&&k++,o.filter.text.notesBody&&k++,o.filter.text.attachmentsFilename&&k++,o.filter.tags.length>0&&(k+=o.filter.tags.length),o.filter.dates?.createdAt.state.hasValue&&k++,o.filter.dates?.lastUpdateAt.state.hasValue&&k++,o.filter.dates?.updatedAt.state.hasValue&&k++,k}),o=La();F.value||(o.reset(),g.params.tag!==void 0&&typeof g.params.tag=="string"&&(o.filter.tags=[g.params.tag]),V.value&&typeof g.params.fixedCreationDate=="string"?(o.filter.dates.createdAt.skipClearOnRecalc.fixed=!0,o.filter.dates.createdAt.formattedDate.fixed=g.params.fixedCreationDate?g.params.fixedCreationDate.replaceAll("-","/"):null,o.filter.dates.createdAt.setType(7)):G.value&&typeof g.params.fixedLastUpdate=="string"?(o.filter.dates.lastUpdateAt.skipClearOnRecalc.fixed=!0,o.filter.dates.lastUpdateAt.formattedDate.fixed=g.params.fixedLastUpdate?g.params.fixedLastUpdate.replaceAll("-","/"):null,o.filter.dates.lastUpdateAt.setType(7)):K.value&&typeof g.params.fixedUpdatedOn=="string"&&(o.filter.dates.updatedAt.skipClearOnRecalc.fixed=!0,o.filter.dates.updatedAt.formattedDate.fixed=g.params.fixedUpdatedOn?g.params.fixedUpdatedOn.replaceAll("-","/"):null,o.filter.dates.updatedAt.setType(7)));const I=k=>{o.pager.currentPageIndex=k,X(!1)},se=(k,m)=>{i.ajaxRunning||(o.sort.toggle(k,m),o.sort.refreshLabel(A),X(!1))},X=k=>{k&&(o.pager.currentPageIndex=1),Object.assign(i,Ct),i.ajaxRunning=!0,Ia.document.search(o.pager,o.filter,o.sort,!1).then(m=>{m.data.results&&(S.value=[],o.pager.currentPageIndex=m.data.results.pagination.currentPage,o.pager.resultsPage=m.data.results.pagination.resultsPage,o.pager.totalResults=m.data.results.pagination.totalResults,o.pager.totalPages=m.data.results.pagination.totalPages,S.value=m.data.results.documents.map(u=>new Pa(y,u.id,new gt(y,u.createdAtTimestamp),new gt(y,u.updatedAtTimestamp),u.title,u.description,u.tags,u.attachmentCount,u.noteCount,u.matchedFragments,"")),x.value=!0,T.value?.expand())}).catch(m=>{if(i.ajaxErrors=!0,m.isAPIError)switch(i.ajaxAPIErrorDetails=m.customAPIErrorDetails,m.response.status){case 400:i.ajaxErrorMessage="API Error: invalid/missing param";break;case 401:i.ajaxErrors=!1,Ne.emit("reAuthRequired",{emitter:"AdvancedSearchPage.onSubmitForm"});break;default:i.ajaxErrorMessage="API Error: fatal error";break}else i.ajaxErrorMessage=`Uncaught exception: ${m}`,console.error(m);x.value=!0}).finally(()=>{i.ajaxRunning=!1})},be=()=>{o.reset(),x.value=!1,S.value=[]};return at(()=>{g.meta.autoLaunchSearch===!0&&Re().then(()=>{X(!0)}).catch(k=>{console.error(k)}),Ne.on("reAuthSucess",k=>{k.to?.includes("AdvancedSearchPage.onSubmitForm")&&X(!1)})}),Ca(()=>{Ne.off("reAuthSucess")}),(k,m)=>(R(),te(ma,null,{default:b(()=>[v(kt,{title:"Advanced search",icon:"filter_alt",loading:i.ajaxRunning,error:i.ajaxErrors,expanded:B.value},{"header-extra":b(()=>[ye(v(yt,{square:"",size:"sm",class:"theme-q-chip-highlight"},{default:b(()=>[ee($(s(y)("Total search conditions count",{count:n.value})),1)]),_:1},512),[[xt,n.value>0]])]),content:b(()=>[j("form",{onSubmit:m[8]||(m[8]=he(u=>X(!0),["prevent","stop"])),onReset:he(be,["prevent","stop"]),autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false",class:"q-pa-md"},[j("div",il,[j("div",ul,[v(de,{class:"q-mb-md",dense:"",outlined:"",modelValue:s(o).filter.text.title,"onUpdate:modelValue":m[0]||(m[0]=u=>s(o).filter.text.title=u),modelModifiers:{trim:!0},type:"text",name:"title",clearable:"",label:s(y)("Document title"),disable:i.ajaxRunning,autofocus:!0,placeholder:s(y)("Type text condition")},{prepend:b(()=>[v(J,{name:"article"})]),_:1},8,["modelValue","label","disable","placeholder"]),v(de,{class:"q-mb-md",dense:"",outlined:"",modelValue:s(o).filter.text.description,"onUpdate:modelValue":m[1]||(m[1]=u=>s(o).filter.text.description=u),modelModifiers:{trim:!0},type:"text",name:"description",clearable:"",label:s(y)("Document description"),disable:i.ajaxRunning,placeholder:s(y)("Type text condition")},{prepend:b(()=>[v(J,{name:"article"})]),_:1},8,["modelValue","label","disable","placeholder"]),v(de,{class:"q-mb-md",dense:"",outlined:"",modelValue:s(o).filter.text.notesBody,"onUpdate:modelValue":m[2]||(m[2]=u=>s(o).filter.text.notesBody=u),modelModifiers:{trim:!0},type:"text",name:"notesBody",clearable:"",label:s(y)("Document notes"),disable:i.ajaxRunning,placeholder:s(y)("Type text condition")},{prepend:b(()=>[v(J,{name:"speaker_notes"})]),_:1},8,["modelValue","label","disable","placeholder"]),v(de,{class:"q-mb-md",dense:"",outlined:"",modelValue:s(o).filter.text.attachmentsFilename,"onUpdate:modelValue":m[3]||(m[3]=u=>s(o).filter.text.attachmentsFilename=u),modelModifiers:{trim:!0},type:"text",name:"notesBody",clearable:"",label:s(y)("Document attachment filenames"),disable:i.ajaxRunning,placeholder:s(y)("Type text condition")},{prepend:b(()=>[v(J,{name:"attach_file"})]),_:1},8,["modelValue","label","disable","placeholder"])]),j("div",dl,[v(Ke,{label:s(y)("Document creation date"),disable:i.ajaxRunning||V.value,modelValue:s(o).filter.dates.createdAt,"onUpdate:modelValue":m[4]||(m[4]=u=>s(o).filter.dates.createdAt=u),"auto-open-pop-ups":!V.value,class:"q-mb-md"},null,8,["label","disable","modelValue","auto-open-pop-ups"]),v(Ke,{label:s(y)("Document last update"),disable:i.ajaxRunning||G.value,modelValue:s(o).filter.dates.lastUpdateAt,"onUpdate:modelValue":m[5]||(m[5]=u=>s(o).filter.dates.lastUpdateAt=u),"auto-open-pop-ups":!G.value,class:"q-mb-md"},null,8,["label","disable","modelValue","auto-open-pop-ups"]),v(Ke,{label:s(y)("Document updated on"),disable:i.ajaxRunning||K.value,modelValue:s(o).filter.dates.updatedAt,"onUpdate:modelValue":m[6]||(m[6]=u=>s(o).filter.dates.updatedAt=u),"auto-open-pop-ups":!K.value,class:"q-mb-md"},null,8,["label","disable","modelValue","auto-open-pop-ups"]),v(Ea,{modelValue:s(o).filter.tags,"onUpdate:modelValue":m[7]||(m[7]=u=>s(o).filter.tags=u),label:"Document tags",disabled:i.ajaxRunning,dense:"","start-mode-editable":!0,"deny-change-editable-mode":!0,clearable:"",placeholder:s(y)("Type text condition"),class:"q-mb-md q-pb-none"},null,8,["modelValue","disabled","placeholder"])])]),v(Rt,{spread:"",class:"q-mt-md"},{default:b(()=>[v(H,{color:"primary",size:"md",label:k.$t("Search"),"no-caps":"",icon:"search",disable:i.ajaxRunning,loading:i.ajaxRunning,type:"submit"},{loading:b(()=>[v(ra,{class:"on-left"}),ee(" "+$(s(y)("Searching...")),1)]),_:1},8,["label","disable","loading"]),F.value?(R(),te(H,{key:0,class:"action-secondary",size:"md",label:k.$t("Reset filters"),"no-caps":"",icon:"undo",disable:i.ajaxRunning||n.value<1,type:"reset"},null,8,["label","disable"])):re("",!0)]),_:1})],32),L.value?(R(),te(Ha,{key:0,text:i.ajaxErrorMessage||"Error loading data","api-error":i.ajaxAPIErrorDetails,class:"q-ma-md"},null,8,["text","api-error"])):q.value?(R(),te($a,{key:1,warning:"",text:"No results found with current filter",class:"q-ma-md"})):re("",!0)]),_:1},8,["loading","error","expanded"]),ye(v(kt,{title:"Results",icon:"folder_open",staticIcon:!0,loading:i.ajaxRunning,error:i.ajaxErrors,expanded:"",class:"q-mt-sm",ref_key:"resultsWidgetRef",ref:T},{"header-extra":b(()=>[v(yt,{square:"",size:"sm",color:"grey-7","text-color":"white"},{default:b(()=>[ee($(s(y)("Total search results count",{count:s(o).pager.totalResults})),1)]),_:1})]),content:b(()=>[s(o).pager.totalPages>1?(R(),z("div",cl,[v(bt,{modelValue:s(o).pager.currentPageIndex,"onUpdate:modelValue":[m[9]||(m[9]=u=>s(o).pager.currentPageIndex=u),I],color:"dark",max:s(o).pager.totalPages,"max-pages":5,"boundary-numbers":"","direction-links":"","boundary-links":"",disable:i.ajaxRunning,class:"theme-default-q-pagination"},null,8,["modelValue","max","disable"])])):re("",!0),D.value?(R(),te(pt,{key:1,class:"q-ma-md"},{default:b(()=>[j("thead",null,[j("tr",null,[j("th",fl,[v(sl,{square:"",dense:"","no-caps":"",options:A,current:s(o).sort,onChange:m[10]||(m[10]=u=>se(u.field,u.order)),flat:"",class:"action-primary fit full-height"},null,8,["current"])])])]),j("tbody",null,[(R(!0),z(Me,null,je(S.value,u=>(R(),z("tr",{key:u.id},[j("td",ml,[v(jt,{dense:""},{default:b(()=>[v(Ft,{clickable:"",disable:i.ajaxRunning,to:{name:"document",params:{id:u.id}},class:"bg-transparent"},{default:b(()=>[v(Te,null,{default:b(()=>[v(Pe,null,{default:b(()=>[ee($(s(y)("Title"))+": "+$(u.title),1)]),_:2},1024),v(Pe,{caption:""},{default:b(()=>[ee($(s(y)("Creation date"))+": "+$(u.createdAt.dateTime)+" ("+$(u.createdAt.timeAgo)+")",1)]),_:2},1024),u.updatedAt?.dateTime?(R(),te(Pe,{key:0,caption:""},{default:b(()=>[ee($(s(y)("Last update"))+": "+$(u.updatedAt.dateTime)+" ("+$(u.updatedAt.timeAgo)+")",1)]),_:2},1024)):re("",!0)]),_:2},1024),v(Te,{side:"",top:""},{default:b(()=>[v(Se,{size:"md",square:"",class:"min-width-9em",count:u.attachmentCount,label:"Total attachments count","tool-tip":"View document attachments",disable:i.ajaxRunning,onClick:he(Q=>s(Dt)(u.id,u.title),["stop","prevent"])},null,8,["count","disable","onClick"]),v(Se,{size:"md",square:"",class:"min-width-9em",count:u.noteCount,label:"Total notes","tool-tip":"View document notes",disable:i.ajaxRunning,onClick:he(Q=>s(wt)(u.id,u.title),["stop","prevent"])},null,8,["count","disable","onClick"])]),_:2},1024)]),_:2},1032,["disable","to"])]),_:2},1024)])]))),128))])]),_:1})):(R(),te(pt,{key:2,class:"q-ma-md"},{default:b(()=>[j("thead",null,[j("tr",null,[m[12]||(m[12]=j("th",{class:"lt-xl"},null,-1)),(R(),z(Me,null,je(C,(u,Q)=>j("th",{key:Q,class:ka(["text-left",u.defaultClass,{"cursor-not-allowed":i.ajaxRunning,"cursor-pointer":!i.ajaxRunning,"action-primary":s(o).sort.field===u.field}]),onClick:ie=>se(u.field)},[v(J,{name:s(o).sort.field===u.field?O.value:"sort",size:"sm"},null,8,["name"]),ee(" "+$(s(y)(u.title))+" ",1),v(fa,null,{default:b(()=>[ee($(s(y)("Toggle sort by this column",{field:s(y)(u.title)})),1)]),_:2},1024)],10,vl)),64))])]),j("tbody",null,[(R(!0),z(Me,null,je(S.value,u=>(R(),z("tr",{key:u.id},[m[13]||(m[13]=j("td",{class:"lt-xl"},null,-1)),j("td",hl,[v(H,{align:"left","no-caps":"",flat:"",to:{name:"document",params:{id:u.id}},class:"fit text-decoration-hover",label:u.title},null,8,["to","label"])]),j("td",gl,$(u.createdAt.dateTime),1),j("td",yl,$(u.updatedAt?.dateTime),1),j("td",bl,[v(Se,{size:"md",square:"",class:"min-width-8em",count:u.attachmentCount,label:"Total attachments count","tool-tip":"View document attachments",disable:i.ajaxRunning,onClick:he(Q=>s(Dt)(u.id,u.title),["stop","prevent"]),"q-chip-class":"'q-chip-8em'"},null,8,["count","disable","onClick"])]),j("td",pl,[v(Se,{size:"md",square:"",class:"min-width-8em",count:u.noteCount,label:"Total notes","tool-tip":"View document notes",disable:i.ajaxRunning,onClick:he(Q=>s(wt)(u.id,u.title),["stop","prevent"]),"q-chip-class":"'q-chip-8em'"},null,8,["count","disable","onClick"])])]))),128))])]),_:1})),s(o).pager.totalPages>1?(R(),z("div",xl,[v(bt,{modelValue:s(o).pager.currentPageIndex,"onUpdate:modelValue":[m[11]||(m[11]=u=>s(o).pager.currentPageIndex=u),I],color:"dark",max:s(o).pager.totalPages,"max-pages":5,"boundary-numbers":"","direction-links":"","boundary-links":"",disable:i.ajaxRunning,class:"theme-default-q-pagination"},null,8,["modelValue","max","disable"])])):re("",!0)]),_:1},8,["loading","error"]),[[xt,Y.value]])]),_:1}))}}),Gl=Qa(_l,[["__scopeId","data-v-15fdd3e3"]]);export{Gl as default};
