import{d as a}from"./index-DMsogX6U.js";import{u as i}from"./api-qyRpSTvW.js";import"./index-CG2WSiiR.js";const s=i(),r=300,m=a(async({router:o})=>{s.hasAccessToken||await s.refreshAccessToken();const c=async()=>s.hasAccessToken&&s.accessTokenExpiresBeforeInterval(r)?await s.refreshAccessToken():!1;setInterval(()=>{c().then(()=>{}).catch(e=>{console.error("An unhandled exception occurred during access token refresh",e)}).finally(()=>{})},r*1e3),o.beforeEach((e,t,n)=>{if(!e.matched.length){n({name:"notFound"});return}s.hasAccessToken?e.name==="login"||e.name==="register"?n({name:"index"}):n():e.name==="login"||e.name==="register"?n():n({name:"login"})})});export{m as default};
