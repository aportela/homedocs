import{a as Kt,Q as Be,g as la}from"./QBtn-DS5wVTGT.js";import{Q as Zt}from"./ClosePopup-luNe27os.js";import{x as Je,j as N,y as Se,z as Tt,A as Xe,l as ue,B as we,C as Jt,D as Ue,E as ea,F as ua,H as yt,I as tt,J as xt,K as da,L as ut,M as $t,N as zt,O as St,P as ca,Q as ha,R as Qe,v as gt,S as Me,a as Ve,b as Fe,e as me,w as I,h as q,n as ve,f as U,q as re,T as wt,U as _t,t as F,g as O,i as ta,V as aa,o as R,W as ma,X as fa,Y as ga,Z as jt,k as Te,_ as va,$ as pa,a0 as wa,a1 as na,a2 as Ke,p as Ce,s as Ne,a3 as Le,a4 as _a,a5 as ba,r as it,a6 as ya,a7 as Bt,G as xa}from"./index-B-UYWWpq.js";import{h as Et,a as Sa,Q as Ca,b as Vt,c as oa,_ as rt}from"./_plugin-vue_export-helper-B9cH7pQ5.js";import{Q as Aa}from"./QPageContainer-D4Y3SRXM.js";import{Q as ka}from"./QLayout-CWc4Qi4v.js";import{u as Da,a as $a,b as qa,Q as Ge,c as Oe,_ as qt,d as Pa}from"./QItem-bsDUXGQF.js";import{u as bt,a as Re,b as ia}from"./api-CM3iwbFc.js";import{f as vt,t as Lt,c as ct,a as Ft,b as Rt}from"./dateUtils-BWiXzgsP.js";import{b as dt,a as le,o as Ma,c as Ta,f as pt}from"./bus-7f8GRI0F.js";import{a as Ye}from"./QCardSection-D9IAel0T.js";import{Q as je}from"./QItemLabel-BdxNRxLi.js";import{c as Ea,u as Oa,b as Ia,d as Pt,Q as ze,R as Nt,a as ht,v as Ct}from"./use-timeout-f6zK2_pC.js";import{Q as Ot,a as He,D as nt}from"./dateTime-Cijk2gV2.js";import{u as za,a as ja,b as Ba,c as Va,Q as Ut}from"./QSelect-CvfYJwQf.js";import{g as Qt,s as Ht,d as Ie,a as st,_ as Ze}from"./CustomErrorBanner.vue_vue_type_script_setup_true_lang-Cj3i-oR3.js";import{_ as We,Q as It,i as La,g as At,a as Fa,b as Ra,c as ra,d as ot,A as Na,N as Ua,D as Qa}from"./document-DDNS73Jb.js";import{Q as Mt,u as Ha,a as Ya}from"./QInput-pN4J6sFa.js";import{Q as sa}from"./QMarkupTable-qO_HfeaX.js";import{s as Wa,g as Xa}from"./scroll-D_X1SM_z.js";import{S as Ga,a as Ka,b as Za}from"./searchFilter-CGyusLbu.js";import{_ as Yt}from"./ViewDocumentDetailsButton.vue_vue_type_script_setup_true_lang-CYG-NAJC.js";import{_ as Ja,a as en,b as tn}from"./GitHubButton.vue_vue_type_script_setup_true_lang-B2e99P-n.js";import{_ as an}from"./LoginForm.vue_vue_type_script_setup_true_lang-CfMGqKvN.js";import{Q as nn}from"./QPagination-DwiqSCFo.js";import{u as on}from"./browserSupport-CBT-aQV4.js";import{Q as mt}from"./QToggle-DcLpXDHw.js";import{u as rn}from"./serverEnvironment-DKulyRMn.js";import"./index-CG2WSiiR.js";import"./darkMode-DJpuHzA4.js";import"./QSpinnerHourglass-BgEsDQI1.js";import"./useFormUtils-Dvne9-JV.js";import"./PasswordFieldCustomInput.vue_vue_type_script_setup_true_lang-q2uWuT6K.js";const sn=Je({name:"QToolbar",props:{inset:Boolean},setup(o,{slots:j}){const p=N(()=>"q-toolbar row no-wrap items-center"+(o.inset===!0?" q-toolbar--inset":""));return()=>Se("div",{class:p.value,role:"toolbar"},Et(j.default))}}),ln=Je({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(o,{slots:j,emit:p}){const{proxy:{$q:b}}=Tt(),l=Jt(ea,Xe);if(l===Xe)return console.error("QHeader needs to be child of QLayout"),Xe;const x=ue(parseInt(o.heightHint,10)),d=ue(!0),M=N(()=>o.reveal===!0||l.view.value.indexOf("H")!==-1||b.platform.is.ios&&l.isContainer.value===!0),c=N(()=>{if(o.modelValue!==!0)return 0;if(M.value===!0)return d.value===!0?x.value:0;const S=x.value-l.scroll.value.position;return S>0?S:0}),V=N(()=>o.modelValue!==!0||M.value===!0&&d.value!==!0),h=N(()=>o.modelValue===!0&&V.value===!0&&o.reveal===!0),Q=N(()=>"q-header q-layout__section--marginal "+(M.value===!0?"fixed":"absolute")+"-top"+(o.bordered===!0?" q-header--bordered":"")+(V.value===!0?" q-header--hidden":"")+(o.modelValue!==!0?" q-layout--prevent-focus":"")),E=N(()=>{const S=l.rows.value.top,G={};return S[0]==="l"&&l.left.space===!0&&(G[b.lang.rtl===!0?"right":"left"]=`${l.left.size}px`),S[2]==="r"&&l.right.space===!0&&(G[b.lang.rtl===!0?"left":"right"]=`${l.right.size}px`),G});function k(S,G){l.update("header",S,G)}function D(S,G){S.value!==G&&(S.value=G)}function v({height:S}){D(x,S),k("size",S)}function A(S){h.value===!0&&D(d,!0),p("focusin",S)}we(()=>o.modelValue,S=>{k("space",S),D(d,!0),l.animate()}),we(c,S=>{k("offset",S)}),we(()=>o.reveal,S=>{S===!1&&D(d,o.modelValue)}),we(d,S=>{l.animate(),p("reveal",S)}),we(l.scroll,S=>{o.reveal===!0&&D(d,S.direction==="up"||S.position<=o.revealOffset||S.position-S.inflectionPoint<100)});const y={};return l.instances.header=y,o.modelValue===!0&&k("size",x.value),k("space",o.modelValue),k("offset",c.value),Ue(()=>{l.instances.header===y&&(l.instances.header=void 0,k("size",0),k("offset",0),k("space",!1))}),()=>{const S=Sa(j.default,[]);return o.elevated===!0&&S.push(Se("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),S.push(Se(Ca,{debounce:0,onResize:v})),Se("header",{class:Q.value,style:E.value,onFocusin:A},S)}}});function kt(o,j,p){const b=$t(o);let l,x=b.left-j.event.x,d=b.top-j.event.y,M=Math.abs(x),c=Math.abs(d);const V=j.direction;V.horizontal===!0&&V.vertical!==!0?l=x<0?"left":"right":V.horizontal!==!0&&V.vertical===!0?l=d<0?"up":"down":V.up===!0&&d<0?(l="up",M>c&&(V.left===!0&&x<0?l="left":V.right===!0&&x>0&&(l="right"))):V.down===!0&&d>0?(l="down",M>c&&(V.left===!0&&x<0?l="left":V.right===!0&&x>0&&(l="right"))):V.left===!0&&x<0?(l="left",M<c&&(V.up===!0&&d<0?l="up":V.down===!0&&d>0&&(l="down"))):V.right===!0&&x>0&&(l="right",M<c&&(V.up===!0&&d<0?l="up":V.down===!0&&d>0&&(l="down")));let h=!1;if(l===void 0&&p===!1){if(j.event.isFirst===!0||j.event.lastDir===void 0)return{};l=j.event.lastDir,h=!0,l==="left"||l==="right"?(b.left-=x,M=0,x=0):(b.top-=d,c=0,d=0)}return{synthetic:h,payload:{evt:o,touch:j.event.mouse!==!0,mouse:j.event.mouse===!0,position:b,direction:l,isFirst:j.event.isFirst,isFinal:p===!0,duration:Date.now()-j.event.time,distance:{x:M,y:c},offset:{x,y:d},delta:{x:b.left-j.event.lastX,y:b.top-j.event.lastY}}}}let un=0;const Dt=ua({name:"touch-pan",beforeMount(o,{value:j,modifiers:p}){if(p.mouse!==!0&&tt.has.touch!==!0)return;function b(x,d){p.mouse===!0&&d===!0?ha(x):(p.stop===!0&&St(x),p.prevent===!0&&zt(x))}const l={uid:"qvtp_"+un++,handler:j,modifiers:p,direction:Qt(p),noop:da,mouseStart(x){Ht(x,l)&&ca(x)&&(ut(l,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),l.start(x,!0))},touchStart(x){if(Ht(x,l)){const d=x.target;ut(l,"temp",[[d,"touchmove","move","notPassiveCapture"],[d,"touchcancel","end","passiveCapture"],[d,"touchend","end","passiveCapture"]]),l.start(x)}},start(x,d){if(tt.is.firefox===!0&&xt(o,!0),l.lastEvt=x,d===!0||p.stop===!0){if(l.direction.all!==!0&&(d!==!0||l.modifiers.mouseAllDir!==!0&&l.modifiers.mousealldir!==!0)){const V=x.type.indexOf("mouse")!==-1?new MouseEvent(x.type,x):new TouchEvent(x.type,x);x.defaultPrevented===!0&&zt(V),x.cancelBubble===!0&&St(V),Object.assign(V,{qKeyEvent:x.qKeyEvent,qClickOutside:x.qClickOutside,qAnchorHandled:x.qAnchorHandled,qClonedBy:x.qClonedBy===void 0?[l.uid]:x.qClonedBy.concat(l.uid)}),l.initialEvent={target:x.target,event:V}}St(x)}const{left:M,top:c}=$t(x);l.event={x:M,y:c,time:Date.now(),mouse:d===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:M,lastY:c}},move(x){if(l.event===void 0)return;const d=$t(x),M=d.left-l.event.x,c=d.top-l.event.y;if(M===0&&c===0)return;l.lastEvt=x;const V=l.event.mouse===!0,h=()=>{b(x,V);let k;p.preserveCursor!==!0&&p.preservecursor!==!0&&(k=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),V===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ea(),l.styleCleanup=D=>{if(l.styleCleanup=void 0,k!==void 0&&(document.documentElement.style.cursor=k),document.body.classList.remove("non-selectable"),V===!0){const v=()=>{document.body.classList.remove("no-pointer-events--children")};D!==void 0?setTimeout(()=>{v(),D()},50):v()}else D!==void 0&&D()}};if(l.event.detected===!0){l.event.isFirst!==!0&&b(x,l.event.mouse);const{payload:k,synthetic:D}=kt(x,l,!1);k!==void 0&&(l.handler(k)===!1?l.end(x):(l.styleCleanup===void 0&&l.event.isFirst===!0&&h(),l.event.lastX=k.position.left,l.event.lastY=k.position.top,l.event.lastDir=D===!0?void 0:k.direction,l.event.isFirst=!1));return}if(l.direction.all===!0||V===!0&&(l.modifiers.mouseAllDir===!0||l.modifiers.mousealldir===!0)){h(),l.event.detected=!0,l.move(x);return}const Q=Math.abs(M),E=Math.abs(c);Q!==E&&(l.direction.horizontal===!0&&Q>E||l.direction.vertical===!0&&Q<E||l.direction.up===!0&&Q<E&&c<0||l.direction.down===!0&&Q<E&&c>0||l.direction.left===!0&&Q>E&&M<0||l.direction.right===!0&&Q>E&&M>0?(l.event.detected=!0,l.move(x)):l.end(x,!0))},end(x,d){if(l.event!==void 0){if(yt(l,"temp"),tt.is.firefox===!0&&xt(o,!1),d===!0)l.styleCleanup?.(),l.event.detected!==!0&&l.initialEvent!==void 0&&l.initialEvent.target.dispatchEvent(l.initialEvent.event);else if(l.event.detected===!0){l.event.isFirst===!0&&l.handler(kt(x===void 0?l.lastEvt:x,l).payload);const{payload:M}=kt(x===void 0?l.lastEvt:x,l,!0),c=()=>{l.handler(M)};l.styleCleanup!==void 0?l.styleCleanup(c):c()}l.event=void 0,l.initialEvent=void 0,l.lastEvt=void 0}}};if(o.__qtouchpan=l,p.mouse===!0){const x=p.mouseCapture===!0||p.mousecapture===!0?"Capture":"";ut(l,"main",[[o,"mousedown","mouseStart",`passive${x}`]])}tt.has.touch===!0&&ut(l,"main",[[o,"touchstart","touchStart",`passive${p.capture===!0?"Capture":""}`],[o,"touchmove","noop","notPassiveCapture"]])},updated(o,j){const p=o.__qtouchpan;p!==void 0&&(j.oldValue!==j.value&&(typeof value!="function"&&p.end(),p.handler=j.value),p.direction=Qt(j.modifiers))},beforeUnmount(o){const j=o.__qtouchpan;j!==void 0&&(j.event!==void 0&&j.end(),yt(j,"main"),yt(j,"temp"),tt.is.firefox===!0&&xt(o,!1),j.styleCleanup?.(),delete o.__qtouchpan)}}),Wt=150,dn=Je({name:"QDrawer",inheritAttrs:!1,props:{...$a,...Oa,side:{type:String,default:"left",validator:o=>["left","right"].includes(o)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:o=>["default","desktop","mobile"].includes(o),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Da,"onLayout","miniState"],setup(o,{slots:j,emit:p,attrs:b}){const l=Tt(),{proxy:{$q:x}}=l,d=Ia(o,x),{preventBodyScroll:M}=ja(),{registerTimeout:c,removeTimeout:V}=Pt(),h=Jt(ea,Xe);if(h===Xe)return console.error("QDrawer needs to be child of QLayout"),Xe;let Q,E=null,k;const D=ue(o.behavior==="mobile"||o.behavior!=="desktop"&&h.totalWidth.value<=o.breakpoint),v=N(()=>o.mini===!0&&D.value!==!0),A=N(()=>v.value===!0?o.miniWidth:o.width),y=ue(o.showIfAbove===!0&&D.value===!1?!0:o.modelValue===!0),S=N(()=>o.persistent!==!0&&(D.value===!0||i.value===!0));function G(P,X){if(De(),P!==!1&&h.animate(),g(0),D.value===!0){const ie=h.instances[r.value];ie?.belowBreakpoint===!0&&ie.hide(!1),u(1),h.isContainer.value!==!0&&M(!0)}else u(0),P!==!1&&w(!1);c(()=>{P!==!1&&w(!0),X!==!0&&p("show",P)},Wt)}function de(P,X){z(),P!==!1&&h.animate(),u(0),g(pe.value*A.value),ae(),X!==!0?c(()=>{p("hide",P)},Wt):V()}const{show:ke,hide:ye}=qa({showing:y,hideOnRouteChange:S,handleShow:G,handleHide:de}),{addToHistory:De,removeFromHistory:z}=za(y,ye,S),K={belowBreakpoint:D,hide:ye},xe=N(()=>o.side==="right"),pe=N(()=>(x.lang.rtl===!0?-1:1)*(xe.value===!0?1:-1)),ce=ue(0),_e=ue(!1),f=ue(!1),_=ue(A.value*pe.value),r=N(()=>xe.value===!0?"left":"right"),t=N(()=>y.value===!0&&D.value===!1&&o.overlay===!1?o.miniToOverlay===!0?o.miniWidth:A.value:0),e=N(()=>o.overlay===!0||o.miniToOverlay===!0||h.view.value.indexOf(xe.value?"R":"L")!==-1||x.platform.is.ios===!0&&h.isContainer.value===!0),n=N(()=>o.overlay===!1&&y.value===!0&&D.value===!1),i=N(()=>o.overlay===!0&&y.value===!0&&D.value===!1),a=N(()=>"fullscreen q-drawer__backdrop"+(y.value===!1&&_e.value===!1?" hidden":"")),m=N(()=>({backgroundColor:`rgba(0,0,0,${ce.value*.4})`})),T=N(()=>xe.value===!0?h.rows.value.top[2]==="r":h.rows.value.top[0]==="l"),$=N(()=>xe.value===!0?h.rows.value.bottom[2]==="r":h.rows.value.bottom[0]==="l"),H=N(()=>{const P={};return h.header.space===!0&&T.value===!1&&(e.value===!0?P.top=`${h.header.offset}px`:h.header.space===!0&&(P.top=`${h.header.size}px`)),h.footer.space===!0&&$.value===!1&&(e.value===!0?P.bottom=`${h.footer.offset}px`:h.footer.space===!0&&(P.bottom=`${h.footer.size}px`)),P}),B=N(()=>{const P={width:`${A.value}px`,transform:`translateX(${_.value}px)`};return D.value===!0?P:Object.assign(P,H.value)}),Y=N(()=>"q-drawer__content fit "+(h.isContainer.value!==!0?"scroll":"overflow-auto")),L=N(()=>`q-drawer q-drawer--${o.side}`+(f.value===!0?" q-drawer--mini-animate":"")+(o.bordered===!0?" q-drawer--bordered":"")+(d.value===!0?" q-drawer--dark q-dark":"")+(_e.value===!0?" no-transition":y.value===!0?"":" q-layout--prevent-focus")+(D.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${v.value===!0?"mini":"standard"}`+(e.value===!0||n.value!==!0?" fixed":"")+(o.overlay===!0||o.miniToOverlay===!0?" q-drawer--on-top":"")+(T.value===!0?" q-drawer--top-padding":""))),Z=N(()=>{const P=x.lang.rtl===!0?o.side:r.value;return[[Dt,W,void 0,{[P]:!0,mouse:!0}]]}),oe=N(()=>{const P=x.lang.rtl===!0?r.value:o.side;return[[Dt,te,void 0,{[P]:!0,mouse:!0}]]}),J=N(()=>{const P=x.lang.rtl===!0?r.value:o.side;return[[Dt,te,void 0,{[P]:!0,mouse:!0,mouseAllDir:!0}]]});function s(){fe(D,o.behavior==="mobile"||o.behavior!=="desktop"&&h.totalWidth.value<=o.breakpoint)}we(D,P=>{P===!0?(Q=y.value,y.value===!0&&ye(!1)):o.overlay===!1&&o.behavior!=="mobile"&&Q!==!1&&(y.value===!0?(g(0),u(0),ae()):ke(!1))}),we(()=>o.side,(P,X)=>{h.instances[X]===K&&(h.instances[X]=void 0,h[X].space=!1,h[X].offset=0),h.instances[P]=K,h[P].size=A.value,h[P].space=n.value,h[P].offset=t.value}),we(h.totalWidth,()=>{(h.isContainer.value===!0||document.qScrollPrevented!==!0)&&s()}),we(()=>o.behavior+o.breakpoint,s),we(h.isContainer,P=>{y.value===!0&&M(P!==!0),P===!0&&s()}),we(h.scrollbarWidth,()=>{g(y.value===!0?0:void 0)}),we(t,P=>{se("offset",P)}),we(n,P=>{p("onLayout",P),se("space",P)}),we(xe,()=>{g()}),we(A,P=>{g(),ge(o.miniToOverlay,P)}),we(()=>o.miniToOverlay,P=>{ge(P,A.value)}),we(()=>x.lang.rtl,()=>{g()}),we(()=>o.mini,()=>{o.noMiniAnimation||o.modelValue===!0&&(C(),h.animate())}),we(v,P=>{p("miniState",P)});function g(P){P===void 0?gt(()=>{P=y.value===!0?0:A.value,g(pe.value*P)}):(h.isContainer.value===!0&&xe.value===!0&&(D.value===!0||Math.abs(P)===A.value)&&(P+=pe.value*h.scrollbarWidth.value),_.value=P)}function u(P){ce.value=P}function w(P){const X=P===!0?"remove":h.isContainer.value!==!0?"add":"";X!==""&&document.body.classList[X]("q-body--drawer-toggle")}function C(){E!==null&&clearTimeout(E),l.proxy&&l.proxy.$el&&l.proxy.$el.classList.add("q-drawer--mini-animate"),f.value=!0,E=setTimeout(()=>{E=null,f.value=!1,l?.proxy?.$el?.classList.remove("q-drawer--mini-animate")},150)}function W(P){if(y.value!==!1)return;const X=A.value,ie=dt(P.distance.x,0,X);if(P.isFinal===!0){ie>=Math.min(75,X)===!0?ke():(h.animate(),u(0),g(pe.value*X)),_e.value=!1;return}g((x.lang.rtl===!0?xe.value!==!0:xe.value)?Math.max(X-ie,0):Math.min(0,ie-X)),u(dt(ie/X,0,1)),P.isFirst===!0&&(_e.value=!0)}function te(P){if(y.value!==!0)return;const X=A.value,ie=P.direction===o.side,he=(x.lang.rtl===!0?ie!==!0:ie)?dt(P.distance.x,0,X):0;if(P.isFinal===!0){Math.abs(he)<Math.min(75,X)===!0?(h.animate(),u(1),g(0)):ye(),_e.value=!1;return}g(pe.value*he),u(dt(1-he/X,0,1)),P.isFirst===!0&&(_e.value=!0)}function ae(){M(!1),w(!0)}function se(P,X){h.update(o.side,P,X)}function fe(P,X){P.value!==X&&(P.value=X)}function ge(P,X){se("size",P===!0?o.miniWidth:X)}return h.instances[o.side]=K,ge(o.miniToOverlay,A.value),se("space",n.value),se("offset",t.value),o.showIfAbove===!0&&o.modelValue!==!0&&y.value===!0&&o["onUpdate:modelValue"]!==void 0&&p("update:modelValue",!0),Qe(()=>{p("onLayout",n.value),p("miniState",v.value),Q=o.showIfAbove===!0;const P=()=>{(y.value===!0?G:de)(!1,!0)};if(h.totalWidth.value!==0){gt(P);return}k=we(h.totalWidth,()=>{k(),k=void 0,y.value===!1&&o.showIfAbove===!0&&D.value===!1?ke(!1):P()})}),Ue(()=>{k?.(),E!==null&&(clearTimeout(E),E=null),y.value===!0&&ae(),h.instances[o.side]===K&&(h.instances[o.side]=void 0,se("size",0),se("offset",0),se("space",!1))}),()=>{const P=[];D.value===!0&&(o.noSwipeOpen===!1&&P.push(Me(Se("div",{key:"open",class:`q-drawer__opener fixed-${o.side}`,"aria-hidden":"true"}),Z.value)),P.push(Vt("div",{ref:"backdrop",class:a.value,style:m.value,"aria-hidden":"true",onClick:ye},void 0,"backdrop",o.noSwipeBackdrop!==!0&&y.value===!0,()=>J.value)));const X=v.value===!0&&j.mini!==void 0,ie=[Se("div",{...b,key:""+X,class:[Y.value,b.class]},X===!0?j.mini():Et(j.default))];return o.elevated===!0&&y.value===!0&&ie.push(Se("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),P.push(Vt("aside",{ref:"content",class:L.value,style:B.value},ie,"contentclose",o.noSwipeClose!==!0&&D.value===!0,()=>oe.value)),Se("div",{class:"q-drawer-container"},P)}}}),cn=Ve({__name:"SidebarDrawer",props:{modelValue:{type:Boolean},mini:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(o,{emit:j}){const p=o,b=j,l=N({get(){return p.modelValue},set(k){b("update:modelValue",k)}}),{t:x}=Fe(),d=ta(),M=aa(),c=N(()=>String(M.name)),V=bt(),h=N(()=>p.mini),Q=[{icon:"home",text:"Home",routeName:"index"},{icon:"account_circle",text:"My profile",routeName:"profile"},{icon:"note_add",text:"Add",routeName:"newDocument"},{icon:"find_in_page",text:"Advanced search",routeName:"advancedSearch",alternateRouteNames:["advancedSearchByTag","advancedSearchByFixedCreationDate","advancedSearchByFixedLastUpdate","advancedSearchByFixedUpdatedOn"]},{icon:"share",text:"Attachments shares",routeName:"attachmentsShares"}],E=()=>{Re.auth.logout().then(()=>{V.removeAccessToken(),d.push({name:"login"}).catch(k=>{console.error(k)})}).catch(k=>{console.error(k),V.removeAccessToken(),d.push({name:"login"}).catch(D=>{console.error(D)})})};return(k,D)=>(R(),me(dn,{modelValue:l.value,"onUpdate:modelValue":D[0]||(D[0]=v=>l.value=v),"show-if-above":"",bordered:"",width:240,mini:h.value,class:"fit theme-default-q-drawer"},{default:I(()=>[q(Ot,null,{default:I(()=>[q(Ge,{class:"cursor-pointer non-selectable no-pointer-events rounded-borders q-ma-sm theme-default-q-item"},{default:I(()=>[q(Oe,{avatar:""},{default:I(()=>[q(Ye,{square:"",size:"24px"},{default:I(()=>[...D[1]||(D[1]=[U("img",{src:"icons/favicon-128x128.png"},null,-1)])]),_:1})]),_:1}),q(Oe,null,{default:I(()=>[q(je,{class:"text-weight-bold text-uppercase"},{default:I(()=>[...D[2]||(D[2]=[re("HomeDocs",-1)])]),_:1})]),_:1})]),_:1}),(R(),ve(_t,null,wt(Q,v=>Me(q(Ge,{key:v.text,clickable:"",to:{name:v.routeName},class:"rounded-borders q-ma-sm theme-default-q-item",active:v.routeName==c.value||v.alternateRouteNames?.includes(c.value),"active-class":"theme-default-q-item-active"},{default:I(()=>[q(Oe,{avatar:""},{default:I(()=>[q(ze,{name:v.icon},null,8,["name"])]),_:2},1024),q(Oe,null,{default:I(()=>[q(je,null,{default:I(()=>[re(F(O(x)(v.text)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to","active"]),[[Nt]])),64)),Me((R(),me(Ge,{clickable:"",onClick:E,class:"rounded-borders q-ma-sm theme-default-q-item"},{default:I(()=>[q(Oe,{avatar:""},{default:I(()=>[q(ze,{name:"logout"})]),_:1}),q(Oe,null,{default:I(()=>[q(je,null,{default:I(()=>[re(F(O(x)("Sign out")),1)]),_:1})]),_:1})]),_:1})),[[Nt]])]),_:1})]),_:1},8,["modelValue","mini"]))}});function hn(o,j){return Se("div",o,[Se("table",{class:"q-table"},j)])}const mn={list:Ot,table:sa},fn=["list","table","__qtable"],gn=Je({name:"QVirtualScroll",props:{...Ba,type:{type:String,default:"list",validator:o=>fn.includes(o)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:Wa},setup(o,{slots:j,attrs:p}){let b;const l=ue(null),x=N(()=>o.itemsSize>=0&&o.itemsFn!==void 0?parseInt(o.itemsSize,10):Array.isArray(o.items)?o.items.length:0),{virtualScrollSliceRange:d,localResetVirtualScroll:M,padVirtualScroll:c,onVirtualScrollEvt:V}=Va({virtualScrollLength:x,getVirtualScrollTarget:D,getVirtualScrollEl:k}),h=N(()=>{if(x.value===0)return[];const S=(G,de)=>({index:d.value.from+de,item:G});return o.itemsFn===void 0?o.items.slice(d.value.from,d.value.to).map(S):o.itemsFn(d.value.from,d.value.to-d.value.from).map(S)}),Q=N(()=>"q-virtual-scroll q-virtual-scroll"+(o.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(o.scrollTarget!==void 0?"":" scroll")),E=N(()=>o.scrollTarget!==void 0?{}:{tabindex:0});we(x,()=>{M()}),we(()=>o.scrollTarget,()=>{A(),v()});function k(){return l.value.$el||l.value}function D(){return b}function v(){b=Xa(k(),o.scrollTarget),b.addEventListener("scroll",V,jt.passive)}function A(){b!==void 0&&(b.removeEventListener("scroll",V,jt.passive),b=void 0)}function y(){let S=c(o.type==="list"?"div":"tbody",h.value.map(j.default));return j.before!==void 0&&(S=j.before().concat(S)),oa(j.after,S)}return ma(()=>{M()}),Qe(()=>{v()}),fa(()=>{v()}),ga(()=>{A()}),Ue(()=>{A()}),()=>{if(j.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return o.type==="__qtable"?hn({ref:l,class:"q-table__middle "+Q.value},y()):Se(mn[o.type],{...p,ref:l,class:[p.class,Q.value],...E.value},y)}}}),vn={class:"q-pa-sm row items-center q-gutter-sm"},pn={class:"col-auto"},wn={style:{"flex-grow":"1"}},_n={key:0},bn=["innerHTML"],yn={class:"text-color-primary"},xn=Ve({__name:"SearchDialog",props:{modelValue:{type:Boolean}},emits:["update:modelValue","close"],setup(o,{emit:j}){const p=o,b=ta(),l=aa(),x=bt(),d=ue(l.name=="document"&&l.params?.id||null),{t:M}=Fe(),c=j,V=N({get(){return p.modelValue},set(f){c("update:modelValue",f)}}),h=Te({...Ie}),Q=N(()=>[{label:"Title",value:"title"},{label:"Description",value:"description"},{label:"Notes",value:"notesBody"},{label:"Attachment names",value:"attachmentsFilename"}]),E={field:"lastUpdateTimestamp",label:"",order:"DESC"},k=ue(Q.value[0]);we(()=>k.value,()=>{gt().then(()=>{De.value?.focus()}).catch(f=>{console.error(f)})});const D=ue(null),v=Te({currentPageIndex:1,resultsPage:x.searchDialogResultsPage,totalResults:0,totalPages:0}),A=[1,2,3,4,6,8,12,16,24,32,64,128],y=f=>{x.setSearchDialogResultsPage(f),z(S.value)},S=ue(""),G=va([]),de=ue(-1),ke=ue(0),ye=ue(!1),De=ue(null),z=f=>{if(v.totalResults=0,v.totalPages=0,ye.value=!1,f&&f.trim().length>0){de.value=-1,Object.assign(h,Ie),h.ajaxRunning=!0;const _={text:new Ga(k.value.value=="title"?f.trim():null,k.value.value=="description"?f.trim():null,k.value.value=="notesBody"?f.trim():null,k.value.value=="attachmentsFilename"?f.trim():null),tags:[],dates:new Ka};Re.document.search(v,_,E,!0).then(r=>{v.totalResults=r.data.results.pagination.totalResults,v.totalPages=r.data.results.pagination.totalPages,G.value=r.data.results.documents.map(t=>new Za(M,t.id,new nt(M,t.createdAtTimestamp),new nt(M,t.updatedAtTimestamp),t.title,t.description,t.tags,t.attachmentCount,t.noteCount,t.matchedFragments,f.trim())),ye.value=G.value.length<=0}).catch(r=>{if(h.ajaxErrors=!0,r.isAPIError)switch(h.ajaxAPIErrorDetails=r.customAPIErrorDetails,r.response.status){case 401:h.ajaxErrors=!1,le.emit("reAuthRequired",{emitter:"SearchDialog.onSearch"});break;default:h.ajaxErrorMessage="API Error: fatal error";break}else h.ajaxErrorMessage=`Uncaught exception: ${r}`,console.error(r)}).finally(()=>{h.ajaxRunning=!1})}else G.value=[]},K=f=>{ke.value=f.index},xe=f=>{D.value&&D.value.scrollTo(f,"start-force")},pe=f=>{f.key==="ArrowUp"?G.value.length>0&&de.value>0&&(de.value--,xe(de.value),f.preventDefault(),f.stopPropagation()):f.key==="ArrowDown"?G.value.length>0&&de.value<G.value.length-1&&(de.value++,xe(de.value),f.preventDefault(),f.stopPropagation()):f.key==="Enter"&&G.value.length>0&&de.value>=0&&de.value<G.value.length&&b.push({name:"document",params:{id:G.value[de.value].id}}).catch(_=>{console.error(_)})},ce=()=>{v.resultsPage=x.searchDialogResultsPage,v.totalResults=0,v.totalPages=0,window.addEventListener("keydown",pe),gt().then(()=>{De.value?.focus()}).catch(f=>{console.error(f)})},_e=()=>{G.value=[],S.value="",ye.value=!1,window.removeEventListener("keydown",pe),c("close")};return Qe(()=>{le.on("reAuthSucess",f=>{f.to?.includes("SearchDialog.onSearch")&&z(S.value)})}),Ue(()=>{le.off("reAuthSucess")}),(f,_)=>(R(),me(We,{modelValue:V.value,"onUpdate:modelValue":_[5]||(_[5]=r=>V.value=r),onShow:ce,onClose:_e,width:"1280px","max-width":"80vw"},{"header-left":I(()=>[re(F(O(M)("Search on HomeDocs...")),1)]),"header-right":I(()=>[!h.ajaxRunning&&!h.ajaxErrors?Me((R(),me(He,{key:0,size:"md",square:"",class:"gt-sm theme-default-q-chip shadow-1"},{default:I(()=>[q(Ye,{class:"theme-default-q-avatar theme-default-q-avatar-width-auto"},{default:I(()=>[re(F(v.totalResults),1)]),_:1}),re(" "+F(O(M)("Results count",{count:v.totalResults})),1)]),_:1},512)),[[Le,v.totalResults>0]]):Ce("",!0)]),body:I(()=>[U("div",vn,[U("div",pn,[q(Ut,{modelValue:k.value,"onUpdate:modelValue":[_[0]||(_[0]=r=>k.value=r),_[1]||(_[1]=r=>z(S.value))],options:Q.value,"display-value":`${k.value?O(M)(k.value.label):""}`,dense:"","options-dense":"",outlined:"",style:{"min-width":"8em"},label:O(M)("Search on"),disable:h.ajaxRunning},{option:I(r=>[q(Ge,pa(wa(r.itemProps)),{default:I(()=>[q(Oe,null,{default:I(()=>[q(je,null,{default:I(()=>[re(F(O(M)(r.label)),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","display-value","label","disable"])]),U("div",wn,[q(O(Mt),{type:"text",dense:"",color:"grey-3","label-color":"grey-7",label:O(M)("Search text..."),modelValue:S.value,"onUpdate:modelValue":[_[2]||(_[2]=r=>S.value=r),_[3]||(_[3]=r=>z(S.value))],clearable:"",outlined:"",ref_key:"searchTextField",ref:De},{prepend:I(()=>[q(ze,{name:"search"})]),_:1},8,["label","modelValue"])])]),q(ht),h.ajaxErrors?(R(),ve("div",_n,[q(st,{text:h.ajaxErrorMessage||"Error loading data","api-error":h.ajaxAPIErrorDetails},null,8,["text","api-error"])])):(R(),me(O(gn),{key:1,component:"q-list",items:G.value,onVirtualScroll:K,ref_key:"virtualListRef",ref:D,class:"q-virtual-scroll-container"},na({default:I(({item:r,index:t})=>[U("div",{class:Ke(["border-bottom-except-last-item",{"current-keyboard-selected-item":de.value===t}])},[(R(),me(Ge,{key:r.id,class:Ke(["transparent-background text-color-primary q-pa-sm",{"cursor-not-allowed is-current":r.id===d.value}]),clickable:r.id!==d.value,to:{name:"document",params:{id:r.id}}},{default:I(()=>[q(Oe,{side:"",class:"gt-sm"},{default:I(()=>[q(ze,{name:"work"})]),_:1}),q(Oe,null,{default:I(()=>[q(je,null,{default:I(()=>[re(F(r.title),1)]),_:2},1024),r.matchedOnFragment?(R(),me(je,{key:0,caption:""},{default:I(()=>[U("div",{innerHTML:r.matchedOnFragment},null,8,bn)]),_:2},1024)):Ce("",!0)]),_:2},1024),q(Oe,{side:"",top:""},{default:I(()=>[q(je,{caption:""},{default:I(()=>[re(" ("+F(r.updatedAt.timeAgo||r.createdAt.timeAgo)+") ",1),U("span",yn,F(r.updatedAt.dateTime||r.createdAt.dateTime),1)]),_:2},1024),q(Yt,{size:"md",square:"",class:"min-width-9em",count:r.attachmentCount,label:"Total attachments count","tool-tip":"View document attachments",disable:h.ajaxRunning,onClick:Ne(e=>O(Ma)(r.id,r.label),["stop","prevent"])},null,8,["count","disable","onClick"]),q(Yt,{size:"md",square:"",class:"min-width-9em",count:r.noteCount,label:"Total notes","tool-tip":"View document notes",disable:h.ajaxRunning,onClick:Ne(e=>O(Ta)(r.id,r.label),["stop","prevent"])},null,8,["count","disable","onClick"])]),_:2},1024)]),_:2},1032,["class","clickable","to"]))],2)]),_:2},[ye.value?{name:"before",fn:I(()=>[q(Ze,{warning:"",class:"q-ma-md",text:"Unfortunately, your search didn't return any results. You might want to modify your filters or search terms"})]),key:"0"}:void 0]),1032,["items"]))]),"actions-prepend":I(()=>[q(It),q(Ut,{modelValue:v.resultsPage,"onUpdate:modelValue":[_[4]||(_[4]=r=>v.resultsPage=r),y],filled:"",options:A,label:O(M)("Max results"),"stack-label":"",dense:"","options-dense":"",class:"q-mr-md",style:{"min-width":"12em"}},null,8,["modelValue","label"])]),_:1},8,["modelValue"]))}}),Sn=rt(xn,[["__scopeId","data-v-56f2fb79"]]),Cn={class:"q-mt-sm q-mb-md text-h4 text-weight-bolder"},An={class:"text-color-secondary"},kn=Ve({__name:"ReAuthDialog",emits:["close","success"],setup(o,{emit:j}){const{t:p}=Fe(),b=j,l=ue(!0),x=()=>{b("close")},d=()=>{b("success")};return(M,c)=>(R(),me(We,{modelValue:l.value,"onUpdate:modelValue":c[0]||(c[0]=V=>l.value=V),onClose:x,width:"512px","max-width":"80vw","hide-footer":"",persistent:""},{"header-left":I(()=>[re(F(O(p)("Session lost... re-auth required")),1)]),body:I(()=>[q(an,{"show-extra-bottom":!1,onSuccess:d},{slogan:I(()=>[U("h4",Cn,F(O(p)("Oooops")),1),U("div",An,F(O(p)("Please enter again your credentials")),1)]),_:1})]),_:1},8,["modelValue"]))}}),Dn={ratio:[String,Number]};function $n(o,j){return N(()=>{const p=Number(o.ratio||(j!==void 0?j.value:void 0));return isNaN(p)!==!0&&p>0?{paddingBottom:`${100/p}%`}:null})}const qn=1.7778,Pn=Je({name:"QImg",props:{...Dn,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:qn},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(o,{slots:j,emit:p}){const b=ue(o.initialRatio),l=$n(o,b),x=Tt(),{registerTimeout:d,removeTimeout:M}=Pt(),{registerTimeout:c,removeTimeout:V}=Pt(),h=N(()=>o.placeholderSrc!==void 0?{src:o.placeholderSrc}:null),Q=N(()=>o.errorSrc!==void 0?{src:o.errorSrc,__qerror:!0}:null),E=[ue(null),ue(h.value)],k=ue(0),D=ue(!1),v=ue(!1),A=N(()=>`q-img q-img--${o.noNativeMenu===!0?"no-":""}menu`),y=N(()=>({width:o.width,height:o.height})),S=N(()=>`q-img__image ${o.imgClass!==void 0?o.imgClass+" ":""}q-img__image--with${o.noTransition===!0?"out":""}-transition q-img__image--`),G=N(()=>({...o.imgStyle,objectFit:o.fit,objectPosition:o.position}));function de(){if(V(),o.loadingShowDelay===0){D.value=!0;return}c(()=>{D.value=!0},o.loadingShowDelay)}function ke(){V(),D.value=!1}function ye({target:ce}){Ct(x)===!1&&(M(),b.value=ce.naturalHeight===0?.5:ce.naturalWidth/ce.naturalHeight,De(ce,1))}function De(ce,_e){_e===1e3||Ct(x)===!0||(ce.complete===!0?z(ce):d(()=>{De(ce,_e+1)},50))}function z(ce){Ct(x)!==!0&&(k.value=k.value^1,E[k.value].value=null,ke(),ce.getAttribute("__qerror")!=="true"&&(v.value=!1),p("load",ce.currentSrc||ce.src))}function K(ce){M(),ke(),v.value=!0,E[k.value].value=Q.value,E[k.value^1].value=h.value,p("error",ce)}function xe(ce){const _e=E[ce].value,f={key:"img_"+ce,class:S.value,style:G.value,alt:o.alt,crossorigin:o.crossorigin,decoding:o.decoding,referrerpolicy:o.referrerpolicy,height:o.height,width:o.width,loading:o.loading,fetchpriority:o.fetchpriority,"aria-hidden":"true",draggable:o.draggable,..._e};return k.value===ce?Object.assign(f,{class:f.class+"current",onLoad:ye,onError:K}):f.class+="loaded",Se("div",{class:"q-img__container absolute-full",key:"img"+ce},Se("img",f))}function pe(){return D.value===!1?Se("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Et(j[v.value===!0?"error":"default"])):Se("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},j.loading!==void 0?j.loading():o.noSpinner===!0?void 0:[Se(Kt,{color:o.spinnerColor,size:o.spinnerSize})])}{let ce=function(){we(()=>o.src||o.srcset||o.sizes?{src:o.src,srcset:o.srcset,sizes:o.sizes}:null,_e=>{M(),v.value=!1,_e===null?(ke(),E[k.value^1].value=h.value):de(),E[k.value].value=_e},{immediate:!0})};_a.value===!0?Qe(ce):ce()}return()=>{const ce=[];return l.value!==null&&ce.push(Se("div",{key:"filler",style:l.value})),E[0].value!==null&&ce.push(xe(0)),E[1].value!==null&&ce.push(xe(1)),ce.push(Se(ba,{name:"q-transition--fade"},pe)),Se("div",{key:"main",class:A.value,style:y.value,role:"img","aria-label":o.alt},ce)}}}),at={visible:!1,success:!1,error:!1,text:null},Mn=["src"],Tn=Ve({__name:"PDFWrapper",props:{path:{},innerContentClass:{}},setup(o){return(j,p)=>(R(),ve("iframe",{id:"pdf-container",src:o.path,class:Ke(o.innerContentClass)},null,10,Mn))}}),En=rt(Tn,[["__scopeId","data-v-5a83bb82"]]),On={key:0},In={key:1},zn={class:"text-center text-bold q-my-md"},jn={class:"q-pt-none"},Bn={key:1},Vn={class:"text-center q-my-md"},Ln={controls:"",class:"q-mt-md full-width"},Fn=["src"],Rn={key:2,class:"pdf-container q-mx-auto q-mb-md"},Nn={key:3},Un={class:"text-center q-my-md"},Qn={key:4,class:"text-subtitle1 text-center"},Hn={class:"text-center q-my-md"},Yn=Ve({__name:"FilePreviewDialog",props:{document:{},currentIndex:{default:0}},emits:["close"],setup(o,{emit:j}){const{t:p}=Fe(),b=j,l=ue(!1),x=o,d=ue(!0),M=N(()=>x.document?.attachments?.length>0),c=N(()=>M.value?x.document?.attachments?.length:0),V=ue(x.currentIndex+1||1),h=N(()=>x.document.attachments.length>0&&V.value<=x.document.attachments.length?x.document.attachments[V.value-1]:{id:"",name:"",size:0,hash:"",humanSize:"",createdAt:new nt(p,null),orphaned:!0}),Q=()=>{b("close")},E=Te({...at}),k=on(),D=()=>{Object.assign(E,at),l.value=!1},v=()=>{l.value=!0,E.success=!1,E.error=!0,E.text=p("Error loading preview"),E.visible=!0},A=(y,S)=>{Object.assign(E,at),ia(ot(y),S).then(G=>{E.success=!0,E.text=p("FileDownloadedMessage",{filename:G.fileName,length:G.length})}).catch(()=>{E.error=!0,E.text=p("FileDownloadErrorMessage",{filename:S})}).finally(()=>{E.visible=!0})};return(y,S)=>{const G=it("router-link");return R(),me(We,{modelValue:d.value,"onUpdate:modelValue":S[2]||(S[2]=de=>d.value=de),onClose:Q,width:"1280px","max-width":"80vw"},na({"header-left":I(()=>[o.document.title?(R(),ve("div",On,[re(F(O(p)("Document title"))+": ",1),q(G,{to:{name:"document",params:{id:o.document.id}},class:"text-decoration-hover"},{default:I(()=>[re(F(o.document.title),1)]),_:1},8,["to"])])):(R(),ve("div",In,F(O(p)("Document attachments preview",{count:c.value})),1))]),"header-right":I(()=>[q(He,{size:"md",square:"",class:"gt-sm theme-default-q-chip shadow-1"},{default:I(()=>[q(Ye,{class:"theme-default-q-avatar"},{default:I(()=>[re(F(c.value),1)]),_:1}),re(" "+F(O(p)("Total attachments count",{count:c.value})),1)]),_:1})]),_:2},[h.value?{name:"body",fn:I(()=>[U("div",null,[U("p",zn,F(h.value.name)+" ("+F(h.value.humanSize)+")",1),c.value>1?(R(),me(nn,{key:0,class:"flex flex-center q-my-md",modelValue:V.value,"onUpdate:modelValue":[S[0]||(S[0]=de=>V.value=de),D],max:c.value,color:"dark","max-pages":5,"boundary-numbers":"","direction-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward",gutter:"md"},null,8,["modelValue","max"])):Ce("",!0)]),U("div",jn,[O(La)(h.value.name)?Me((R(),me(Pn,{key:0,src:O(At)(h.value.id,!0),loading:"lazy","spinner-color":"white",onError:v,alt:"image preview",fit:"scale-down",class:"q-img-max-height q-my-md","img-class":"q-mx-auto"},null,8,["src"])),[[Le,!l.value]]):O(Fa)(h.value.name)?(R(),ve("div",Bn,[U("p",Vn,[q(ze,{name:"audio_file",size:"128px"})]),U("audio",Ln,[U("source",{src:O(At)(h.value.id,!0),type:"audio/mpeg"},null,8,Fn),re(" "+F(O(p)("Your browser does not support the audio element")),1)])])):O(Ra)(h.value.name)?(R(),ve("div",Rn,[O(k).allowPDFPreviews?(R(),me(En,{key:0,path:O(At)(h.value.id,!0),"inner-content-class":"pdf-wrapper-inner-class"},null,8,["path"])):(R(),me(st,{key:1,text:O(p)("Missing browser PDF preview support")},null,8,["text"]))])):(R(),ve("div",Nn,[U("p",Un,[q(ze,{name:"hide_source",size:"128px"})])])),l.value?(R(),ve("div",Qn,[U("p",Hn,[q(ze,{name:"bug_report",size:"128px"})])])):Ce("",!0)])]),key:"0"}:void 0,h.value?{name:"actions-prepend",fn:I(()=>[E.visible?(R(),me(Ze,{key:0,success:E.success,error:E.error},{text:I(()=>[re(F(E.text),1)]),_:1},8,["success","error"])):O(ra)(h.value.name)?Ce("",!0):(R(),me(Ze,{key:1,warning:""},{text:I(()=>[re(F(O(p)("Attachment preview not available",{filename:h.value.name})),1)]),_:1})),q(It),q(Be,{color:"primary","no-caps":"",href:O(ot)(h.value.id,!0),label:O(p)("Download"),icon:"download",onClick:S[1]||(S[1]=Ne(de=>A(h.value.id,h.value.name),["stop","prevent","stop"])),"aria-label":"Download file"},null,8,["href","label"])]),key:"1"}:void 0]),1032,["modelValue"])}}}),Wn={key:0},Xn={key:1},Gn={class:"q-pt-none scroll attachments-scrolled-container"},Kn={key:0},Zn={key:1},Jn={key:2},eo={class:"row full-width"},to={class:"col-xl-10 col-lg-10 col-md-9 col-sm-12 col-xs-12"},ao={class:"text-weight-bold"},no={class:"text-weight-bold"},oo={class:"text-weight-bold"},io={class:"col-xl-2 col-lg-2 col-md-3 col-sm-12 col-xs-12"},ro=Ve({__name:"DocumentFilesPreviewDialog",props:{documentId:{},documentTitle:{}},emits:["close"],setup(o,{emit:j}){const{t:p}=Fe(),b=o,l=j,x=ue(!0),d=Te({...Ie}),M=Te([]),c=N(()=>M?.length>0),V=D=>{le.emit("showDocumentFilePreviewDialog",{document:{id:b.documentId,title:b.documentTitle,attachments:M},currentIndex:D})},h=Te({...at}),Q=(D,v)=>{Object.assign(h,at),ia(ot(D),v).then(A=>{h.success=!0,h.text=p("FileDownloadedMessage",{filename:A.fileName,length:pt.humanStorageSize(A.length)})}).catch(()=>{h.error=!0,h.text=p("FileDownloadeErrorMessage",{filename:v})}).finally(()=>{h.visible=!0})},E=D=>{d.ajaxRunning||(Object.assign(d,Ie),d.ajaxRunning=!0,Re.document.getAttachments(D).then(v=>{M.length=0,M.push(...v.data.attachments.map(A=>new Na(A.id,A.name,A.hash,A.size,new nt(p,A.createdAtTimestamp),!1,A.shared)))}).catch(v=>{if(d.ajaxErrors=!0,v.isAPIError)switch(d.ajaxAPIErrorDetails=v.customAPIErrorDetails,v.response.status){case 401:d.ajaxErrors=!1,le.emit("reAuthRequired",{emitter:"DocumentFilesPreviewDialog"});break;default:d.ajaxErrorMessage="API Error: fatal error";break}else d.ajaxErrorMessage=`Uncaught exception: ${v}`,console.error(v)}).finally(()=>{d.ajaxRunning=!1}))},k=()=>{l("close")};return Qe(()=>{E(b.documentId),le.on("reAuthSucess",D=>{D.to?.includes("DocumentFilesPreviewDialog")&&E(b.documentId)})}),Ue(()=>{le.off("reAuthSucess")}),(D,v)=>{const A=it("router-link");return R(),me(We,{modelValue:x.value,"onUpdate:modelValue":v[0]||(v[0]=y=>x.value=y),onClose:k,width:"1280px","max-width":"80vw"},{"header-left":I(()=>[o.documentTitle?(R(),ve("div",Wn,[re(F(O(p)("Document title"))+": ",1),q(A,{to:{name:"document",params:{id:o.documentId}},class:"text-decoration-hover"},{default:I(()=>[re(F(o.documentTitle),1)]),_:1},8,["to"])])):(R(),ve("div",Xn,F(O(p)("Document attachments")),1))]),"header-right":I(()=>[!d.ajaxRunning&&!d.ajaxErrors?(R(),me(He,{key:0,size:"md",square:"",class:"gt-sm theme-default-q-chip shadow-1"},{default:I(()=>[q(Ye,{class:"theme-default-q-avatar"},{default:I(()=>[re(F(M.length),1)]),_:1}),re(" "+F(O(p)("Total attachments count",{count:M.length})),1)]),_:1})):Ce("",!0)]),body:I(()=>[U("div",Gn,[d.ajaxRunning?(R(),ve("div",Kn)):d.ajaxErrors?(R(),ve("div",Zn,[q(st,{text:d.ajaxErrorMessage||"Error loading data","api-error":d.ajaxAPIErrorDetails},null,8,["text","api-error"])])):c.value?(R(),me(Ot,{key:3},{default:I(()=>[(R(!0),ve(_t,null,wt(M,(y,S)=>(R(),ve("div",{key:y.id,class:"border-bottom-except-last-item"},[q(Ge,{class:"transparent-background text-color-primary q-pa-sm cursor-default",clickable:""},{default:I(()=>[q(Oe,null,{default:I(()=>[U("div",eo,[U("div",to,[q(je,null,{default:I(()=>[U("span",ao,F(O(p)("Name"))+":",1),re(" "+F(y.name),1)]),_:2},1024),q(je,null,{default:I(()=>[U("span",no,F(O(p)("Size"))+":",1),re(" "+F(y.humanSize),1)]),_:2},1024),q(je,null,{default:I(()=>[U("span",oo,F(O(p)("Uploaded on"))+":",1),re(" "+F(y.createdAt.dateTime)+" ("+F(y.createdAt.timeAgo)+")",1)]),_:2},1024)]),U("div",io,[q(Be,{align:"left",size:"md",color:"primary",class:"q-mt-sm full-width",disable:d.ajaxRunning,icon:"save",label:O(p)("Download"),"no-caps":"",onClick:Ne(G=>Q(y.id,y.name),["stop","prevent"]),href:O(ot)(y.id,!0)},null,8,["disable","label","onClick","href"]),O(ra)(y.name)?(R(),me(Be,{key:0,align:"left",size:"md",color:"primary",class:"q-mt-sm full-width",disable:d.ajaxRunning,icon:"preview",label:O(p)("Preview"),"no-caps":"",onClick:Ne(G=>V(S),["stop","prevent"])},null,8,["disable","label","onClick"])):Ce("",!0)])])]),_:2},1024)]),_:2},1024)]))),128))]),_:1})):(R(),ve("div",Jn,[q(Ze,{warning:"",text:"This document has no associated attachments."})]))])]),"actions-prepend":I(()=>[h.visible?(R(),me(Ze,{key:0,success:h.success,error:h.error},{text:I(()=>[re(F(h.text),1)]),_:1},8,["success","error"])):Ce("",!0),q(It)]),_:1},8,["modelValue"])}}}),so=rt(ro,[["__scopeId","data-v-de3ae55e"]]),lo={key:0},uo={key:1},co={class:"q-pt-none scroll notes-scrolled-container"},ho={key:0},mo={key:1},fo={key:2},go={key:3},vo={class:"note-date-label"},po=Ve({__name:"DocumentNotesPreviewDialog",props:{documentId:{},documentTitle:{},maxLines:{default:2}},emits:["close"],setup(o,{emit:j}){const{t:p}=Fe(),b=o,l=j,x=ue(!0),d=Te({...Ie}),M=Te([]),c=N(()=>M?.length>0),V=Q=>{d.ajaxRunning||(Object.assign(d,Ie),d.ajaxRunning=!0,Re.document.getNotes(Q).then(E=>{M.length=0,M.push(...E.data.notes.map(k=>new Ua(k.id,k.body,new nt(p,k.createdAtTimestamp),!1,!1)))}).catch(E=>{if(d.ajaxErrors=!0,E.isAPIError)switch(d.ajaxAPIErrorDetails=E.customAPIErrorDetails,E.response.status){case 401:d.ajaxErrors=!1,le.emit("reAuthRequired",{emitter:"DocumentNotesPreviewDialog"});break;default:d.ajaxErrorMessage="API Error: fatal error";break}else d.ajaxErrorMessage=`Uncaught exception: ${E}`,console.error(E)}).finally(()=>{d.ajaxRunning=!1}))},h=()=>{l("close")};return Qe(()=>{V(b.documentId),le.on("reAuthSucess",Q=>{Q.to?.includes("DocumentNotesPreviewDialog")&&V(b.documentId)})}),Ue(()=>{le.off("reAuthSucess")}),(Q,E)=>{const k=it("router-link");return R(),me(We,{modelValue:x.value,"onUpdate:modelValue":E[0]||(E[0]=D=>x.value=D),onClose:h,width:"1280px","max-width":"80vw"},{"header-left":I(()=>[o.documentTitle?(R(),ve("div",lo,[re(F(O(p)("Document title"))+": ",1),q(k,{to:{name:"document",params:{id:o.documentId}},class:"text-decoration-hover"},{default:I(()=>[re(F(o.documentTitle),1)]),_:1},8,["to"])])):(R(),ve("div",uo,F(O(p)("Document notes")),1))]),"header-right":I(()=>[!d.ajaxRunning&&!d.ajaxErrors?(R(),me(He,{key:0,size:"md",square:"",class:"gt-sm theme-default-q-chip shadow-1"},{default:I(()=>[q(Ye,{class:"theme-default-q-avatar"},{default:I(()=>[re(F(M.length),1)]),_:1}),re(" "+F(O(p)("Total notes",{count:M.length})),1)]),_:1})):Ce("",!0)]),body:I(()=>[U("div",co,[d.ajaxRunning?(R(),ve("div",ho)):d.ajaxErrors?(R(),ve("div",mo,[q(st,{text:d.ajaxErrorMessage||"Error loading data","api-error":d.ajaxAPIErrorDetails},null,8,["text","api-error"])])):c.value?(R(),ve("div",go,[(R(!0),ve(_t,null,wt(M,D=>(R(),ve("div",{key:D.id,class:"q-pa-sm relative-position white-space-pre-line border-bottom-except-last-item"},[U("div",vo,F(D.createdAt.dateTime)+" ("+F(D.createdAt.timeAgo)+")",1),q(ze,{name:D.expanded?"unfold_less":"expand",size:"sm",class:"absolute-top-right text-grey cursor-pointer q-mr-sm q-mt-sm",color:"blue",onClick:Ne(v=>D.expanded=!D.expanded,["stop"])},{default:I(()=>[q(qt,null,{default:I(()=>[re(F(O(p)(D.expanded?"Click to collapse":"Click to expand")),1)]),_:2},1024)]),_:2},1032,["name","onClick"]),U("div",{class:Ke(["q-mt-sm",{collapsed:!D.expanded}]),style:ya(`--max-lines: ${o.maxLines}`)},F(D.body),7)]))),128))])):(R(),ve("div",fo,[q(Ze,{warning:"",text:"This document has no associated notes."})]))])]),_:1},8,["modelValue"])}}}),wo=rt(po,[["__scopeId","data-v-b0c1ddbb"]]),_o={class:"q-p-none q-markup-table-container scroll"},bo={class:"text-left"},yo={class:"text-right"},xo={class:"text-right"},So={class:"text-right"},Co={class:"text-center"},Ao={class:"text-left"},ko={class:"text-right"},Do={class:"text-right"},$o={class:"text-right"},qo={key:0},Po={class:"text-center"},Mo=Ve({__name:"UploadingDialog",props:{modelValue:{type:Boolean},transfers:{}},emits:["update:modelValue","close","clearProcessedTransfers"],setup(o,{emit:j}){const{t:p}=Fe(),b=rn(),l=bt(),x=j,d=o,M=N(()=>d.transfers?.length>0),c=N({get(){return d.modelValue},set(v){if(v){const A=l.openUploadDialog;A!==h.value&&(h.value=A)}x("update:modelValue",v)}}),V=N(()=>d.transfers.length>0?d.transfers.find(v=>v.processed===!0)!==void 0:!1),h=ue(l.openUploadDialog);we(()=>c.value,v=>{v&&(h.value=l.openUploadDialog)});const Q=v=>{l.setOpenUploadDialog(v)},E=N(()=>h.value?"Always display this progress window when uploading files":"Only display this progress window when uploading failed"),k=()=>{c.value=!1,x("update:modelValue",!1)},D=()=>{x("clearProcessedTransfers")};return(v,A)=>(R(),me(We,{modelValue:c.value,"onUpdate:modelValue":A[1]||(A[1]=y=>c.value=y),onClose:k,width:"1280px","max-width":"80vw"},{"header-left":I(()=>[re(F(O(p)("File upload activity & status")),1)]),body:I(()=>[U("div",_o,[M.value?(R(),me(sa,{key:0},{default:I(()=>[U("thead",null,[U("tr",null,[U("th",bo,F(O(p)("Name")),1),U("th",yo,F(O(p)("Size")),1),U("th",xo,F(O(p)("Started")),1),U("th",So,F(O(p)("End")),1),U("th",Co,F(O(p)("Status")),1)])]),U("tbody",null,[(R(!0),ve(_t,null,wt(o.transfers,y=>(R(),ve("tr",{key:y.id,class:Ke(["text-white",{"bg-green-5":y.done,"bg-red-4":y.error,"bg-light-blue":y.uploading}])},[U("td",Ao,F(y.filename),1),U("td",ko,F(O(pt).humanStorageSize(y.filesize)),1),U("td",Do,F(O(vt)(y.start,O(l).savedDateTimeFormat)),1),U("td",$o,[y.end&&y.end>0?(R(),ve("span",qo,F(O(vt)(y.end,O(l).savedDateTimeFormat)),1)):Ce("",!0)]),U("td",Po,[y.error?(R(),me(He,{key:0,square:"",class:"full-width bg-red-9 text-white"},{default:I(()=>[q(Ye,{icon:"cancel",class:"q-ma-xs"}),re(" "+F(y.errorHTTPCode==413?O(p)("Transfer rejected max filesize",{maxUploadFileSize:O(pt).humanStorageSize(O(b).maxUploadFileSize)}):O(p)(y.errorMessage||"Error")),1)]),_:2},1024)):y.done?(R(),me(He,{key:1,square:"",class:"full-width bg-green-9 text-white"},{default:I(()=>[q(Ye,{icon:"check",class:"q-ma-xs"}),re(" "+F(O(p)("Transfer complete")),1)]),_:1})):y.uploading?(R(),me(He,{key:2,square:"",class:"full-width bg-light-blue-9 text-white"},{default:I(()=>[q(Kt,{size:"sm",class:"q-ma-xs"}),re(" "+F(O(p)("Transfering...")),1)]),_:1})):Ce("",!0)])],2))),128))])]),_:1})):Ce("",!0)])]),"actions-prepend":I(()=>[q(mt,{modelValue:h.value,"onUpdate:modelValue":[A[0]||(A[0]=y=>h.value=y),Q],"checked-icon":"check",color:"green",label:O(p)(E.value),"unchecked-icon":"clear",class:"q-mr-md"},null,8,["modelValue","label"]),q(Be,{color:"primary",size:"md","no-caps":"",onClick:Ne(D,["stop"]),disable:!V.value,icon:"close",label:O(p)("Clear processed transfers")},null,8,["disable","label"])]),_:1},8,["modelValue"]))}}),To=rt(Mo,[["__scopeId","data-v-4e87395a"]]),Eo=Je({name:"QBtnToggle",props:{...Ha,modelValue:{required:!0},options:{type:Array,required:!0,validator:o=>o.every(j=>("label"in j||"icon"in j||"slot"in j)&&"value"in j)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(o,{slots:j,emit:p}){const b=N(()=>o.options.find(E=>E.value===o.modelValue)!==void 0),l=N(()=>({type:"hidden",name:o.name,value:o.modelValue})),x=Ya(l),d=N(()=>la(o)),M=N(()=>({rounded:o.rounded,dense:o.dense,...d.value})),c=N(()=>o.options.map((E,k)=>{const{attrs:D,value:v,slot:A,...y}=E;return{slot:A,props:{key:k,"aria-pressed":v===o.modelValue?"true":"false",...D,...y,...M.value,disable:o.disable===!0||y.disable===!0,color:v===o.modelValue?h(y,"toggleColor"):h(y,"color"),textColor:v===o.modelValue?h(y,"toggleTextColor"):h(y,"textColor"),noCaps:h(y,"noCaps")===!0,noWrap:h(y,"noWrap")===!0,size:h(y,"size"),padding:h(y,"padding"),ripple:h(y,"ripple"),stack:h(y,"stack")===!0,stretch:h(y,"stretch")===!0,onClick(S){V(v,E,S)}}}}));function V(E,k,D){o.readonly!==!0&&(o.modelValue===E?o.clearable===!0&&(p("update:modelValue",null,null),p("clear")):p("update:modelValue",E,k),p("click",D))}function h(E,k){return E[k]===void 0?o[k]:E[k]}function Q(){const E=c.value.map(k=>Se(Be,k.props,k.slot!==void 0?j[k.slot]:void 0));return o.name!==void 0&&o.disable!==!0&&b.value===!0&&x(E,"push"),oa(j.default,E)}return()=>Se(Zt,{class:"q-btn-toggle",...d.value,rounded:o.rounded,stretch:o.stretch,glossy:o.glossy,spread:o.spread},Q)}});function Oo(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var ft={exports:{}},Io=ft.exports,Xt;function zo(){return Xt||(Xt=1,(function(o,j){(function(p,b){o.exports=b()})(Io,(()=>(()=>{var p={873:(d,M)=>{var c,V,h=(function(){var Q=function(f,_){var r=f,t=y[_],e=null,n=0,i=null,a=[],m={},T=function(s,g){e=(function(u){for(var w=new Array(u),C=0;C<u;C+=1){w[C]=new Array(u);for(var W=0;W<u;W+=1)w[C][W]=null}return w})(n=4*r+17),$(0,0),$(n-7,0),$(0,n-7),B(),H(),L(s,g),r>=7&&Y(s),i==null&&(i=oe(r,t,a)),Z(i,g)},$=function(s,g){for(var u=-1;u<=7;u+=1)if(!(s+u<=-1||n<=s+u))for(var w=-1;w<=7;w+=1)g+w<=-1||n<=g+w||(e[s+u][g+w]=0<=u&&u<=6&&(w==0||w==6)||0<=w&&w<=6&&(u==0||u==6)||2<=u&&u<=4&&2<=w&&w<=4)},H=function(){for(var s=8;s<n-8;s+=1)e[s][6]==null&&(e[s][6]=s%2==0);for(var g=8;g<n-8;g+=1)e[6][g]==null&&(e[6][g]=g%2==0)},B=function(){for(var s=S.getPatternPosition(r),g=0;g<s.length;g+=1)for(var u=0;u<s.length;u+=1){var w=s[g],C=s[u];if(e[w][C]==null)for(var W=-2;W<=2;W+=1)for(var te=-2;te<=2;te+=1)e[w+W][C+te]=W==-2||W==2||te==-2||te==2||W==0&&te==0}},Y=function(s){for(var g=S.getBCHTypeNumber(r),u=0;u<18;u+=1){var w=!s&&(g>>u&1)==1;e[Math.floor(u/3)][u%3+n-8-3]=w}for(u=0;u<18;u+=1)w=!s&&(g>>u&1)==1,e[u%3+n-8-3][Math.floor(u/3)]=w},L=function(s,g){for(var u=t<<3|g,w=S.getBCHTypeInfo(u),C=0;C<15;C+=1){var W=!s&&(w>>C&1)==1;C<6?e[C][8]=W:C<8?e[C+1][8]=W:e[n-15+C][8]=W}for(C=0;C<15;C+=1)W=!s&&(w>>C&1)==1,C<8?e[8][n-C-1]=W:C<9?e[8][15-C-1+1]=W:e[8][15-C-1]=W;e[n-8][8]=!s},Z=function(s,g){for(var u=-1,w=n-1,C=7,W=0,te=S.getMaskFunction(g),ae=n-1;ae>0;ae-=2)for(ae==6&&(ae-=1);;){for(var se=0;se<2;se+=1)if(e[w][ae-se]==null){var fe=!1;W<s.length&&(fe=(s[W]>>>C&1)==1),te(w,ae-se)&&(fe=!fe),e[w][ae-se]=fe,(C-=1)==-1&&(W+=1,C=7)}if((w+=u)<0||n<=w){w-=u,u=-u;break}}},oe=function(s,g,u){for(var w=ke.getRSBlocks(s,g),C=ye(),W=0;W<u.length;W+=1){var te=u[W];C.put(te.getMode(),4),C.put(te.getLength(),S.getLengthInBits(te.getMode(),s)),te.write(C)}var ae=0;for(W=0;W<w.length;W+=1)ae+=w[W].dataCount;if(C.getLengthInBits()>8*ae)throw"code length overflow. ("+C.getLengthInBits()+">"+8*ae+")";for(C.getLengthInBits()+4<=8*ae&&C.put(0,4);C.getLengthInBits()%8!=0;)C.putBit(!1);for(;!(C.getLengthInBits()>=8*ae||(C.put(236,8),C.getLengthInBits()>=8*ae));)C.put(17,8);return(function(se,fe){for(var ge=0,P=0,X=0,ie=new Array(fe.length),he=new Array(fe.length),ee=0;ee<fe.length;ee+=1){var be=fe[ee].dataCount,Ae=fe[ee].totalCount-be;P=Math.max(P,be),X=Math.max(X,Ae),ie[ee]=new Array(be);for(var ne=0;ne<ie[ee].length;ne+=1)ie[ee][ne]=255&se.getBuffer()[ne+ge];ge+=be;var Pe=S.getErrorCorrectPolynomial(Ae),qe=de(ie[ee],Pe.getLength()-1).mod(Pe);for(he[ee]=new Array(Pe.getLength()-1),ne=0;ne<he[ee].length;ne+=1){var $e=ne+qe.getLength()-he[ee].length;he[ee][ne]=$e>=0?qe.getAt($e):0}}var lt=0;for(ne=0;ne<fe.length;ne+=1)lt+=fe[ne].totalCount;var et=new Array(lt),Ee=0;for(ne=0;ne<P;ne+=1)for(ee=0;ee<fe.length;ee+=1)ne<ie[ee].length&&(et[Ee]=ie[ee][ne],Ee+=1);for(ne=0;ne<X;ne+=1)for(ee=0;ee<fe.length;ee+=1)ne<he[ee].length&&(et[Ee]=he[ee][ne],Ee+=1);return et})(C,w)};m.addData=function(s,g){var u=null;switch(g=g||"Byte"){case"Numeric":u=De(s);break;case"Alphanumeric":u=z(s);break;case"Byte":u=K(s);break;case"Kanji":u=xe(s);break;default:throw"mode:"+g}a.push(u),i=null},m.isDark=function(s,g){if(s<0||n<=s||g<0||n<=g)throw s+","+g;return e[s][g]},m.getModuleCount=function(){return n},m.make=function(){if(r<1){for(var s=1;s<40;s++){for(var g=ke.getRSBlocks(s,t),u=ye(),w=0;w<a.length;w++){var C=a[w];u.put(C.getMode(),4),u.put(C.getLength(),S.getLengthInBits(C.getMode(),s)),C.write(u)}var W=0;for(w=0;w<g.length;w++)W+=g[w].dataCount;if(u.getLengthInBits()<=8*W)break}r=s}T(!1,(function(){for(var te=0,ae=0,se=0;se<8;se+=1){T(!0,se);var fe=S.getLostPoint(m);(se==0||te>fe)&&(te=fe,ae=se)}return ae})())},m.createTableTag=function(s,g){s=s||2;var u="";u+='<table style="',u+=" border-width: 0px; border-style: none;",u+=" border-collapse: collapse;",u+=" padding: 0px; margin: "+(g=g===void 0?4*s:g)+"px;",u+='">',u+="<tbody>";for(var w=0;w<m.getModuleCount();w+=1){u+="<tr>";for(var C=0;C<m.getModuleCount();C+=1)u+='<td style="',u+=" border-width: 0px; border-style: none;",u+=" border-collapse: collapse;",u+=" padding: 0px; margin: 0px;",u+=" width: "+s+"px;",u+=" height: "+s+"px;",u+=" background-color: ",u+=m.isDark(w,C)?"#000000":"#ffffff",u+=";",u+='"/>';u+="</tr>"}return(u+="</tbody>")+"</table>"},m.createSvgTag=function(s,g,u,w){var C={};typeof arguments[0]=="object"&&(s=(C=arguments[0]).cellSize,g=C.margin,u=C.alt,w=C.title),s=s||2,g=g===void 0?4*s:g,(u=typeof u=="string"?{text:u}:u||{}).text=u.text||null,u.id=u.text?u.id||"qrcode-description":null,(w=typeof w=="string"?{text:w}:w||{}).text=w.text||null,w.id=w.text?w.id||"qrcode-title":null;var W,te,ae,se,fe=m.getModuleCount()*s+2*g,ge="";for(se="l"+s+",0 0,"+s+" -"+s+",0 0,-"+s+"z ",ge+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',ge+=C.scalable?"":' width="'+fe+'px" height="'+fe+'px"',ge+=' viewBox="0 0 '+fe+" "+fe+'" ',ge+=' preserveAspectRatio="xMinYMin meet"',ge+=w.text||u.text?' role="img" aria-labelledby="'+J([w.id,u.id].join(" ").trim())+'"':"",ge+=">",ge+=w.text?'<title id="'+J(w.id)+'">'+J(w.text)+"</title>":"",ge+=u.text?'<description id="'+J(u.id)+'">'+J(u.text)+"</description>":"",ge+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',ge+='<path d="',te=0;te<m.getModuleCount();te+=1)for(ae=te*s+g,W=0;W<m.getModuleCount();W+=1)m.isDark(te,W)&&(ge+="M"+(W*s+g)+","+ae+se);return(ge+='" stroke="transparent" fill="black"/>')+"</svg>"},m.createDataURL=function(s,g){s=s||2,g=g===void 0?4*s:g;var u=m.getModuleCount()*s+2*g,w=g,C=u-g;return _e(u,u,(function(W,te){if(w<=W&&W<C&&w<=te&&te<C){var ae=Math.floor((W-w)/s),se=Math.floor((te-w)/s);return m.isDark(se,ae)?0:1}return 1}))},m.createImgTag=function(s,g,u){s=s||2,g=g===void 0?4*s:g;var w=m.getModuleCount()*s+2*g,C="";return C+="<img",C+=' src="',C+=m.createDataURL(s,g),C+='"',C+=' width="',C+=w,C+='"',C+=' height="',C+=w,C+='"',u&&(C+=' alt="',C+=J(u),C+='"'),C+"/>"};var J=function(s){for(var g="",u=0;u<s.length;u+=1){var w=s.charAt(u);switch(w){case"<":g+="&lt;";break;case">":g+="&gt;";break;case"&":g+="&amp;";break;case'"':g+="&quot;";break;default:g+=w}}return g};return m.createASCII=function(s,g){if((s=s||1)<2)return(function(ie){ie=ie===void 0?2:ie;var he,ee,be,Ae,ne,Pe=1*m.getModuleCount()+2*ie,qe=ie,$e=Pe-ie,lt={"":""," ":""," ":"","  ":" "},et={"":""," ":""," ":" ","  ":" "},Ee="";for(he=0;he<Pe;he+=2){for(be=Math.floor((he-qe)/1),Ae=Math.floor((he+1-qe)/1),ee=0;ee<Pe;ee+=1)ne="",qe<=ee&&ee<$e&&qe<=he&&he<$e&&m.isDark(be,Math.floor((ee-qe)/1))&&(ne=" "),qe<=ee&&ee<$e&&qe<=he+1&&he+1<$e&&m.isDark(Ae,Math.floor((ee-qe)/1))?ne+=" ":ne+="",Ee+=ie<1&&he+1>=$e?et[ne]:lt[ne];Ee+=`
`}return Pe%2&&ie>0?Ee.substring(0,Ee.length-Pe-1)+Array(Pe+1).join(""):Ee.substring(0,Ee.length-1)})(g);s-=1,g=g===void 0?2*s:g;var u,w,C,W,te=m.getModuleCount()*s+2*g,ae=g,se=te-g,fe=Array(s+1).join(""),ge=Array(s+1).join("  "),P="",X="";for(u=0;u<te;u+=1){for(C=Math.floor((u-ae)/s),X="",w=0;w<te;w+=1)W=1,ae<=w&&w<se&&ae<=u&&u<se&&m.isDark(C,Math.floor((w-ae)/s))&&(W=0),X+=W?fe:ge;for(C=0;C<s;C+=1)P+=X+`
`}return P.substring(0,P.length-1)},m.renderTo2dContext=function(s,g){g=g||2;for(var u=m.getModuleCount(),w=0;w<u;w++)for(var C=0;C<u;C++)s.fillStyle=m.isDark(w,C)?"black":"white",s.fillRect(w*g,C*g,g,g)},m};Q.stringToBytes=(Q.stringToBytesFuncs={default:function(f){for(var _=[],r=0;r<f.length;r+=1){var t=f.charCodeAt(r);_.push(255&t)}return _}}).default,Q.createStringToBytes=function(f,_){var r=(function(){for(var e=ce(f),n=function(){var H=e.read();if(H==-1)throw"eof";return H},i=0,a={};;){var m=e.read();if(m==-1)break;var T=n(),$=n()<<8|n();a[String.fromCharCode(m<<8|T)]=$,i+=1}if(i!=_)throw i+" != "+_;return a})(),t=63;return function(e){for(var n=[],i=0;i<e.length;i+=1){var a=e.charCodeAt(i);if(a<128)n.push(a);else{var m=r[e.charAt(i)];typeof m=="number"?(255&m)==m?n.push(m):(n.push(m>>>8),n.push(255&m)):n.push(t)}}return n}};var E,k,D,v,A,y={L:1,M:0,Q:3,H:2},S=(E=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],k=1335,D=7973,A=function(f){for(var _=0;f!=0;)_+=1,f>>>=1;return _},(v={}).getBCHTypeInfo=function(f){for(var _=f<<10;A(_)-A(k)>=0;)_^=k<<A(_)-A(k);return 21522^(f<<10|_)},v.getBCHTypeNumber=function(f){for(var _=f<<12;A(_)-A(D)>=0;)_^=D<<A(_)-A(D);return f<<12|_},v.getPatternPosition=function(f){return E[f-1]},v.getMaskFunction=function(f){switch(f){case 0:return function(_,r){return(_+r)%2==0};case 1:return function(_,r){return _%2==0};case 2:return function(_,r){return r%3==0};case 3:return function(_,r){return(_+r)%3==0};case 4:return function(_,r){return(Math.floor(_/2)+Math.floor(r/3))%2==0};case 5:return function(_,r){return _*r%2+_*r%3==0};case 6:return function(_,r){return(_*r%2+_*r%3)%2==0};case 7:return function(_,r){return(_*r%3+(_+r)%2)%2==0};default:throw"bad maskPattern:"+f}},v.getErrorCorrectPolynomial=function(f){for(var _=de([1],0),r=0;r<f;r+=1)_=_.multiply(de([1,G.gexp(r)],0));return _},v.getLengthInBits=function(f,_){if(1<=_&&_<10)switch(f){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+f}else if(_<27)switch(f){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+f}else{if(!(_<41))throw"type:"+_;switch(f){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+f}}},v.getLostPoint=function(f){for(var _=f.getModuleCount(),r=0,t=0;t<_;t+=1)for(var e=0;e<_;e+=1){for(var n=0,i=f.isDark(t,e),a=-1;a<=1;a+=1)if(!(t+a<0||_<=t+a))for(var m=-1;m<=1;m+=1)e+m<0||_<=e+m||a==0&&m==0||i==f.isDark(t+a,e+m)&&(n+=1);n>5&&(r+=3+n-5)}for(t=0;t<_-1;t+=1)for(e=0;e<_-1;e+=1){var T=0;f.isDark(t,e)&&(T+=1),f.isDark(t+1,e)&&(T+=1),f.isDark(t,e+1)&&(T+=1),f.isDark(t+1,e+1)&&(T+=1),T!=0&&T!=4||(r+=3)}for(t=0;t<_;t+=1)for(e=0;e<_-6;e+=1)f.isDark(t,e)&&!f.isDark(t,e+1)&&f.isDark(t,e+2)&&f.isDark(t,e+3)&&f.isDark(t,e+4)&&!f.isDark(t,e+5)&&f.isDark(t,e+6)&&(r+=40);for(e=0;e<_;e+=1)for(t=0;t<_-6;t+=1)f.isDark(t,e)&&!f.isDark(t+1,e)&&f.isDark(t+2,e)&&f.isDark(t+3,e)&&f.isDark(t+4,e)&&!f.isDark(t+5,e)&&f.isDark(t+6,e)&&(r+=40);var $=0;for(e=0;e<_;e+=1)for(t=0;t<_;t+=1)f.isDark(t,e)&&($+=1);return r+Math.abs(100*$/_/_-50)/5*10},v),G=(function(){for(var f=new Array(256),_=new Array(256),r=0;r<8;r+=1)f[r]=1<<r;for(r=8;r<256;r+=1)f[r]=f[r-4]^f[r-5]^f[r-6]^f[r-8];for(r=0;r<255;r+=1)_[f[r]]=r;return{glog:function(t){if(t<1)throw"glog("+t+")";return _[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return f[t]}}})();function de(f,_){if(f.length===void 0)throw f.length+"/"+_;var r=(function(){for(var e=0;e<f.length&&f[e]==0;)e+=1;for(var n=new Array(f.length-e+_),i=0;i<f.length-e;i+=1)n[i]=f[i+e];return n})(),t={getAt:function(e){return r[e]},getLength:function(){return r.length},multiply:function(e){for(var n=new Array(t.getLength()+e.getLength()-1),i=0;i<t.getLength();i+=1)for(var a=0;a<e.getLength();a+=1)n[i+a]^=G.gexp(G.glog(t.getAt(i))+G.glog(e.getAt(a)));return de(n,0)},mod:function(e){if(t.getLength()-e.getLength()<0)return t;for(var n=G.glog(t.getAt(0))-G.glog(e.getAt(0)),i=new Array(t.getLength()),a=0;a<t.getLength();a+=1)i[a]=t.getAt(a);for(a=0;a<e.getLength();a+=1)i[a]^=G.gexp(G.glog(e.getAt(a))+n);return de(i,0).mod(e)}};return t}var ke=(function(){var f=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],_=function(t,e){var n={};return n.totalCount=t,n.dataCount=e,n},r={getRSBlocks:function(t,e){var n=(function(Y,L){switch(L){case y.L:return f[4*(Y-1)+0];case y.M:return f[4*(Y-1)+1];case y.Q:return f[4*(Y-1)+2];case y.H:return f[4*(Y-1)+3];default:return}})(t,e);if(n===void 0)throw"bad rs block @ typeNumber:"+t+"/errorCorrectionLevel:"+e;for(var i=n.length/3,a=[],m=0;m<i;m+=1)for(var T=n[3*m+0],$=n[3*m+1],H=n[3*m+2],B=0;B<T;B+=1)a.push(_($,H));return a}};return r})(),ye=function(){var f=[],_=0,r={getBuffer:function(){return f},getAt:function(t){var e=Math.floor(t/8);return(f[e]>>>7-t%8&1)==1},put:function(t,e){for(var n=0;n<e;n+=1)r.putBit((t>>>e-n-1&1)==1)},getLengthInBits:function(){return _},putBit:function(t){var e=Math.floor(_/8);f.length<=e&&f.push(0),t&&(f[e]|=128>>>_%8),_+=1}};return r},De=function(f){var _=f,r={getMode:function(){return 1},getLength:function(n){return _.length},write:function(n){for(var i=_,a=0;a+2<i.length;)n.put(t(i.substring(a,a+3)),10),a+=3;a<i.length&&(i.length-a==1?n.put(t(i.substring(a,a+1)),4):i.length-a==2&&n.put(t(i.substring(a,a+2)),7))}},t=function(n){for(var i=0,a=0;a<n.length;a+=1)i=10*i+e(n.charAt(a));return i},e=function(n){if("0"<=n&&n<="9")return n.charCodeAt(0)-48;throw"illegal char :"+n};return r},z=function(f){var _=f,r={getMode:function(){return 2},getLength:function(e){return _.length},write:function(e){for(var n=_,i=0;i+1<n.length;)e.put(45*t(n.charAt(i))+t(n.charAt(i+1)),11),i+=2;i<n.length&&e.put(t(n.charAt(i)),6)}},t=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-48;if("A"<=e&&e<="Z")return e.charCodeAt(0)-65+10;switch(e){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+e}};return r},K=function(f){var _=Q.stringToBytes(f);return{getMode:function(){return 4},getLength:function(r){return _.length},write:function(r){for(var t=0;t<_.length;t+=1)r.put(_[t],8)}}},xe=function(f){var _=Q.stringToBytesFuncs.SJIS;if(!_)throw"sjis not supported.";(function(){var e=_("");if(e.length!=2||(e[0]<<8|e[1])!=38726)throw"sjis not supported."})();var r=_(f),t={getMode:function(){return 8},getLength:function(e){return~~(r.length/2)},write:function(e){for(var n=r,i=0;i+1<n.length;){var a=(255&n[i])<<8|255&n[i+1];if(33088<=a&&a<=40956)a-=33088;else{if(!(57408<=a&&a<=60351))throw"illegal char at "+(i+1)+"/"+a;a-=49472}a=192*(a>>>8&255)+(255&a),e.put(a,13),i+=2}if(i<n.length)throw"illegal char at "+(i+1)}};return t},pe=function(){var f=[],_={writeByte:function(r){f.push(255&r)},writeShort:function(r){_.writeByte(r),_.writeByte(r>>>8)},writeBytes:function(r,t,e){t=t||0,e=e||r.length;for(var n=0;n<e;n+=1)_.writeByte(r[n+t])},writeString:function(r){for(var t=0;t<r.length;t+=1)_.writeByte(r.charCodeAt(t))},toByteArray:function(){return f},toString:function(){var r="";r+="[";for(var t=0;t<f.length;t+=1)t>0&&(r+=","),r+=f[t];return r+"]"}};return _},ce=function(f){var _=f,r=0,t=0,e=0,n={read:function(){for(;e<8;){if(r>=_.length){if(e==0)return-1;throw"unexpected end of file./"+e}var a=_.charAt(r);if(r+=1,a=="=")return e=0,-1;a.match(/^\s$/)||(t=t<<6|i(a.charCodeAt(0)),e+=6)}var m=t>>>e-8&255;return e-=8,m}},i=function(a){if(65<=a&&a<=90)return a-65;if(97<=a&&a<=122)return a-97+26;if(48<=a&&a<=57)return a-48+52;if(a==43)return 62;if(a==47)return 63;throw"c:"+a};return n},_e=function(f,_,r){for(var t=(function($,H){var B=$,Y=H,L=new Array($*H),Z={setPixel:function(s,g,u){L[g*B+s]=u},write:function(s){s.writeString("GIF87a"),s.writeShort(B),s.writeShort(Y),s.writeByte(128),s.writeByte(0),s.writeByte(0),s.writeByte(0),s.writeByte(0),s.writeByte(0),s.writeByte(255),s.writeByte(255),s.writeByte(255),s.writeString(","),s.writeShort(0),s.writeShort(0),s.writeShort(B),s.writeShort(Y),s.writeByte(0);var g=oe(2);s.writeByte(2);for(var u=0;g.length-u>255;)s.writeByte(255),s.writeBytes(g,u,255),u+=255;s.writeByte(g.length-u),s.writeBytes(g,u,g.length-u),s.writeByte(0),s.writeString(";")}},oe=function(s){for(var g=1<<s,u=1+(1<<s),w=s+1,C=J(),W=0;W<g;W+=1)C.add(String.fromCharCode(W));C.add(String.fromCharCode(g)),C.add(String.fromCharCode(u));var te,ae,se,fe=pe(),ge=(te=fe,ae=0,se=0,{write:function(he,ee){if(he>>>ee)throw"length over";for(;ae+ee>=8;)te.writeByte(255&(he<<ae|se)),ee-=8-ae,he>>>=8-ae,se=0,ae=0;se|=he<<ae,ae+=ee},flush:function(){ae>0&&te.writeByte(se)}});ge.write(g,w);var P=0,X=String.fromCharCode(L[P]);for(P+=1;P<L.length;){var ie=String.fromCharCode(L[P]);P+=1,C.contains(X+ie)?X+=ie:(ge.write(C.indexOf(X),w),C.size()<4095&&(C.size()==1<<w&&(w+=1),C.add(X+ie)),X=ie)}return ge.write(C.indexOf(X),w),ge.write(u,w),ge.flush(),fe.toByteArray()},J=function(){var s={},g=0,u={add:function(w){if(u.contains(w))throw"dup key:"+w;s[w]=g,g+=1},size:function(){return g},indexOf:function(w){return s[w]},contains:function(w){return s[w]!==void 0}};return u};return Z})(f,_),e=0;e<_;e+=1)for(var n=0;n<f;n+=1)t.setPixel(n,e,r(n,e));var i=pe();t.write(i);for(var a=(function(){var $=0,H=0,B=0,Y="",L={},Z=function(J){Y+=String.fromCharCode(oe(63&J))},oe=function(J){if(!(J<0)){if(J<26)return 65+J;if(J<52)return J-26+97;if(J<62)return J-52+48;if(J==62)return 43;if(J==63)return 47}throw"n:"+J};return L.writeByte=function(J){for($=$<<8|255&J,H+=8,B+=1;H>=6;)Z($>>>H-6),H-=6},L.flush=function(){if(H>0&&(Z($<<6-H),$=0,H=0),B%3!=0)for(var J=3-B%3,s=0;s<J;s+=1)Y+="="},L.toString=function(){return Y},L})(),m=i.toByteArray(),T=0;T<m.length;T+=1)a.writeByte(m[T]);return a.flush(),"data:image/gif;base64,"+a};return Q})();h.stringToBytesFuncs["UTF-8"]=function(Q){return(function(E){for(var k=[],D=0;D<E.length;D++){var v=E.charCodeAt(D);v<128?k.push(v):v<2048?k.push(192|v>>6,128|63&v):v<55296||v>=57344?k.push(224|v>>12,128|v>>6&63,128|63&v):(D++,v=65536+((1023&v)<<10|1023&E.charCodeAt(D)),k.push(240|v>>18,128|v>>12&63,128|v>>6&63,128|63&v))}return k})(Q)},(V=typeof(c=function(){return h})=="function"?c.apply(M,[]):c)===void 0||(d.exports=V)}},b={};function l(d){var M=b[d];if(M!==void 0)return M.exports;var c=b[d]={exports:{}};return p[d](c,c.exports,l),c.exports}l.n=d=>{var M=d&&d.__esModule?()=>d.default:()=>d;return l.d(M,{a:M}),M},l.d=(d,M)=>{for(var c in M)l.o(M,c)&&!l.o(d,c)&&Object.defineProperty(d,c,{enumerable:!0,get:M[c]})},l.o=(d,M)=>Object.prototype.hasOwnProperty.call(d,M);var x={};return(()=>{l.d(x,{default:()=>_});const d=r=>!!r&&typeof r=="object"&&!Array.isArray(r);function M(r,...t){if(!t.length)return r;const e=t.shift();return e!==void 0&&d(r)&&d(e)?(r=Object.assign({},r),Object.keys(e).forEach((n=>{const i=r[n],a=e[n];Array.isArray(i)&&Array.isArray(a)?r[n]=a:d(i)&&d(a)?r[n]=M(Object.assign({},i),a):r[n]=a})),M(r,...t)):r}function c(r,t){const e=document.createElement("a");e.download=t,e.href=r,document.body.appendChild(e),e.click(),document.body.removeChild(e)}const V={L:.07,M:.15,Q:.25,H:.3};class h{constructor({svg:t,type:e,window:n}){this._svg=t,this._type=e,this._window=n}draw(t,e,n,i){let a;switch(this._type){case"dots":a=this._drawDot;break;case"classy":a=this._drawClassy;break;case"classy-rounded":a=this._drawClassyRounded;break;case"rounded":a=this._drawRounded;break;case"extra-rounded":a=this._drawExtraRounded;break;default:a=this._drawSquare}a.call(this,{x:t,y:e,size:n,getNeighbor:i})}_rotateFigure({x:t,y:e,size:n,rotation:i=0,draw:a}){var m;const T=t+n/2,$=e+n/2;a(),(m=this._element)===null||m===void 0||m.setAttribute("transform",`rotate(${180*i/Math.PI},${T},${$})`)}_basicDot(t){const{size:e,x:n,y:i}=t;this._rotateFigure(Object.assign(Object.assign({},t),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(n+e/2)),this._element.setAttribute("cy",String(i+e/2)),this._element.setAttribute("r",String(e/2))}}))}_basicSquare(t){const{size:e,x:n,y:i}=t;this._rotateFigure(Object.assign(Object.assign({},t),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(n)),this._element.setAttribute("y",String(i)),this._element.setAttribute("width",String(e)),this._element.setAttribute("height",String(e))}}))}_basicSideRounded(t){const{size:e,x:n,y:i}=t;this._rotateFigure(Object.assign(Object.assign({},t),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${n} ${i}v ${e}h `+e/2+`a ${e/2} ${e/2}, 0, 0, 0, 0 ${-e}`)}}))}_basicCornerRounded(t){const{size:e,x:n,y:i}=t;this._rotateFigure(Object.assign(Object.assign({},t),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${n} ${i}v ${e}h ${e}v `+-e/2+`a ${e/2} ${e/2}, 0, 0, 0, ${-e/2} ${-e/2}`)}}))}_basicCornerExtraRounded(t){const{size:e,x:n,y:i}=t;this._rotateFigure(Object.assign(Object.assign({},t),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${n} ${i}v ${e}h ${e}a ${e} ${e}, 0, 0, 0, ${-e} ${-e}`)}}))}_basicCornersRounded(t){const{size:e,x:n,y:i}=t;this._rotateFigure(Object.assign(Object.assign({},t),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${n} ${i}v `+e/2+`a ${e/2} ${e/2}, 0, 0, 0, ${e/2} ${e/2}h `+e/2+"v "+-e/2+`a ${e/2} ${e/2}, 0, 0, 0, ${-e/2} ${-e/2}`)}}))}_drawDot({x:t,y:e,size:n}){this._basicDot({x:t,y:e,size:n,rotation:0})}_drawSquare({x:t,y:e,size:n}){this._basicSquare({x:t,y:e,size:n,rotation:0})}_drawRounded({x:t,y:e,size:n,getNeighbor:i}){const a=i?+i(-1,0):0,m=i?+i(1,0):0,T=i?+i(0,-1):0,$=i?+i(0,1):0,H=a+m+T+$;if(H!==0)if(H>2||a&&m||T&&$)this._basicSquare({x:t,y:e,size:n,rotation:0});else{if(H===2){let B=0;return a&&T?B=Math.PI/2:T&&m?B=Math.PI:m&&$&&(B=-Math.PI/2),void this._basicCornerRounded({x:t,y:e,size:n,rotation:B})}if(H===1){let B=0;return T?B=Math.PI/2:m?B=Math.PI:$&&(B=-Math.PI/2),void this._basicSideRounded({x:t,y:e,size:n,rotation:B})}}else this._basicDot({x:t,y:e,size:n,rotation:0})}_drawExtraRounded({x:t,y:e,size:n,getNeighbor:i}){const a=i?+i(-1,0):0,m=i?+i(1,0):0,T=i?+i(0,-1):0,$=i?+i(0,1):0,H=a+m+T+$;if(H!==0)if(H>2||a&&m||T&&$)this._basicSquare({x:t,y:e,size:n,rotation:0});else{if(H===2){let B=0;return a&&T?B=Math.PI/2:T&&m?B=Math.PI:m&&$&&(B=-Math.PI/2),void this._basicCornerExtraRounded({x:t,y:e,size:n,rotation:B})}if(H===1){let B=0;return T?B=Math.PI/2:m?B=Math.PI:$&&(B=-Math.PI/2),void this._basicSideRounded({x:t,y:e,size:n,rotation:B})}}else this._basicDot({x:t,y:e,size:n,rotation:0})}_drawClassy({x:t,y:e,size:n,getNeighbor:i}){const a=i?+i(-1,0):0,m=i?+i(1,0):0,T=i?+i(0,-1):0,$=i?+i(0,1):0;a+m+T+$!==0?a||T?m||$?this._basicSquare({x:t,y:e,size:n,rotation:0}):this._basicCornerRounded({x:t,y:e,size:n,rotation:Math.PI/2}):this._basicCornerRounded({x:t,y:e,size:n,rotation:-Math.PI/2}):this._basicCornersRounded({x:t,y:e,size:n,rotation:Math.PI/2})}_drawClassyRounded({x:t,y:e,size:n,getNeighbor:i}){const a=i?+i(-1,0):0,m=i?+i(1,0):0,T=i?+i(0,-1):0,$=i?+i(0,1):0;a+m+T+$!==0?a||T?m||$?this._basicSquare({x:t,y:e,size:n,rotation:0}):this._basicCornerExtraRounded({x:t,y:e,size:n,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:t,y:e,size:n,rotation:-Math.PI/2}):this._basicCornersRounded({x:t,y:e,size:n,rotation:Math.PI/2})}}const Q={dot:"dot",square:"square",extraRounded:"extra-rounded"},E=Object.values(Q);class k{constructor({svg:t,type:e,window:n}){this._svg=t,this._type=e,this._window=n}draw(t,e,n,i){let a;switch(this._type){case Q.square:a=this._drawSquare;break;case Q.extraRounded:a=this._drawExtraRounded;break;default:a=this._drawDot}a.call(this,{x:t,y:e,size:n,rotation:i})}_rotateFigure({x:t,y:e,size:n,rotation:i=0,draw:a}){var m;const T=t+n/2,$=e+n/2;a(),(m=this._element)===null||m===void 0||m.setAttribute("transform",`rotate(${180*i/Math.PI},${T},${$})`)}_basicDot(t){const{size:e,x:n,y:i}=t,a=e/7;this._rotateFigure(Object.assign(Object.assign({},t),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${n+e/2} ${i}a ${e/2} ${e/2} 0 1 0 0.1 0zm 0 ${a}a ${e/2-a} ${e/2-a} 0 1 1 -0.1 0Z`)}}))}_basicSquare(t){const{size:e,x:n,y:i}=t,a=e/7;this._rotateFigure(Object.assign(Object.assign({},t),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${n} ${i}v ${e}h ${e}v `+-e+`zM ${n+a} ${i+a}h `+(e-2*a)+"v "+(e-2*a)+"h "+(2*a-e)+"z")}}))}_basicExtraRounded(t){const{size:e,x:n,y:i}=t,a=e/7;this._rotateFigure(Object.assign(Object.assign({},t),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${n} ${i+2.5*a}v `+2*a+`a ${2.5*a} ${2.5*a}, 0, 0, 0, ${2.5*a} ${2.5*a}h `+2*a+`a ${2.5*a} ${2.5*a}, 0, 0, 0, ${2.5*a} ${2.5*-a}v `+-2*a+`a ${2.5*a} ${2.5*a}, 0, 0, 0, ${2.5*-a} ${2.5*-a}h `+-2*a+`a ${2.5*a} ${2.5*a}, 0, 0, 0, ${2.5*-a} ${2.5*a}M ${n+2.5*a} ${i+a}h `+2*a+`a ${1.5*a} ${1.5*a}, 0, 0, 1, ${1.5*a} ${1.5*a}v `+2*a+`a ${1.5*a} ${1.5*a}, 0, 0, 1, ${1.5*-a} ${1.5*a}h `+-2*a+`a ${1.5*a} ${1.5*a}, 0, 0, 1, ${1.5*-a} ${1.5*-a}v `+-2*a+`a ${1.5*a} ${1.5*a}, 0, 0, 1, ${1.5*a} ${1.5*-a}`)}}))}_drawDot({x:t,y:e,size:n,rotation:i}){this._basicDot({x:t,y:e,size:n,rotation:i})}_drawSquare({x:t,y:e,size:n,rotation:i}){this._basicSquare({x:t,y:e,size:n,rotation:i})}_drawExtraRounded({x:t,y:e,size:n,rotation:i}){this._basicExtraRounded({x:t,y:e,size:n,rotation:i})}}const D={dot:"dot",square:"square"},v=Object.values(D);class A{constructor({svg:t,type:e,window:n}){this._svg=t,this._type=e,this._window=n}draw(t,e,n,i){let a;a=this._type===D.square?this._drawSquare:this._drawDot,a.call(this,{x:t,y:e,size:n,rotation:i})}_rotateFigure({x:t,y:e,size:n,rotation:i=0,draw:a}){var m;const T=t+n/2,$=e+n/2;a(),(m=this._element)===null||m===void 0||m.setAttribute("transform",`rotate(${180*i/Math.PI},${T},${$})`)}_basicDot(t){const{size:e,x:n,y:i}=t;this._rotateFigure(Object.assign(Object.assign({},t),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(n+e/2)),this._element.setAttribute("cy",String(i+e/2)),this._element.setAttribute("r",String(e/2))}}))}_basicSquare(t){const{size:e,x:n,y:i}=t;this._rotateFigure(Object.assign(Object.assign({},t),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(n)),this._element.setAttribute("y",String(i)),this._element.setAttribute("width",String(e)),this._element.setAttribute("height",String(e))}}))}_drawDot({x:t,y:e,size:n,rotation:i}){this._basicDot({x:t,y:e,size:n,rotation:i})}_drawSquare({x:t,y:e,size:n,rotation:i}){this._basicSquare({x:t,y:e,size:n,rotation:i})}}const y="circle",S=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],G=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class de{constructor(t,e){this._roundSize=n=>this._options.dotsOptions.roundSize?Math.floor(n):n,this._window=e,this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(t.width)),this._element.setAttribute("height",String(t.height)),this._element.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),t.dotsOptions.roundSize||this._element.setAttribute("shape-rendering","crispEdges"),this._element.setAttribute("viewBox",`0 0 ${t.width} ${t.height}`),this._defs=this._window.document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._imageUri=t.image,this._instanceId=de.instanceCount++,this._options=t}get width(){return this._options.width}get height(){return this._options.height}getElement(){return this._element}async drawQR(t){const e=t.getModuleCount(),n=Math.min(this._options.width,this._options.height)-2*this._options.margin,i=this._options.shape===y?n/Math.sqrt(2):n,a=this._roundSize(i/e);let m={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=t,this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:T,qrOptions:$}=this._options,H=T.imageSize*V[$.errorCorrectionLevel],B=Math.floor(H*e*e);m=(function({originalHeight:Y,originalWidth:L,maxHiddenDots:Z,maxHiddenAxisDots:oe,dotSize:J}){const s={x:0,y:0},g={x:0,y:0};if(Y<=0||L<=0||Z<=0||J<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};const u=Y/L;return s.x=Math.floor(Math.sqrt(Z/u)),s.x<=0&&(s.x=1),oe&&oe<s.x&&(s.x=oe),s.x%2==0&&s.x--,g.x=s.x*J,s.y=1+2*Math.ceil((s.x*u-1)/2),g.y=Math.round(g.x*u),(s.y*s.x>Z||oe&&oe<s.y)&&(oe&&oe<s.y?(s.y=oe,s.y%2==0&&s.x--):s.y-=2,g.y=s.y*J,s.x=1+2*Math.ceil((s.y/u-1)/2),g.x=Math.round(g.y/u)),{height:g.y,width:g.x,hideYDots:s.y,hideXDots:s.x}})({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:B,maxHiddenAxisDots:e-14,dotSize:a})}this.drawBackground(),this.drawDots(((T,$)=>{var H,B,Y,L,Z,oe;return!(this._options.imageOptions.hideBackgroundDots&&T>=(e-m.hideYDots)/2&&T<(e+m.hideYDots)/2&&$>=(e-m.hideXDots)/2&&$<(e+m.hideXDots)/2||!((H=S[T])===null||H===void 0)&&H[$]||!((B=S[T-e+7])===null||B===void 0)&&B[$]||!((Y=S[T])===null||Y===void 0)&&Y[$-e+7]||!((L=G[T])===null||L===void 0)&&L[$]||!((Z=G[T-e+7])===null||Z===void 0)&&Z[$]||!((oe=G[T])===null||oe===void 0)&&oe[$-e+7])})),this.drawCorners(),this._options.image&&await this.drawImage({width:m.width,height:m.height,count:e,dotSize:a})}drawBackground(){var t,e,n;const i=this._element,a=this._options;if(i){const m=(t=a.backgroundOptions)===null||t===void 0?void 0:t.gradient,T=(e=a.backgroundOptions)===null||e===void 0?void 0:e.color;let $=a.height,H=a.width;if(m||T){const B=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id",`clip-path-background-color-${this._instanceId}`),this._defs.appendChild(this._backgroundClipPath),!((n=a.backgroundOptions)===null||n===void 0)&&n.round&&($=H=Math.min(a.width,a.height),B.setAttribute("rx",String($/2*a.backgroundOptions.round))),B.setAttribute("x",String(this._roundSize((a.width-H)/2))),B.setAttribute("y",String(this._roundSize((a.height-$)/2))),B.setAttribute("width",String(H)),B.setAttribute("height",String($)),this._backgroundClipPath.appendChild(B),this._createColor({options:m,color:T,additionalRotation:0,x:0,y:0,height:a.height,width:a.width,name:`background-color-${this._instanceId}`})}}}drawDots(t){var e,n;if(!this._qr)throw"QR code is not defined";const i=this._options,a=this._qr.getModuleCount();if(a>i.width||a>i.height)throw"The canvas is too small.";const m=Math.min(i.width,i.height)-2*i.margin,T=i.shape===y?m/Math.sqrt(2):m,$=this._roundSize(T/a),H=this._roundSize((i.width-a*$)/2),B=this._roundSize((i.height-a*$)/2),Y=new h({svg:this._element,type:i.dotsOptions.type,window:this._window});this._dotsClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id",`clip-path-dot-color-${this._instanceId}`),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(e=i.dotsOptions)===null||e===void 0?void 0:e.gradient,color:i.dotsOptions.color,additionalRotation:0,x:0,y:0,height:i.height,width:i.width,name:`dot-color-${this._instanceId}`});for(let L=0;L<a;L++)for(let Z=0;Z<a;Z++)t&&!t(L,Z)||!((n=this._qr)===null||n===void 0)&&n.isDark(L,Z)&&(Y.draw(H+Z*$,B+L*$,$,((oe,J)=>!(Z+oe<0||L+J<0||Z+oe>=a||L+J>=a)&&!(t&&!t(L+J,Z+oe))&&!!this._qr&&this._qr.isDark(L+J,Z+oe))),Y._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(Y._element));if(i.shape===y){const L=this._roundSize((m/$-a)/2),Z=a+2*L,oe=H-L*$,J=B-L*$,s=[],g=this._roundSize(Z/2);for(let u=0;u<Z;u++){s[u]=[];for(let w=0;w<Z;w++)u>=L-1&&u<=Z-L&&w>=L-1&&w<=Z-L||Math.sqrt((u-g)*(u-g)+(w-g)*(w-g))>g?s[u][w]=0:s[u][w]=this._qr.isDark(w-2*L<0?w:w>=a?w-2*L:w-L,u-2*L<0?u:u>=a?u-2*L:u-L)?1:0}for(let u=0;u<Z;u++)for(let w=0;w<Z;w++)s[u][w]&&(Y.draw(oe+w*$,J+u*$,$,((C,W)=>{var te;return!!(!((te=s[u+W])===null||te===void 0)&&te[w+C])})),Y._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(Y._element))}}drawCorners(){if(!this._qr)throw"QR code is not defined";const t=this._element,e=this._options;if(!t)throw"Element code is not defined";const n=this._qr.getModuleCount(),i=Math.min(e.width,e.height)-2*e.margin,a=e.shape===y?i/Math.sqrt(2):i,m=this._roundSize(a/n),T=7*m,$=3*m,H=this._roundSize((e.width-n*m)/2),B=this._roundSize((e.height-n*m)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach((([Y,L,Z])=>{var oe,J,s,g,u,w,C,W,te,ae,se,fe,ge,P;const X=H+Y*m*(n-7),ie=B+L*m*(n-7);let he=this._dotsClipPath,ee=this._dotsClipPath;if((!((oe=e.cornersSquareOptions)===null||oe===void 0)&&oe.gradient||!((J=e.cornersSquareOptions)===null||J===void 0)&&J.color)&&(he=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),he.setAttribute("id",`clip-path-corners-square-color-${Y}-${L}-${this._instanceId}`),this._defs.appendChild(he),this._cornersSquareClipPath=this._cornersDotClipPath=ee=he,this._createColor({options:(s=e.cornersSquareOptions)===null||s===void 0?void 0:s.gradient,color:(g=e.cornersSquareOptions)===null||g===void 0?void 0:g.color,additionalRotation:Z,x:X,y:ie,height:T,width:T,name:`corners-square-color-${Y}-${L}-${this._instanceId}`})),((u=e.cornersSquareOptions)===null||u===void 0?void 0:u.type)&&E.includes(e.cornersSquareOptions.type)){const be=new k({svg:this._element,type:e.cornersSquareOptions.type,window:this._window});be.draw(X,ie,T,Z),be._element&&he&&he.appendChild(be._element)}else{const be=new h({svg:this._element,type:((w=e.cornersSquareOptions)===null||w===void 0?void 0:w.type)||e.dotsOptions.type,window:this._window});for(let Ae=0;Ae<S.length;Ae++)for(let ne=0;ne<S[Ae].length;ne++)!((C=S[Ae])===null||C===void 0)&&C[ne]&&(be.draw(X+ne*m,ie+Ae*m,m,((Pe,qe)=>{var $e;return!!(!(($e=S[Ae+qe])===null||$e===void 0)&&$e[ne+Pe])})),be._element&&he&&he.appendChild(be._element))}if((!((W=e.cornersDotOptions)===null||W===void 0)&&W.gradient||!((te=e.cornersDotOptions)===null||te===void 0)&&te.color)&&(ee=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),ee.setAttribute("id",`clip-path-corners-dot-color-${Y}-${L}-${this._instanceId}`),this._defs.appendChild(ee),this._cornersDotClipPath=ee,this._createColor({options:(ae=e.cornersDotOptions)===null||ae===void 0?void 0:ae.gradient,color:(se=e.cornersDotOptions)===null||se===void 0?void 0:se.color,additionalRotation:Z,x:X+2*m,y:ie+2*m,height:$,width:$,name:`corners-dot-color-${Y}-${L}-${this._instanceId}`})),((fe=e.cornersDotOptions)===null||fe===void 0?void 0:fe.type)&&v.includes(e.cornersDotOptions.type)){const be=new A({svg:this._element,type:e.cornersDotOptions.type,window:this._window});be.draw(X+2*m,ie+2*m,$,Z),be._element&&ee&&ee.appendChild(be._element)}else{const be=new h({svg:this._element,type:((ge=e.cornersDotOptions)===null||ge===void 0?void 0:ge.type)||e.dotsOptions.type,window:this._window});for(let Ae=0;Ae<G.length;Ae++)for(let ne=0;ne<G[Ae].length;ne++)!((P=G[Ae])===null||P===void 0)&&P[ne]&&(be.draw(X+ne*m,ie+Ae*m,m,((Pe,qe)=>{var $e;return!!(!(($e=G[Ae+qe])===null||$e===void 0)&&$e[ne+Pe])})),be._element&&ee&&ee.appendChild(be._element))}}))}loadImage(){return new Promise(((t,e)=>{var n;const i=this._options;if(!i.image)return e("Image is not defined");if(!((n=i.nodeCanvas)===null||n===void 0)&&n.loadImage)i.nodeCanvas.loadImage(i.image).then((a=>{var m,T;if(this._image=a,this._options.imageOptions.saveAsBlob){const $=(m=i.nodeCanvas)===null||m===void 0?void 0:m.createCanvas(this._image.width,this._image.height);(T=$?.getContext("2d"))===null||T===void 0||T.drawImage(a,0,0),this._imageUri=$?.toDataURL()}t()})).catch(e);else{const a=new this._window.Image;typeof i.imageOptions.crossOrigin=="string"&&(a.crossOrigin=i.imageOptions.crossOrigin),this._image=a,a.onload=async()=>{this._options.imageOptions.saveAsBlob&&(this._imageUri=await(async function(m,T){return new Promise(($=>{const H=new T.XMLHttpRequest;H.onload=function(){const B=new T.FileReader;B.onloadend=function(){$(B.result)},B.readAsDataURL(H.response)},H.open("GET",m),H.responseType="blob",H.send()}))})(i.image||"",this._window)),t()},a.src=i.image}}))}async drawImage({width:t,height:e,count:n,dotSize:i}){const a=this._options,m=this._roundSize((a.width-n*i)/2),T=this._roundSize((a.height-n*i)/2),$=m+this._roundSize(a.imageOptions.margin+(n*i-t)/2),H=T+this._roundSize(a.imageOptions.margin+(n*i-e)/2),B=t-2*a.imageOptions.margin,Y=e-2*a.imageOptions.margin,L=this._window.document.createElementNS("http://www.w3.org/2000/svg","image");L.setAttribute("href",this._imageUri||""),L.setAttribute("xlink:href",this._imageUri||""),L.setAttribute("x",String($)),L.setAttribute("y",String(H)),L.setAttribute("width",`${B}px`),L.setAttribute("height",`${Y}px`),this._element.appendChild(L)}_createColor({options:t,color:e,additionalRotation:n,x:i,y:a,height:m,width:T,name:$}){const H=T>m?T:m,B=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");if(B.setAttribute("x",String(i)),B.setAttribute("y",String(a)),B.setAttribute("height",String(m)),B.setAttribute("width",String(T)),B.setAttribute("clip-path",`url('#clip-path-${$}')`),t){let Y;if(t.type==="radial")Y=this._window.document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),Y.setAttribute("id",$),Y.setAttribute("gradientUnits","userSpaceOnUse"),Y.setAttribute("fx",String(i+T/2)),Y.setAttribute("fy",String(a+m/2)),Y.setAttribute("cx",String(i+T/2)),Y.setAttribute("cy",String(a+m/2)),Y.setAttribute("r",String(H/2));else{const L=((t.rotation||0)+n)%(2*Math.PI),Z=(L+2*Math.PI)%(2*Math.PI);let oe=i+T/2,J=a+m/2,s=i+T/2,g=a+m/2;Z>=0&&Z<=.25*Math.PI||Z>1.75*Math.PI&&Z<=2*Math.PI?(oe-=T/2,J-=m/2*Math.tan(L),s+=T/2,g+=m/2*Math.tan(L)):Z>.25*Math.PI&&Z<=.75*Math.PI?(J-=m/2,oe-=T/2/Math.tan(L),g+=m/2,s+=T/2/Math.tan(L)):Z>.75*Math.PI&&Z<=1.25*Math.PI?(oe+=T/2,J+=m/2*Math.tan(L),s-=T/2,g-=m/2*Math.tan(L)):Z>1.25*Math.PI&&Z<=1.75*Math.PI&&(J+=m/2,oe+=T/2/Math.tan(L),g-=m/2,s-=T/2/Math.tan(L)),Y=this._window.document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),Y.setAttribute("id",$),Y.setAttribute("gradientUnits","userSpaceOnUse"),Y.setAttribute("x1",String(Math.round(oe))),Y.setAttribute("y1",String(Math.round(J))),Y.setAttribute("x2",String(Math.round(s))),Y.setAttribute("y2",String(Math.round(g)))}t.colorStops.forEach((({offset:L,color:Z})=>{const oe=this._window.document.createElementNS("http://www.w3.org/2000/svg","stop");oe.setAttribute("offset",100*L+"%"),oe.setAttribute("stop-color",Z),Y.appendChild(oe)})),B.setAttribute("fill",`url('#${$}')`),this._defs.appendChild(Y)}else e&&B.setAttribute("fill",e);this._element.appendChild(B)}}de.instanceCount=0;const ke=de,ye="canvas",De={};for(let r=0;r<=40;r++)De[r]=r;const z={type:ye,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:De[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{saveAsBlob:!0,hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000",roundSize:!0},backgroundOptions:{round:0,color:"#fff"}};function K(r){const t=Object.assign({},r);if(!t.colorStops||!t.colorStops.length)throw"Field 'colorStops' is required in gradient";return t.rotation?t.rotation=Number(t.rotation):t.rotation=0,t.colorStops=t.colorStops.map((e=>Object.assign(Object.assign({},e),{offset:Number(e.offset)}))),t}function xe(r){const t=Object.assign({},r);return t.width=Number(t.width),t.height=Number(t.height),t.margin=Number(t.margin),t.imageOptions=Object.assign(Object.assign({},t.imageOptions),{hideBackgroundDots:!!t.imageOptions.hideBackgroundDots,imageSize:Number(t.imageOptions.imageSize),margin:Number(t.imageOptions.margin)}),t.margin>Math.min(t.width,t.height)&&(t.margin=Math.min(t.width,t.height)),t.dotsOptions=Object.assign({},t.dotsOptions),t.dotsOptions.gradient&&(t.dotsOptions.gradient=K(t.dotsOptions.gradient)),t.cornersSquareOptions&&(t.cornersSquareOptions=Object.assign({},t.cornersSquareOptions),t.cornersSquareOptions.gradient&&(t.cornersSquareOptions.gradient=K(t.cornersSquareOptions.gradient))),t.cornersDotOptions&&(t.cornersDotOptions=Object.assign({},t.cornersDotOptions),t.cornersDotOptions.gradient&&(t.cornersDotOptions.gradient=K(t.cornersDotOptions.gradient))),t.backgroundOptions&&(t.backgroundOptions=Object.assign({},t.backgroundOptions),t.backgroundOptions.gradient&&(t.backgroundOptions.gradient=K(t.backgroundOptions.gradient))),t}var pe=l(873),ce=l.n(pe);function _e(r){if(!r)throw new Error("Extension must be defined");r[0]==="."&&(r=r.substring(1));const t={bmp:"image/bmp",gif:"image/gif",ico:"image/vnd.microsoft.icon",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",webp:"image/webp",pdf:"application/pdf"}[r.toLowerCase()];if(!t)throw new Error(`Extension "${r}" is not supported`);return t}class f{constructor(t){t?.jsdom?this._window=new t.jsdom("",{resources:"usable"}).window:this._window=window,this._options=t?xe(M(z,t)):z,this.update()}static _clearContainer(t){t&&(t.innerHTML="")}_setupSvg(){if(!this._qr)return;const t=new ke(this._options,this._window);this._svg=t.getElement(),this._svgDrawingPromise=t.drawQR(this._qr).then((()=>{var e;this._svg&&((e=this._extension)===null||e===void 0||e.call(this,t.getElement(),this._options))}))}_setupCanvas(){var t,e;this._qr&&(!((t=this._options.nodeCanvas)===null||t===void 0)&&t.createCanvas?(this._nodeCanvas=this._options.nodeCanvas.createCanvas(this._options.width,this._options.height),this._nodeCanvas.width=this._options.width,this._nodeCanvas.height=this._options.height):(this._domCanvas=document.createElement("canvas"),this._domCanvas.width=this._options.width,this._domCanvas.height=this._options.height),this._setupSvg(),this._canvasDrawingPromise=(e=this._svgDrawingPromise)===null||e===void 0?void 0:e.then((()=>{var n;if(!this._svg)return;const i=this._svg,a=new this._window.XMLSerializer().serializeToString(i),m=btoa(a),T=`data:${_e("svg")};base64,${m}`;if(!((n=this._options.nodeCanvas)===null||n===void 0)&&n.loadImage)return this._options.nodeCanvas.loadImage(T).then(($=>{var H,B;$.width=this._options.width,$.height=this._options.height,(B=(H=this._nodeCanvas)===null||H===void 0?void 0:H.getContext("2d"))===null||B===void 0||B.drawImage($,0,0)}));{const $=new this._window.Image;return new Promise((H=>{$.onload=()=>{var B,Y;(Y=(B=this._domCanvas)===null||B===void 0?void 0:B.getContext("2d"))===null||Y===void 0||Y.drawImage($,0,0),H()},$.src=T}))}})))}async _getElement(t="png"){if(!this._qr)throw"QR code is empty";return t.toLowerCase()==="svg"?(this._svg&&this._svgDrawingPromise||this._setupSvg(),await this._svgDrawingPromise,this._svg):((this._domCanvas||this._nodeCanvas)&&this._canvasDrawingPromise||this._setupCanvas(),await this._canvasDrawingPromise,this._domCanvas||this._nodeCanvas)}update(t){f._clearContainer(this._container),this._options=t?xe(M(this._options,t)):this._options,this._options.data&&(this._qr=ce()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||(function(e){switch(!0){case/^[0-9]*$/.test(e):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(e):return"Alphanumeric";default:return"Byte"}})(this._options.data)),this._qr.make(),this._options.type===ye?this._setupCanvas():this._setupSvg(),this.append(this._container))}append(t){if(t){if(typeof t.appendChild!="function")throw"Container should be a single DOM node";this._options.type===ye?this._domCanvas&&t.appendChild(this._domCanvas):this._svg&&t.appendChild(this._svg),this._container=t}}applyExtension(t){if(!t)throw"Extension function should be defined.";this._extension=t,this.update()}deleteExtension(){this._extension=void 0,this.update()}async getRawData(t="png"){if(!this._qr)throw"QR code is empty";const e=await this._getElement(t),n=_e(t);if(!e)return null;if(t.toLowerCase()==="svg"){const i=`<?xml version="1.0" standalone="no"?>\r
${new this._window.XMLSerializer().serializeToString(e)}`;return typeof Blob>"u"||this._options.jsdom?Buffer.from(i):new Blob([i],{type:n})}return new Promise((i=>{const a=e;if("toBuffer"in a)if(n==="image/png")i(a.toBuffer(n));else if(n==="image/jpeg")i(a.toBuffer(n));else{if(n!=="application/pdf")throw Error("Unsupported extension");i(a.toBuffer(n))}else"toBlob"in a&&a.toBlob(i,n,1)}))}async download(t){if(!this._qr)throw"QR code is empty";if(typeof Blob>"u")throw"Cannot download in Node.js, call getRawData instead.";let e="png",n="qr";typeof t=="string"?(e=t,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):typeof t=="object"&&t!==null&&(t.name&&(n=t.name),t.extension&&(e=t.extension));const i=await this._getElement(e);if(i)if(e.toLowerCase()==="svg"){let a=new XMLSerializer().serializeToString(i);a=`<?xml version="1.0" standalone="no"?>\r
`+a,c(`data:${_e(e)};charset=utf-8,${encodeURIComponent(a)}`,`${n}.svg`)}else c(i.toDataURL(_e(e)),`${n}.${e}`)}}const _=f})(),x.default})()))})(ft)),ft.exports}var jo=zo();const Gt=Oo(jo),Bo={class:"row"},Vo={class:"col-12 col-lg-6 col-xl-6"},Lo={class:"q-mx-auto",style:{width:"90%"}},Fo={class:"col-12 col-lg-6 col-xl-6"},Ro={class:"row"},No={class:"col-4"},Uo={class:"col-4"},Qo={class:"col-4"},Ho={class:"text-weight-bold q-my-none"},Yo={key:0,class:"q-my-none"},Wo={class:"q-my-none"},Xo={style:{display:"flex"}},Go={class:"text-weight-bold q-mb-none q-mr-sm q-mt-sm"},Ko={class:"text-weight-bold q-my-none"},Zo={key:0},Jo={key:1},ei={class:"q-mt-sm"},ti={class:"text-weight-bold q-mb-none q-mr-sm"},ai={key:1},ni=["href"],oi=Ve({__name:"AttachmentShareDialog",props:{create:{type:Boolean},attachmentId:{}},emits:["close"],setup(o,{emit:j}){const{t:p}=Fe(),b=j,l=o,x=ue(!0),d=Te({...Ie}),M=[{label:p("1 minute"),value:"oneMinute"},{label:p("1 hour"),value:"oneHour"},{label:p("1 day"),value:"oneDay"},{label:p("1 week"),value:"oneWeek"},{label:p("1 month"),value:"oneMonth"},{label:p("1 year"),value:"oneYear"}],c=Te({id:"",createdAtTimestamp:0,expiresAtTimestamp:0,lastAccessTimestamp:null,accessLimit:0,accessCount:0,enabled:!1,document:{id:"",title:""},attachment:{id:"",name:"",size:0}}),V=ue(void 0),h=N(()=>c.id?`${window.location.protocol}//${window.location.hostname}${window.location.port?`:${window.location.port}`:""}/api3/shared/attachment/${l.attachmentId}?id=${encodeURI(c.id)}`:null),Q=ue(!1),E=N(()=>Q.value&&c.expiresAtTimestamp>0?vt(c.expiresAtTimestamp):null),k=ue(!1),D=ue(null);we(()=>D.value,z=>{if(z){const K=new Date;switch(z){case"oneMinute":K.setMinutes(K.getMinutes()+1);break;case"oneHour":K.setHours(K.getHours()+1);break;case"oneDay":K.setDate(K.getDate()+1);break;case"oneWeek":K.setDate(K.getDate()+7);break;case"oneMonth":K.setMonth(K.getMonth()+1);break;case"oneYear":K.setFullYear(K.getFullYear()+1);break}c.expiresAtTimestamp=Rt(K)}}),we(()=>k.value,z=>{z&&c.accessLimit==0&&(c.accessLimit=1)});const v=z=>{if(D.value=null,z&&c.expiresAtTimestamp<1){const K=new Date;K.setHours(K.getHours()+1),c.expiresAtTimestamp=Rt(K)}},A=ue(null),y=()=>{const z=new Gt({type:"svg",shape:"square",width:600,height:600,margin:0,data:h.value,dotsOptions:{color:"#000000",type:"square"},backgroundOptions:{color:"#ffffff"}});A.value?(Gt._clearContainer(A.value),z.append(A.value)):console.error("container not found")},S=()=>{b("close")},G=()=>{V.value=void 0,h.value&&navigator.clipboard.writeText(h.value).then(()=>{V.value=p("Copied to clipboard!")}).catch(z=>{console.error("Error copying url to clipboard",z)})},de=()=>{Object.assign(d,Ie),d.ajaxRunning=!0,Re.attachmentShare.create(l.attachmentId).then(z=>{c.id=z.data.attachmentShare.id,c.createdAtTimestamp=z.data.attachmentShare.createdAtTimestamp,c.expiresAtTimestamp=z.data.attachmentShare.expiresAtTimestamp,c.lastAccessTimestamp=z.data.attachmentShare.lastAccessTimestamp,c.accessLimit=z.data.attachmentShare.accessLimit,c.accessCount=z.data.attachmentShare.accessCount,c.enabled=z.data.attachmentShare.enabled,c.attachment=z.data.attachmentShare.attachment,c.document=z.data.attachmentShare.document,Q.value=c.expiresAtTimestamp>0,k.value=c.accessLimit>0,y(),le.emit("attachmentShareAdded",{attachmentShare:z.data.attachmentShare})}).catch(z=>{if(d.ajaxErrors=!0,z.isAPIError)switch(d.ajaxAPIErrorDetails=z.customAPIErrorDetails,z.response.status){case 401:d.ajaxErrors=!1,le.emit("reAuthRequired",{emitter:"AttachmentShareDialog.onCreate"});break;default:d.ajaxErrorMessage="API Error: Error adding attachment share";break}else d.ajaxErrorMessage=`Uncaught exception: ${z}`,console.error(z)}).finally(()=>{d.ajaxRunning=!1})},ke=()=>{Object.assign(d,Ie),d.ajaxRunning=!0,Re.attachmentShare.get(l.attachmentId).then(z=>{c.id=z.data.attachmentShare.id,c.createdAtTimestamp=z.data.attachmentShare.createdAtTimestamp,c.expiresAtTimestamp=z.data.attachmentShare.expiresAtTimestamp,c.lastAccessTimestamp=z.data.attachmentShare.lastAccessTimestamp,c.accessLimit=z.data.attachmentShare.accessLimit,c.accessCount=z.data.attachmentShare.accessCount,c.enabled=z.data.attachmentShare.enabled,c.attachment=z.data.attachmentShare.attachment,c.document=z.data.attachmentShare.document,Q.value=c.expiresAtTimestamp>0,k.value=c.accessLimit>0,y()}).catch(z=>{if(d.ajaxErrors=!0,z.isAPIError)switch(d.ajaxAPIErrorDetails=z.customAPIErrorDetails,z.response.status){case 401:d.ajaxErrors=!1,le.emit("reAuthRequired",{emitter:"AttachmentShareDialog.onGet"});break;default:d.ajaxErrorMessage="API Error: Error getting attachment share";break}else d.ajaxErrorMessage=`Uncaught exception: ${z}`,console.error(z)}).finally(()=>{d.ajaxRunning=!1})},ye=()=>{Object.assign(d,Ie),d.ajaxRunning=!0,Re.attachmentShare.update(l.attachmentId,c.enabled,Q.value?c.expiresAtTimestamp:0,k.value?c.accessLimit:0).then(z=>{c.id=z.data.attachmentShare.id,c.createdAtTimestamp=z.data.attachmentShare.createdAtTimestamp,c.expiresAtTimestamp=z.data.attachmentShare.expiresAtTimestamp,c.lastAccessTimestamp=z.data.attachmentShare.lastAccessTimestamp,c.accessLimit=z.data.attachmentShare.accessLimit,c.accessCount=z.data.attachmentShare.accessCount,c.enabled=z.data.attachmentShare.enabled,c.attachment=z.data.attachmentShare.attachment,c.document=z.data.attachmentShare.document,Q.value=c.expiresAtTimestamp>0,k.value=c.accessLimit>0,le.emit("attachmentShareChanged",{attachmentShare:z.data.attachmentShare}),y()}).catch(z=>{if(d.ajaxErrors=!0,z.isAPIError)switch(d.ajaxAPIErrorDetails=z.customAPIErrorDetails,z.response.status){case 401:d.ajaxErrors=!1,le.emit("reAuthRequired",{emitter:"AttachmentShareDialog.onSave"});break;default:d.ajaxErrorMessage="API Error: Error saving attachment share";break}else d.ajaxErrorMessage=`Uncaught exception: ${z}`,console.error(z)}).finally(()=>{d.ajaxRunning=!1})},De=()=>{Object.assign(d,Ie),d.ajaxRunning=!0,Re.attachmentShare.remove(l.attachmentId).then(()=>{le.emit("attachmentShareDeleted",{attachmentId:l.attachmentId}),b("close")}).catch(z=>{if(d.ajaxErrors=!0,z.isAPIError)switch(d.ajaxAPIErrorDetails=z.customAPIErrorDetails,z.response.status){case 401:d.ajaxErrors=!1,le.emit("reAuthRequired",{emitter:"AttachmentShareDialog.onDelete"});break;default:d.ajaxErrorMessage="API Error: Error removing attachment share";break}else d.ajaxErrorMessage=`Uncaught exception: ${z}`,console.error(z)}).finally(()=>{d.ajaxRunning=!1})};return Qe(()=>{le.on("reAuthSucess",z=>{z.to?.includes("AttachmentShareDialog.onCreate")?de():z.to?.includes("AttachmentShareDialog.onGet")?ke():z.to?.includes("AttachmentShareDialog.onSave")?ye():z.to?.includes("AttachmentShareDialog.onDelete")&&De()}),l.create?de():ke()}),Ue(()=>{le.off("reAuthSucess")}),(z,K)=>{const xe=it("router-link");return R(),me(We,{modelValue:x.value,"onUpdate:modelValue":K[6]||(K[6]=pe=>x.value=pe),onClose:S,width:"1920px","max-width":"80vw"},{body:I(()=>[U("div",Bo,[U("div",Vo,[U("div",{id:"qr-container",ref_key:"qrContainerRef",ref:A,class:Ke({visible_qr:c.enabled,hidden_qr:!c.enabled})},null,2),U("p",Lo,[q(Mt,{dense:"",outlined:"",modelValue:h.value,"onUpdate:modelValue":K[0]||(K[0]=pe=>h.value=pe),disable:!c.enabled||d.ajaxRunning,icon:"delete",hint:V.value},{append:I(()=>[q(ze,{name:"content_copy",class:"cursor-pointer",onClick:G})]),_:1},8,["modelValue","disable","hint"])])]),U("div",Fo,[U("div",Ro,[U("div",No,[q(mt,{size:"xl",modelValue:c.enabled,"onUpdate:modelValue":K[1]||(K[1]=pe=>c.enabled=pe),disable:d.ajaxRunning,icon:"share",label:O(p)("Enabled")},null,8,["modelValue","disable","label"])]),Me(U("div",Uo,[q(mt,{size:"xl",modelValue:k.value,"onUpdate:modelValue":K[2]||(K[2]=pe=>k.value=pe),disable:!c.enabled||d.ajaxRunning,icon:"lock_clock",label:O(p)("Has access count limit")},null,8,["modelValue","disable","label"])],512),[[Le,c.enabled]]),Me(U("div",Qo,[q(mt,{size:"xl",modelValue:Q.value,"onUpdate:modelValue":[K[3]||(K[3]=pe=>Q.value=pe),v],disable:!c.enabled||d.ajaxRunning,icon:"lock_clock",label:O(p)("Has expiration")},null,8,["modelValue","disable","label"])],512),[[Le,c.enabled]])]),Me(U("div",null,[U("p",Ho,F(O(p)("This share has been accessed n times.",{count:c.accessCount})),1),c.lastAccessTimestamp?(R(),ve("p",Yo,F(O(p)("Most recent access"))+": "+F(O(vt)(c.lastAccessTimestamp))+" ("+F(O(p)(O(Lt)(c.lastAccessTimestamp).label,{count:O(Lt)(c.lastAccessTimestamp).count}))+") ",1)):Ce("",!0),Me(U("div",Wo,[q(ht,{class:"q-my-md"}),U("div",Xo,[U("span",Go,F(O(p)("Set access count limit"))+": ",1),q(Mt,{filled:"",dense:"",type:"number",modelValue:c.accessLimit,"onUpdate:modelValue":K[4]||(K[4]=pe=>c.accessLimit=pe),modelModifiers:{number:!0},min:"1",disable:!c.enabled||d.ajaxRunning,style:{"max-width":"8em"}},null,8,["modelValue","disable"])])],512),[[Le,k.value]]),Me(U("div",null,[q(ht,{class:"q-my-md"}),U("p",Ko,[re(F(O(p)("Expires on"))+": "+F(E.value)+" ",1),Q.value&&O(ct)()<=c.expiresAtTimestamp?(R(),ve("span",Zo,"("+F(O(p)(O(Ft)(c.expiresAtTimestamp).label,{count:O(Ft)(c.expiresAtTimestamp).count}))+")",1)):(R(),ve("span",Jo,F(O(p)("(expired)")),1))]),U("p",ei,[U("span",ti,F(O(p)("Set expiration"))+": ",1),q(Eo,{"no-caps":"",modelValue:D.value,"onUpdate:modelValue":K[5]||(K[5]=pe=>D.value=pe),disable:!c.enabled||d.ajaxRunning,"toggle-color":"primary",options:M,size:"md"},null,8,["modelValue","disable"])])],512),[[Le,Q.value]]),c.id?(R(),ve("div",ai,[q(ht,{class:"q-my-sm"}),U("p",null,[q(ze,{name:"work",size:"sm"}),K[7]||(K[7]=re()),q(xe,{to:{name:"document",params:{id:c.document.id}},class:"text-color-primary"},{default:I(()=>[re(F(c.document.title),1)]),_:1},8,["to"])]),U("p",null,[q(ze,{name:"save",size:"sm"}),K[8]||(K[8]=re()),U("a",{class:"text-color-primary",href:O(ot)(c.attachment.id,!0)},F(c.attachment.name),9,ni),re(" ("+F(O(pt).humanStorageSize(c.attachment.size))+") ",1)])])):Ce("",!0)],512),[[Le,c.enabled]]),d.ajaxErrors&&d.ajaxErrorMessage?(R(),me(st,{key:0,class:"q-my-md",text:d.ajaxErrorMessage},null,8,["text"])):Ce("",!0)])])]),"actions-prepend":I(()=>[q(Be,{size:"md","no-caps":"",icon:"save",label:O(p)("Save"),color:"primary",onClick:ye},null,8,["label"]),q(Be,{size:"md","no-caps":"",icon:"delete",label:O(p)("Remove"),color:"red",onClick:De},null,8,["label"])]),_:1},8,["modelValue"])}}}),Bi=Ve({__name:"MainLayout",setup(o){const j=Pa(),{t:p}=Fe(),b=Te({reauth:{visible:!1},filePreview:{visible:!1,document:new Qa,currentIndex:0},documentFilesPreview:{visible:!1,document:{id:null,title:null}},documentNotesPreview:{visible:!1,document:{id:null,title:null}},fastSearch:{visible:!1},uploading:{visible:!1,transfers:[]},attachmentShare:{visible:!1,attachmentId:"",create:!1}}),l=Te([]),x=bt(),d=()=>{b.reauth.visible=!1,le.emit("reAuthSucess",{to:l}),l.length=0},M=ue(!1),c=ue(j.screen.gt.sm),V=Bt.getItem("miniSidebarCurrentMode");V!=null&&(M.value=!0);const h=ue(V!=null?V==!0:j.screen.md),Q=N(()=>j.screen.name);we(Q,()=>{M.value||(h.value=j.screen.lt.lg)});const E=N(()=>j.screen.gt.xs?p("Search on HomeDocs..."):""),k=()=>{h.value=!h.value,M.value=!0,Bt.set("miniSidebarCurrentMode",h.value)},D=()=>{b.uploading.transfers=b.uploading.transfers.filter(v=>!v.processed)};return Qe(()=>{le.on("reAuthRequired",v=>{v.emitter&&l.push(v.emitter),x.refreshAccessToken().then(A=>{A?(le.emit("reAuthSucess",{to:l}),l.length=0):b.reauth.visible=!0}).catch(A=>{console.error("An unhandled exception occurred during access token refresh",A),b.reauth.visible=!0}).finally(()=>{})}),le.on("showDocumentFilePreviewDialog",v=>{b.filePreview.document.id=v?.document?.id||null,b.filePreview.document.title=v?.document?.title||"",b.filePreview.document.attachments=v?.document?.attachments||[],b.filePreview.currentIndex=v?.currentIndex||0,b.filePreview.visible=!0}),le.on("showDocumentFilesPreviewDialog",v=>{b.documentFilesPreview.document.id=v?.document?.id||null,b.documentFilesPreview.document.title=v?.document?.title||null,b.documentFilesPreview.visible=!0}),le.on("showDocumentNotesPreviewDialog",v=>{b.documentNotesPreview.document.id=v?.document?.id||null,b.documentNotesPreview.document.title=v?.document?.title||null,b.documentNotesPreview.visible=!0}),le.on("showUploadingDialog",v=>{b.uploading.transfers.unshift(...v.transfers),b.uploading.visible=b.uploading.transfers?.length>0&&x.openUploadDialog}),le.on("refreshUploadingDialog.fileUploaded",v=>{b.uploading.transfers.length>0?v.transfers?.forEach(A=>{const y=b.uploading.transfers?.find(S=>!S.processed&&A.filename==S.filename&&A.filesize==S.filesize);y?(y.end=ct(),y.uploading=!1,y.done=!0,y.processed=!0):console.error("Transfer not found",A)}):console.error("Missing previous transfers"),b.uploading.visible=b.uploading.transfers?.length>0&&x.openUploadDialog}),le.on("refreshUploadingDialog.fileUploadRejected",v=>{v.transfers?.forEach(A=>{const y=b.uploading.transfers?.find(S=>!S.processed&&A.filename==S.filename&&A.filesize==S.filesize);y?(y.end=ct(),y.uploading=!1,y.error=!0,y.errorHTTPCode=A.errorHTTPCode,y.errorMessage="Transfer rejected",y.processed=!0):b.uploading.transfers.unshift(A)}),b.uploading.visible=b.uploading.transfers?.length>0}),le.on("refreshUploadingDialog.fileUploadFailed",v=>{v.transfers?.forEach(A=>{const y=b.uploading.transfers?.find(S=>!S.processed&&A.filename==S.filename&&A.filesize==S.filesize);y?(y.end=ct(),y.uploading=!1,y.error=!0,y.errorHTTPCode=A.errorHTTPCode,y.errorMessage="Transfer failed",y.processed=!0):b.uploading.transfers.unshift(A)}),b.uploading.visible=b.uploading.transfers?.length>0}),le.on("showAttachmentShareDialog",v=>{b.attachmentShare.visible=!0,b.attachmentShare.attachmentId=v.attachmentId,b.attachmentShare.create=v.create})}),Ue(()=>{le.off("reAuthRequired"),le.off("showDocumentFilePreviewDialog"),le.off("showDocumentFilesPreviewDialog"),le.off("showDocumentNotesPreviewDialog"),le.off("showUploadingDialog"),le.off("refreshUploadingDialog.fileUploaded"),le.off("refreshUploadingDialog.fileUploadRejected"),le.off("refreshUploadingDialog.fileUploadFailed"),le.off("showAttachmentShareDialog")}),(v,A)=>{const y=it("router-view");return R(),me(ka,{view:"lHh lpR lFf",class:"theme-default-q-layout"},{default:I(()=>[q(ln,{"height-hint":"61.59",class:"theme-default-q-header",bordered:""},{default:I(()=>[q(sn,{class:"theme-default-q-toolbar"},{default:I(()=>[Me(q(Be,{flat:"",dense:"",round:"",onClick:A[0]||(A[0]=S=>{c.value=!c.value}),"aria-label":"Toggle drawer",icon:"menu",class:"q-mr-md"},null,512),[[Le,!c.value]]),Me(q(Be,{flat:"",dense:"",round:"",onClick:k,"aria-label":"Toggle drawer",icon:h.value?"arrow_forward_ios":"arrow_back_ios_new",class:"q-mr-md"},{default:I(()=>[q(qt,null,{default:I(()=>[re(F(O(p)(h.value?"Expand sidebar":"Collapse sidebar")),1)]),_:1})]),_:1},8,["icon"]),[[Le,c.value]]),q(Be,{type:"button","no-caps":"","no-wrap":"",align:"left",outline:"",label:E.value,icon:"search",class:"full-width no-caps theme-default-q-btn",onClick:A[1]||(A[1]=Ne(S=>b.fastSearch.visible=!0,["prevent"]))},{default:I(()=>[q(qt,{anchor:"bottom middle",self:"top middle"},{default:I(()=>[re(F(O(p)("Click to open fast search")),1)]),_:1})]),_:1},8,["label"]),q(Zt,{flat:"",class:"q-ml-md"},{default:I(()=>[q(Ja,{dense:""}),q(en,{"short-labels":!0,style:{"min-width":"9em"}}),q(tn,{dense:"",href:O(xa)},null,8,["href"])]),_:1})]),_:1})]),_:1}),q(cn,{modelValue:c.value,"onUpdate:modelValue":A[2]||(A[2]=S=>c.value=S),mini:h.value},null,8,["modelValue","mini"]),q(Sn,{modelValue:b.fastSearch.visible,"onUpdate:modelValue":A[3]||(A[3]=S=>b.fastSearch.visible=S)},null,8,["modelValue"]),q(Aa,null,{default:I(()=>[q(y,{class:"q-pa-sm"})]),_:1}),b.reauth.visible?(R(),me(kn,{key:0,onSuccess:d,onClose:A[4]||(A[4]=S=>b.reauth.visible=!1)})):Ce("",!0),b.filePreview.visible?(R(),me(Yn,{key:1,document:b.filePreview.document,"current-index":b.filePreview.currentIndex,onClose:A[5]||(A[5]=S=>b.filePreview.visible=!1)},null,8,["document","current-index"])):Ce("",!0),b.documentFilesPreview.visible&&b.documentFilesPreview.document.id&&b.documentFilesPreview.document.title?(R(),me(so,{key:2,"document-id":b.documentFilesPreview.document.id,"document-title":b.documentFilesPreview.document.title,onClose:A[6]||(A[6]=S=>b.documentFilesPreview.visible=!1)},null,8,["document-id","document-title"])):Ce("",!0),b.documentNotesPreview.visible&&b.documentNotesPreview.document.id&&b.documentNotesPreview.document.title?(R(),me(wo,{key:3,"document-id":b.documentNotesPreview.document.id,"document-title":b.documentNotesPreview.document.title,onClose:A[7]||(A[7]=S=>b.documentNotesPreview.visible=!1)},null,8,["document-id","document-title"])):Ce("",!0),q(To,{modelValue:b.uploading.visible,"onUpdate:modelValue":A[8]||(A[8]=S=>b.uploading.visible=S),transfers:b.uploading.transfers,onClearProcessedTransfers:D},null,8,["modelValue","transfers"]),b.attachmentShare.visible?(R(),me(oi,{key:4,"attachment-id":b.attachmentShare.attachmentId,create:b.attachmentShare.create,onClose:A[9]||(A[9]=S=>b.attachmentShare.visible=!1)},null,8,["attachment-id","create"])):Ce("",!0)]),_:1})}}});export{Bi as default};
