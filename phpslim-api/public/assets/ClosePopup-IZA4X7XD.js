import{p as j,g as l,q,af as G,D as W,s as he,i as _,x as M,H as ge,a0 as ve,z as me,L as pe,B as ye}from"./index-DWyQQ7Hn.js";import{h as z,s as ke,g as Be,j as xe}from"./_plugin-vue_export-helper-CbIelGhP.js";import{u as Pe,y as qe,z as A,o as Ce,b as Ee,d as be,m as Te,e as we,q as Se,f as Oe,r as De,A as Fe,n as Ke,g as Le,s as _e,B as H,C as Me,t as Ae,D as R,E as He,F as Re,G as Qe,H as $e}from"./QItem-COEiYpOr.js";const Xe=j({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:o}){const n=l(()=>{const a=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(s=>e[s]===!0).map(s=>`q-btn-group--${s}`).join(" ");return`q-btn-group row no-wrap${a.length!==0?" "+a:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>q("div",{class:n.value},z(o.default))}}),r=[];let f;function je(e){f=e.keyCode===27}function Ge(){f===!0&&(f=!1)}function We(e){f===!0&&(f=!1,G(e,27)===!0&&r[r.length-1](e))}function I(e){window[e]("keydown",je),window[e]("blur",Ge),window[e]("keyup",We),f=!1}function ze(e){W.is.desktop===!0&&(r.push(e),r.length===1&&I("addEventListener"))}function Q(e){const o=r.indexOf(e);o!==-1&&(r.splice(o,1),r.length===0&&I("removeEventListener"))}const c=[];function N(e){c[c.length-1](e)}function Ie(e){W.is.desktop===!0&&(c.push(e),c.length===1&&document.body.addEventListener("focusin",N))}function Ne(e){const o=c.indexOf(e);o!==-1&&(c.splice(o,1),c.length===0&&document.body.removeEventListener("focusin",N))}const Ye=j({name:"QMenu",inheritAttrs:!1,props:{...Te,...be,...Ee,...Ce,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:A},self:{type:String,validator:A},offset:{type:Array,validator:qe},scrollTarget:ke,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Pe,"click","escapeKey"],setup(e,{slots:o,emit:n,attrs:a}){let s=null,m,h,p;const C=he(),{proxy:y}=C,{$q:u}=y,i=_(null),d=_(!1),U=l(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),J=we(e,u),{registerTick:V,removeTick:X}=Se(),{registerTimeout:E}=Oe(),{transitionProps:Y,transitionStyle:Z}=De(e),{localScrollTarget:b,changeScrollEvent:ee,unconfigureScrollTarget:te}=Fe(e,K),{anchorEl:g,canShow:oe}=Ke({showing:d}),{hide:T}=Le({showing:d,canShow:oe,handleShow:ie,handleHide:le,hideOnRouteChange:U,processOnMount:!0}),{showPortal:w,hidePortal:S,renderPortal:ne}=_e(C,i,ce,"menu"),k={anchorEl:g,innerRef:i,onClickOutside(t){if(e.persistent!==!0&&d.value===!0)return T(t),(t.type==="touchstart"||t.target.classList.contains("q-dialog__backdrop"))&&pe(t),!0}},O=l(()=>R(e.anchor||(e.cover===!0?"center middle":"bottom start"),u.lang.rtl)),se=l(()=>e.cover===!0?O.value:R(e.self||"top start",u.lang.rtl)),ae=l(()=>(e.square===!0?" q-menu--square":"")+(J.value===!0?" q-menu--dark q-dark":"")),ue=l(()=>e.autoClose===!0?{onClick:re}:{}),D=l(()=>d.value===!0&&e.persistent!==!0);M(D,t=>{t===!0?(ze(x),Re(k)):(Q(x),H(k))});function B(){Ae(()=>{let t=i.value;t&&t.contains(document.activeElement)!==!0&&(t=t.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||t.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||t.querySelector("[autofocus], [data-autofocus]")||t,t.focus({preventScroll:!0}))})}function ie(t){if(s=e.noRefocus===!1?document.activeElement:null,Ie(L),w(),K(),m=void 0,t!==void 0&&(e.touchPosition||e.contextMenu)){const P=ge(t);if(P.left!==void 0){const{top:de,left:fe}=g.value.getBoundingClientRect();m={left:P.left-fe,top:P.top-de}}}h===void 0&&(h=M(()=>u.screen.width+"|"+u.screen.height+"|"+e.self+"|"+e.anchor+"|"+u.lang.rtl,v)),e.noFocus!==!0&&document.activeElement.blur(),V(()=>{v(),e.noFocus!==!0&&B()}),E(()=>{u.platform.is.ios===!0&&(p=e.autoClose,i.value.click()),v(),w(!0),n("show",t)},e.transitionDuration)}function le(t){X(),S(),F(!0),s!==null&&(t===void 0||t.qClickOutside!==!0)&&(((t?.type.indexOf("key")===0?s.closest('[tabindex]:not([tabindex^="-"])'):void 0)||s).focus(),s=null),E(()=>{S(!0),n("hide",t)},e.transitionDuration)}function F(t){m=void 0,h!==void 0&&(h(),h=void 0),(t===!0||d.value===!0)&&(Ne(L),te(),H(k),Q(x)),t!==!0&&(s=null)}function K(){(g.value!==null||e.scrollTarget!==void 0)&&(b.value=Be(g.value,e.scrollTarget),ee(b.value,v))}function re(t){p!==!0?(He(y,t),n("click",t)):p=!1}function L(t){D.value===!0&&e.noFocus!==!0&&xe(i.value,t.target)!==!0&&B()}function x(t){e.noEscDismiss!==!0&&(n("escapeKey"),T(t))}function v(){Me({targetEl:i.value,offset:e.offset,anchorEl:g.value,anchorOrigin:O.value,selfOrigin:se.value,absoluteOffset:m,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ce(){return q(ve,Y.value,()=>d.value===!0?q("div",{role:"menu",...a,ref:i,tabindex:-1,class:["q-menu q-position-engine scroll"+ae.value,a.class],style:[a.style,Z.value],...ue.value},z(o.default)):null)}return me(F),Object.assign(y,{focus:B,updatePosition:v}),ne}});function $(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}const Ze=ye({name:"close-popup",beforeMount(e,{value:o}){const n={depth:$(o),handler(a){n.depth!==0&&setTimeout(()=>{const s=Qe(e);s!==void 0&&$e(s,a,n.depth)})},handlerKey(a){G(a,13)===!0&&n.handler(a)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:o,oldValue:n}){o!==n&&(e.__qclosepopup.depth=$(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}});export{Ze as C,Xe as Q,Ye as a,Q as b,Ie as c,ze as d,Ne as r};
