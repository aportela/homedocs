"use strict";(globalThis["webpackChunkhomedocs"]=globalThis["webpackChunkhomedocs"]||[]).push([[209],{8887:(e,a,l)=>{l.d(a,{o:()=>n});var t=l(587),o=l(660);Array.from(window.location.host).reduce(((e,a)=>0|31*e+a.charCodeAt(0)),0);const n=(0,t.nY)("initialState",{state:()=>({initialState:{allowSignUp:!1,maxUploadFileSize:1}}),getters:{isSignUpAllowed:e=>e.initialState.allowSignUp,maxUploadFileSize:e=>e.initialState.maxUploadFileSize},actions:{load(){o.api.common.initialState().then((e=>{this.initialState.allowSignUp=e.data.initialState.allowSignUp,this.initialState.maxUploadFileSize=e.data.initialState.maxUploadFileSize})).catch((e=>{console.error(e.response)}))}}})},209:(e,a,l)=>{l.r(a),l.d(a,{default:()=>K});l(239);var t=l(1758),o=l(8734),n=l(8790),i=l(660),s=l(6880),u=l(8887),r=l(455),d=l(3537),c=l(6246),b=l(4907),p=l(985),g=l(7157);const m=(0,t.Lk)("img",{src:"icons/favicon-128x128.png"},null,-1),k={class:"text-center"},v={__name:"MainLayout",setup(e){const{t:a}=(0,d.s9)(),l=(0,b.A)(),v=(0,s.B)();v.isLoaded||v.load();const f=(0,u.o)(),_=(0,r.rd)(),h=(0,t.EW)((()=>v.isLogged)),F=(0,o.KR)(l.screen.gt.lg),A=(0,o.KR)(""),S=(0,o.KR)([]),x=(0,o.KR)(!1),y=[{shortLabel:"EN",label:"English",value:"en-US"},{shortLabel:"ES",label:"EspaÃ±ol",value:"es-ES"},{shortLabel:"GL",label:"Galego",value:"gl-GL"}],q=[{icon:"storage",text:"Dashboard",routeName:"index"},{icon:"note_add",text:"Add",routeName:"newDocument"},{icon:"find_in_page",text:"Advanced search",routeName:"advancedSearch"}],w=((0,t.EW)((()=>l.dark.isActive?"dark_mode":"light_mode")),y.find((e=>e.value==p.defaultLocale))),Q=(0,o.KR)(w||y[0]);function L(e,t){e&&e.trim().length>0?(S.value=[],x.value=!0,t((()=>{i.api.document.search(1,8,{title:e},"title","ASC").then((e=>{S.value=e.data.results.documents.map((e=>({id:e.id,label:e.title,caption:a("Fast search caption",{creation:c.Ay.formatDate(1e3*e.createdOnTimestamp,"YYYY-MM-DD HH:mm:ss"),attachmentCount:e.fileCount})}))),x.value=!1})).catch((e=>{x.value=!1,l.notify({type:"negative",message:a("API Error: fatal error"),caption:a("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})})}))}))):t((()=>{S.value=[]}))}function W(e,a){Q.value=e,p.i18n.global.locale.value=e.value,a&&v.saveLocale(e.value)}function C(){i.api.user.signOut().then((e=>{v.signOut(),_.push({name:"signIn"})})).catch((e=>{l.notify({type:"negative",message:a("API Error: fatal error"),caption:a("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})})}))}return f.load(),(e,l)=>{const i=(0,t.g2)("q-btn"),s=(0,t.g2)("q-avatar"),u=(0,t.g2)("q-spinner-pie"),r=(0,t.g2)("q-item-section"),d=(0,t.g2)("q-item"),c=(0,t.g2)("q-icon"),b=(0,t.g2)("q-item-label"),p=(0,t.g2)("q-list"),v=(0,t.g2)("q-select"),f=(0,t.g2)("q-space"),_=(0,t.g2)("q-separator"),w=(0,t.g2)("q-menu"),E=(0,t.g2)("q-toolbar"),U=(0,t.g2)("q-header"),R=(0,t.g2)("q-scroll-area"),z=(0,t.g2)("q-drawer"),I=(0,t.g2)("router-view"),P=(0,t.g2)("q-page-container"),T=(0,t.g2)("q-layout"),X=(0,t.gN)("close-popup"),D=(0,t.gN)("ripple");return(0,t.uX)(),(0,t.Wv)(T,{class:"bg-grey-1"},{default:(0,t.k6)((()=>[(0,t.bF)(U,{elevated:"",class:"text-white",style:{background:"#24292e"},"height-hint":"61.59"},{default:(0,t.k6)((()=>[(0,t.bF)(E,{class:"q-py-sm q-px-md"},{default:(0,t.k6)((()=>[h.value?((0,t.uX)(),(0,t.Wv)(i,{key:0,class:"mobile-only",flat:"",dense:"",round:"",onClick:l[0]||(l[0]=e=>F.value=!F.value),"aria-label":"Menu",icon:"menu"})):(0,t.Q3)("",!0),(0,t.bF)(s,{square:"",size:"42px"},{default:(0,t.k6)((()=>[m])),_:1}),(0,t.eW)(" HomeDocs "),h.value?((0,t.uX)(),(0,t.Wv)(v,{key:1,ref:"search",dark:"",dense:"",standout:"","use-input":"","hide-selected":"",class:"q-mx-md",color:"black","stack-label":!1,label:(0,o.R1)(a)("Search..."),modelValue:A.value,"onUpdate:modelValue":l[1]||(l[1]=e=>A.value=e),options:S.value,onFilter:L,style:{width:"100%"}},(0,t.eX)({option:(0,t.k6)((e=>[(0,t.bF)(p,{class:"bg-grey-9 text-white"},{default:(0,t.k6)((()=>[(0,t.bF)(d,(0,t.v6)(e.itemProps,{to:{name:"document",params:{id:e.opt.id}}}),{default:(0,t.k6)((()=>[(0,t.bF)(r,{side:""},{default:(0,t.k6)((()=>[(0,t.bF)(c,{name:"collections_bookmark"})])),_:1}),(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.opt.label),1)])),_:2},1024),(0,t.bF)(b,{caption:""},{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.opt.caption),1)])),_:2},1024)])),_:2},1024)])),_:2},1040,["to"])])),_:2},1024)])),_:2},[x.value?{name:"no-option",fn:(0,t.k6)((()=>[(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",k,[(0,t.bF)(u,{color:"grey-5",size:"24px"})])])),_:1})])),_:1})])),key:"0"}:void 0]),1032,["label","modelValue","options"])):(0,t.Q3)("",!0),(0,t.bF)(f),(0,t.bF)(i,{dense:"",flat:"","no-wrap":""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{rounded:"",size:"24px",class:"q-mr-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{name:"language"})])),_:1}),(0,t.eW)(" "+(0,n.v_)(Q.value.shortLabel)+" ",1),(0,t.bF)(c,{name:"arrow_drop_down",size:"16px"}),(0,t.bF)(w,{"auto-close":""},{default:(0,t.k6)((()=>[(0,t.bF)(p,{dense:"",style:{"min-width":"200px"}},{default:(0,t.k6)((()=>[(0,t.bF)(d,{class:"GL__menu-link-signed-in"},{default:(0,t.k6)((()=>[(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.eW)((0,n.v_)((0,o.R1)(a)("Selected language"))+": ",1),(0,t.Lk)("strong",null,(0,n.v_)(Q.value.label),1)])])),_:1})])),_:1}),(0,t.bF)(_),((0,t.uX)(),(0,t.CE)(t.FK,null,(0,t.pI)(y,(e=>(0,t.bo)((0,t.bF)(d,{clickable:"",disable:Q.value.value==e.value,key:e.value,onClick:a=>W(e,!0)},{default:(0,t.k6)((()=>[(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,(0,n.v_)(e.label),1)])),_:2},1024)])),_:2},1032,["disable","onClick"]),[[X]]))),64))])),_:1})])),_:1})])),_:1}),(0,t.bF)(i,{round:"",dense:"",flat:"",ripple:!1,icon:(0,o.R1)(g.Rsz),size:"md",color:"white",class:"q-ml-sm","no-caps":"",href:"http://github.com/aportela/homedocs",target:"_blank"},null,8,["icon"])])),_:1})])),_:1}),h.value?((0,t.uX)(),(0,t.Wv)(z,{key:0,modelValue:F.value,"onUpdate:modelValue":l[2]||(l[2]=e=>F.value=e),"show-if-above":"",bordered:"",class:"bg-grey-2",width:240},{default:(0,t.k6)((()=>[(0,t.bF)(R,{class:"fit"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{padding:""},{default:(0,t.k6)((()=>[(0,t.bF)(b,{header:"",class:"text-weight-bold text-uppercase"},{default:(0,t.k6)((()=>[(0,t.eW)(" Menu ")])),_:1}),((0,t.uX)(),(0,t.CE)(t.FK,null,(0,t.pI)(q,(e=>(0,t.bo)((0,t.bF)(d,{key:e.text,clickable:"",to:{name:e.routeName}},{default:(0,t.k6)((()=>[(0,t.bF)(r,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(c,{color:"grey",name:e.icon},null,8,["name"])])),_:2},1024),(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)((0,o.R1)(a)(e.text)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"]),[[D]]))),64)),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(d,{clickable:"",onClick:C},{default:(0,t.k6)((()=>[(0,t.bF)(r,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(c,{color:"grey",name:"logout"})])),_:1}),(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)((0,o.R1)(a)("Sign out")),1)])),_:1})])),_:1})])),_:1})),[[D]])])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,t.Q3)("",!0),(0,t.bF)(P,null,{default:(0,t.k6)((()=>[(0,t.bF)(I)])),_:1})])),_:1})}}};var f=l(2008),_=l(8416),h=l(6914),F=l(6384),A=l(3952),S=l(5178),x=l(124),y=l(5173),q=l(594),w=l(3999),Q=l(492),L=l(3796),W=l(3676),C=l(9519),E=l(386),U=l(6056),R=l(9383),z=l(5205),I=l(8672),P=l(9626),T=l(8582),X=l.n(T);const D=v,K=D;X()(v,"components",{QLayout:f.A,QHeader:_.A,QToolbar:h.A,QBtn:F.A,QAvatar:A.A,QSelect:S.A,QItem:x.A,QItemSection:y.A,QSpinnerPie:q.A,QList:w.A,QIcon:Q.A,QItemLabel:L.A,QSpace:W.A,QMenu:C.A,QSeparator:E.A,QDrawer:U.A,QScrollArea:R.A,QPageContainer:z.A}),X()(v,"directives",{ClosePopup:I.A,Ripple:P.A})}}]);