"use strict";(globalThis["webpackChunkhomedocs"]=globalThis["webpackChunkhomedocs"]||[]).push([[119],{8957:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Oe});var l=t(1758),o=t(8734),r=t(5931),s=(t(310),t(2203),t(6724),t(9104)),n=t(8790),i=t(3537),d=t(5192),u=t(4907),m=t(3597),c=t(8051),p=t(7836),v=t(2732),b=t(4199);function g(){const{bus:e}=(0,m.U)(),{fullDateTimeHuman:a,timeAgo:t,currentTimestamp:l,currentFullDateTimeHuman:r,currentTimeAgo:s}=(0,b.c)(),n=e=>e.replace(/[.*+?^=!:${}()|\[\]\/\\]/g,"\\$&"),i=()=>{const e=(0,o.Kh)({id:(0,d.A)(),body:null,createdOnTimestamp:l(),creationDate:r(),creationDateTimeAgo:s(),expanded:!1,startOnEditMode:!0});return e},u=()=>{const n=(0,o.Kh)({id:null,title:null,description:null,createdOn:{timestamp:null,dateTime:null,timeAgo:null},lastUpdate:{timestamp:null,dateTime:null,timeAgo:null},attachments:[],tags:[],notes:[],historyOperations:[],hasAttachments(){return n.attachments?.length>0},hasTags(){return n.tags?.length>0},hasNotes(){return n.notes?.length>0},hasHistoryOperations(){return n.historyOperations?.length>0},reset(){n.id=null,n.title=null,n.description=null,n.createdOn.timestamp=null,n.createdOn.dateTime=null,n.createdOn.timeAgo=null,n.lastUpdate.timestamp=null,n.lastUpdate.dateTime=null,n.lastUpdate.timeAgo=null,n.attachments.length=0,n.tags.length=0,n.notes.length=0,n.historyOperations.length=0},setFromAPIJSON(e){n.id=e.id,n.title=e.title,n.description=e.description,e.createdOnTimestamp?(n.createdOn.timestamp=e.createdOnTimestamp,n.createdOn.dateTime=a(e.createdOnTimestamp),n.createdOn.timeAgo=t(e.createdOnTimestamp)):(n.createdOn.timestamp=null,n.createdOn.dateTime=null,n.createdOn.timeAgo=null),e.lastUpdateTimestamp?(n.lastUpdate.timestamp=e.lastUpdateTimestamp,n.lastUpdate.dateTime=a(e.lastUpdateTimestamp),n.lastUpdate.timeAgo=t(e.lastUpdateTimestamp)):(n.lastUpdate.timestamp=null,n.lastUpdate.dateTime=null,n.lastUpdate.timeAgo=null),n.tags.length=0,Array.isArray(e.tags)&&n.tags.push(...e.tags),n.attachments.length=0,Array.isArray(e.attachments)&&n.attachments.push(...JSON.parse(JSON.stringify(e.attachments)).map(e=>(e.creationDate=a(e.createdOnTimestamp),e.creationDateTimeAgo=t(e.createdOnTimestamp),e.humanSize=v.Ay.humanStorageSize(e.size),e.url="api2/attachment/"+e.id,e.orphaned=!1,e))),n.notes.length=0,Array.isArray(e.notes)&&n.notes.push(...JSON.parse(JSON.stringify(e.notes)).map(e=>(e.creationDate=a(e.createdOnTimestamp),e.creationDateTimeAgo=t(e.createdOnTimestamp),e.expanded=!1,e.startOnEditMode=!1,e))),n.historyOperations.length=0,Array.isArray(e.history)&&n.historyOperations.push(...JSON.parse(JSON.stringify(e.history)).map(e=>{switch(e.creationDate=a(e.operationTimestamp),e.creationDateTimeAgo=t(e.operationTimestamp),e.operationType){case 1:e.label="Document created",e.icon="post_add";break;case 2:e.label="Document updated",e.icon="edit_note";break;default:e.label="Unknown operation",e.icon="error";break}return e}))},addAttachment(e,a,t){const i=e||(0,d.A)();n.attachments.unshift((0,o.Kh)({id:i,createdOnTimestamp:l(),creationDate:r(),creationDateTimeAgo:s(),name:a,size:t||0,hash:null,humanSize:t>0?v.Ay.humanStorageSize(t):null,url:"api2/attachment/"+i,orphaned:!0}))},removeAttachmentAtIdx(e){n.attachments?.splice(e,1)},previewAttachment(a){a>=0&&a<n.attachments?.length&&e.emit("showDocumentFilePreviewDialog",{document:{id:n.id,title:n.title,attachments:n.attachments},currentIndex:a})},addNote(){n.notes.unshift(i())},removeNoteAtIdx(e){n.notes?.splice(e,1)}});return n};return{escapeRegExp:n,getNewNote:i,getNewDocument:u}}var h=t(8887),f=t(9295);const k={class:"row q-col-gutter-x-sm"},A={style:{"font-size":"14px"}},y={key:0,class:"col-6"},R={style:{"font-size":"14px"}},q={__name:"DocumentMetadataTopForm",props:{createdOnTimestamp:{type:Number,required:!1,default:0,validator(e){return e>0}},lastUpdateTimestamp:{type:Number,required:!1,default:0,validator(e){return e>0}}},setup(e){const a=e,{t}=(0,i.s9)(),{screen:r}=(0,u.A)(),{fullDateTimeHuman:s,timeAgo:d}=(0,b.c)(),m=(0,l.EW)(()=>r.gt.xs),c=(0,o.KR)(a.createdOnTimestamp?s(a.createdOnTimestamp):null),p=(0,o.KR)(a.lastUpdateTimestamp?s(a.lastUpdateTimestamp):null),v=(0,o.KR)(a.createdOnTimestamp?d(a.createdOnTimestamp):null),g=(0,o.KR)(a.lastUpdateTimestamp?d(a.lastUpdateTimestamp):null);return(0,l.wB)(()=>a.createdOnTimestamp,e=>{c.value=e?s(e):null,v.value=e?d(e):null}),(0,l.wB)(()=>a.lastUpdateTimestamp,e=>{p.value=e?s(e):null,g.value=e?d(e):null}),(a,r)=>{const s=(0,l.g2)("q-input");return(0,l.uX)(),(0,l.CE)("div",k,[(0,l.Lk)("div",{class:(0,n.C4)({"col-6":e.createdOnTimestamp!=e.lastUpdateTimestamp,"col-12":e.createdOnTimestamp==e.lastUpdateTimestamp})},[(0,l.bF)(s,{dense:"",class:"q-mb-md",outlined:"",modelValue:c.value,"onUpdate:modelValue":r[0]||(r[0]=e=>c.value=e),label:(0,o.R1)(t)("Created on"),readonly:""},(0,l.eX)({_:2},[m.value?{name:"append",fn:(0,l.k6)(()=>[(0,l.Lk)("span",A,(0,n.v_)(v.value),1)]),key:"0"}:void 0]),1032,["modelValue","label"])],2),e.createdOnTimestamp!=e.lastUpdateTimestamp?((0,l.uX)(),(0,l.CE)("div",y,[(0,l.bF)(s,{dense:"",class:"q-mb-md",outlined:"",modelValue:p.value,"onUpdate:modelValue":r[1]||(r[1]=e=>p.value=e),label:(0,o.R1)(t)("Last update"),readonly:""},(0,l.eX)({_:2},[m.value?{name:"append",fn:(0,l.k6)(()=>[(0,l.Lk)("span",R,(0,n.v_)(g.value),1)]),key:"0"}:void 0]),1032,["modelValue","label"])])):(0,l.Q3)("",!0)])}}};var _=t(9270),F=t(8582),x=t.n(F);const D=q,E=D;x()(q,"components",{QInput:_.A});t(5962);var T=t(5801),w=t(2956),V=t(129),C=t(1112),I=t(2139);const O={key:1,class:"q-list-attachments-container scroll"},W={__name:"DocumentDetailsAttachments",props:{modelValue:{type:Array,required:!1,default:()=>[],validator(e){return Array.isArray(e)}},disable:{type:Boolean,required:!1,default:!1}},emits:["update:modelValue","addAttachment","previewAttachmentAtIndex"],setup(e,{emit:a}){const{t}=(0,i.s9)(),{bgDownload:r}=(0,T.q)(),{api:d}=(0,c.M)(),{bus:u}=(0,m.U)(),{allowPreview:p}=(0,w.h)(),{escapeRegExp:b}=g(),h=a,f=e,k=(0,o.Kh)({loading:!1,loadingError:!1,errorMessage:null,apiError:null}),A=(0,l.EW)(()=>f.disable||k.loading),y=(0,l.EW)({get(){return f.modelValue},set(e){h("update:modelValue",e)}}),R=(0,o.KR)([]),q=(0,l.EW)(()=>y.value?.length>0),_=(0,o.KR)(null),F=e=>{if(e){const a=new RegExp(b(e),"i");R.value=y.value?.filter(e=>!e.name?.match(a)).map(e=>e.id)}else R.value=[]},x=()=>{h("addAttachment")},D=e=>{y.value[e].orphaned?(k.loading=!0,k.loadingError=!1,k.errorMessage=null,k.apiError=null,d.document.removeFile(y.value[e].id).then(a=>{k.loading=!1,y.value=y.value.filter((a,t)=>t!==e)}).catch(e=>{switch(k.loading=!1,k.loadingError=!0,k.apiError=e.customAPIErrorDetails,e.response.status){case 401:k.errorMessage="Auth session expired, requesting new...",u.emit("reAuthRequired",{emitter:"DocumentDetailsAttachments.onRemoveAttachmentAtIndex"});break;default:k.errorMessage="API Error: fatal error";break}k.loading=!1})):y.value=y.value.filter((a,t)=>t!==e)},E=e=>{h("previewAttachmentAtIndex",e)},W=(e,a)=>{r(e,a).then(e=>{}).catch(e=>{})};return(0,l.sV)(()=>{u.on("reAuthSucess",e=>{e.to?.includes("DocumentDetailsAttachments.onRemoveAttachmentAtIndex")})}),(0,l.xo)(()=>{u.off("reAuthSucess")}),(e,a)=>{const r=(0,l.g2)("q-icon"),i=(0,l.g2)("q-input"),d=(0,l.g2)("q-item-section"),u=(0,l.g2)("q-btn"),m=(0,l.g2)("q-item"),c=(0,l.g2)("q-separator"),b=(0,l.g2)("q-item-label"),g=(0,l.g2)("q-avatar"),h=(0,l.g2)("q-chip"),f=(0,l.g2)("q-list");return(0,l.uX)(),(0,l.Wv)(f,{class:"bg-transparent q-pa-sm"},{default:(0,l.k6)(()=>[(0,l.bF)(m,{class:"transparent-background text-color-primary q-pa-none"},{default:(0,l.k6)(()=>[(0,l.bo)((0,l.bF)(d,null,{default:(0,l.k6)(()=>[(0,l.bF)(i,{type:"search",outlined:"",dense:"",clearable:"",disable:A.value||!q.value,modelValue:_.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>_.value=e),F],modelModifiers:{trim:!0},label:(0,o.R1)(t)("Filter by text on file name"),placeholder:(0,o.R1)(t)("type text search condition")},{prepend:(0,l.k6)(()=>[(0,l.bF)(r,{name:"filter_alt"})]),_:1},8,["disable","modelValue","label","placeholder"])]),_:1},512),[[s.aG,q.value]]),(0,l.bF)(d,{side:""},{default:(0,l.k6)(()=>[(0,l.bF)(u,{size:"md",label:(0,o.R1)(t)("Add attachment"),icon:"add",class:"bg-blue text-white full-width",disable:A.value,onClick:(0,s.D$)(x,["stop"])},null,8,["label","disable"])]),_:1})]),_:1}),(0,l.bF)(c,{class:"q-my-md"}),k.loadingError&&k.errorMessage?((0,l.uX)(),(0,l.Wv)(C.A,{key:0,text:k.errorMessage,"api-error":k.apiError,class:"q-mt-lg"},null,8,["text","api-error"])):(0,l.Q3)("",!0),q.value?((0,l.uX)(),(0,l.CE)("div",O,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(y.value,(e,a)=>((0,l.uX)(),(0,l.CE)("div",{key:e.id},[(0,l.bo)((0,l.bF)(m,{class:"q-pa-xs bg-transparent",clickable:"",href:e.url,onClick:(0,s.D$)(a=>W(e.url,e.name),["stop","prevent"])},{default:(0,l.k6)(()=>[(0,l.bF)(d,{class:"q-mx-sm"},{default:(0,l.k6)(()=>[(0,l.bF)(b,null,{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)((0,o.R1)(t)("Filename: "))+" "+(0,n.v_)(e.name),1)]),_:2},1024),(0,l.bF)(b,{caption:""},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)((0,o.R1)(t)("Size: "))+(0,n.v_)((0,o.R1)(v.Ay).humanStorageSize(e.size)),1)]),_:2},1024),(0,l.bF)(b,{caption:""},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)((0,o.R1)(t)("Uploaded on: "))+(0,n.v_)(e.creationDate)+" ("+(0,n.v_)(e.creationDateTimeAgo)+") ",1)]),_:2},1024)]),_:2},1024),(0,l.bF)(d,{side:"",middle:"",class:"q-mr-sm q-item-section-attachment-actions"},{default:(0,l.k6)(()=>[(0,l.bF)(h,{size:"md",square:"",class:(0,n.C4)(["theme-default-q-chip shadow-1 full-width text-center",{"cursor-not-allowed":A.value}]),clickable:!A.value,onClick:(0,s.D$)(e=>D(a),["stop","prevent"])},{default:(0,l.k6)(()=>[(0,l.bF)(g,{class:"theme-default-q-avatar text-white bg-blue-6",icon:"delete"}),(0,l.eW)(" "+(0,n.v_)((0,o.R1)(t)("Remove")),1)]),_:1},8,["class","clickable","onClick"]),(0,o.R1)(p)(e.name)?((0,l.uX)(),(0,l.Wv)(h,{key:0,size:"md",square:"",class:(0,n.C4)(["theme-default-q-chip shadow-1 full-width",{"cursor-not-allowed":A.value||!(0,o.R1)(p)(e.name)}]),clickable:!A.value&&(0,o.R1)(p)(e.name),onClick:(0,s.D$)(e=>E(a),["stop","prevent"])},{default:(0,l.k6)(()=>[(0,l.bF)(g,{class:"theme-default-q-avatar text-white bg-blue-6",icon:"preview"}),(0,l.eW)(" "+(0,n.v_)((0,o.R1)(t)("Preview")),1)]),_:1},8,["class","clickable","onClick"])):(0,l.Q3)("",!0)]),_:2},1024),(0,l.bF)(V.A,null,{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)((0,o.R1)(t)("Click to download")),1)]),_:1})]),_:2},1032,["href","onClick"]),[[s.aG,!R.value.includes(e.id)]]),a!==y.value?.length-1?(0,l.bo)(((0,l.uX)(),(0,l.Wv)(c,{key:0,class:"q-my-sm"},null,512)),[[s.aG,!R.value.includes(e.id)]]):(0,l.Q3)("",!0)]))),128))])):A.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(I.A,{key:2,warning:"",text:"No document attachments found",class:"q-ma-none"}))]),_:1})}}};var U=t(2807),Q=t(3999),M=t(124),S=t(5173),X=t(492),z=t(6384),P=t(386),K=t(3796),L=t(6760),N=t(3952);const $=(0,U.A)(W,[["__scopeId","data-v-19a8682e"]]),B=$;x()(W,"components",{QList:Q.A,QItem:M.A,QItemSection:S.A,QInput:_.A,QIcon:X.A,QBtn:z.A,QSeparator:P.A,QItemLabel:K.A,QChip:L.A,QAvatar:N.A});const G={key:0},H={style:{"font-size":"12px",color:"rgba(0, 0, 0, 0.6)","margin-left":"0px","margin-bottom":"4px"}},J={class:"absolute-top-right text-grey q-mt-sm"},Y={key:0,class:"text-red q-ml-sm error-message"},j={__name:"InteractiveTextFieldCustomInput",props:{startModeEditable:{type:Boolean,required:!1,default:!0},modelValue:{type:String,required:!1,default:""},label:{type:String,required:!1},maxLines:{type:Number,required:!1,default:2},rules:{type:Array,default:()=>[],validator(e){return Array.isArray(e)}},autofocus:{type:Boolean,default:!1},error:{type:Boolean,required:!1,default:!1},errorMessage:{type:String,required:!1,default:null}},emits:["update:modelValue"],setup(e,{expose:a,emit:t}){const r=e,d=(0,l.OA)(),{t:m}=(0,i.s9)(),c=(0,u.A)(),p=(0,l.EW)(()=>c.platform.is.desktop),v=t,b=(0,o.KR)(null),g=(0,o.KR)(!r.startModeEditable),h=(0,l.EW)({get(){return r.modelValue},set(e){v("update:modelValue",e)}}),f=(0,o.KR)(!p.value),k=(0,o.KR)(!0),A=()=>{(0,l.dY)(()=>{b.value?.focus()})},y=()=>{p.value&&(f.value=!0)},R=()=>{p.value&&(f.value=!1)},q=()=>{g.value=!g.value,g.value||A()},_=()=>{g.value=!1};return a({focus:A,unsetReadOnly:_}),(0,l.sV)(()=>{r.autofocus&&r.startModeEditable&&A()}),(a,t)=>{const i=(0,l.g2)("q-icon"),u=(0,l.g2)("q-input");return g.value?((0,l.uX)(),(0,l.CE)("div",G,[(0,l.Lk)("div",{class:(0,n.C4)(["cursor-pointer q-pa-sm q-mb-md relative-position white-space-pre-line read-only-input-container",{"border-error":e.error}]),onMouseenter:y,onMouseleave:R,onClick:q},[(0,l.Lk)("div",H,(0,n.v_)(r.label),1),(0,l.Lk)("span",J,[(0,l.RG)(a.$slots,"top-icon-prepend",{showTopHoverIcons:f.value}),(0,l.bo)((0,l.bF)(i,{name:k.value?"expand":"unfold_less",size:"sm",onClick:t[0]||(t[0]=(0,s.D$)(e=>k.value=!k.value,["stop"])),"aria-label":(0,o.R1)(m)(k.value?"Click to expand":"Click to collapse")},{default:(0,l.k6)(()=>[(0,l.bF)(V.A,null,{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)((0,o.R1)(m)(k.value?"Click to expand":"Click to collapse")),1)]),_:1})]),_:1},8,["name","aria-label"]),[[s.aG,f.value]]),(0,l.bo)((0,l.bF)(i,{name:"edit",size:"sm",class:"q-ml-sm","aria-label":(0,o.R1)(m)("Click to toggle edit mode")},{default:(0,l.k6)(()=>[(0,l.bF)(V.A,null,{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)((0,o.R1)(m)("Click to toggle edit mode")),1)]),_:1})]),_:1},8,["aria-label"]),[[s.aG,f.value]]),(0,l.RG)(a.$slots,"top-icon-append",{showTopHoverIcons:f.value})]),(0,l.Lk)("div",{class:(0,n.C4)(["q-mt-sm",{collapsed:k.value}]),style:(0,n.Tr)(`--max-lines: ${e.maxLines}`)},(0,n.v_)(h.value),7)],34),e.error?((0,l.uX)(),(0,l.CE)("p",Y,(0,n.v_)(e.errorMessage),1)):(0,l.Q3)("",!0)])):((0,l.uX)(),(0,l.Wv)(u,(0,l.v6)({key:1},(0,o.R1)(d),{ref_key:"qInputRef",ref:b,label:e.label,modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=e=>h.value=e),modelModifiers:{trim:!0},rules:e.rules,error:e.error,"error-message":e.errorMessage}),{append:(0,l.k6)(()=>[e.error?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(i,{key:0,name:"done",class:"cursor-pointer",onClick:(0,s.D$)(q,["stop"])},{default:(0,l.k6)(()=>[(0,l.bF)(V.A,null,{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)((0,o.R1)(m)("Click to toggle edit mode")),1)]),_:1})]),_:1})),(0,l.RG)(a.$slots,"icon-append-on-edit")]),_:3},16,["label","modelValue","rules","error","error-message"]))}}},Z=(0,U.A)(j,[["__scopeId","data-v-9310c2fa"]]),ee=Z;x()(j,"components",{QIcon:X.A,QInput:_.A});const ae={key:0,class:"q-list-notes-container scroll"},te={__name:"DocumentDetailsNotes",props:{modelValue:{type:Array,required:!1,default:()=>[],validator(e){return Array.isArray(e)}},disable:{type:Boolean,required:!1,default:!1}},emits:["update:modelValue"],setup(e,{emit:a}){const{t}=(0,i.s9)(),{requiredFieldRules:r,fieldIsRequiredLabel:d}=(0,p.b)(),{escapeRegExp:u,getNewNote:m}=g(),c=a,v=e,b=(0,l.EW)({get(){return v.modelValue},set(e){c("update:modelValue",e)}}),h=(0,o.KR)([]),f=(0,l.EW)(()=>b.value?.length>0),k=(0,o.KR)(null),A=e=>{if(e){const a=new RegExp(u(e),"i");h.value=b.value?.filter(e=>!e.body?.match(a)).map(e=>e.id)}else h.value=[]},y=()=>{b.value=[m(),...b.value]},R=e=>{b.value=b.value.filter((a,t)=>t!==e)};return(a,i)=>{const u=(0,l.g2)("q-icon"),m=(0,l.g2)("q-input"),c=(0,l.g2)("q-item-section"),p=(0,l.g2)("q-btn"),v=(0,l.g2)("q-item"),g=(0,l.g2)("q-separator"),q=(0,l.g2)("q-list");return(0,l.uX)(),(0,l.Wv)(q,{class:"bg-transparent q-pa-sm"},{default:(0,l.k6)(()=>[(0,l.bF)(v,{class:"transparent-background text-color-primary q-pa-none"},{default:(0,l.k6)(()=>[(0,l.bo)((0,l.bF)(c,null,{default:(0,l.k6)(()=>[(0,l.bF)(m,{type:"search",outlined:"",dense:"",clearable:"",disable:e.disable||!f.value,modelValue:k.value,"onUpdate:modelValue":[i[0]||(i[0]=e=>k.value=e),A],modelModifiers:{trim:!0},label:(0,o.R1)(t)("Filter by text on note body"),placeholder:(0,o.R1)(t)("type text search condition")},{prepend:(0,l.k6)(()=>[(0,l.bF)(u,{name:"filter_alt"})]),_:1},8,["disable","modelValue","label","placeholder"])]),_:1},512),[[s.aG,f.value]]),(0,l.bF)(c,{side:""},{default:(0,l.k6)(()=>[(0,l.bF)(p,{size:"md",label:(0,o.R1)(t)("Add note"),icon:"add",class:"bg-blue text-white full-width",disable:e.disable,onClick:(0,s.D$)(y,["stop","prevent"])},null,8,["label","disable"])]),_:1})]),_:1}),(0,l.bF)(g,{class:"q-my-md"}),f.value?((0,l.uX)(),(0,l.CE)("div",ae,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(b.value,(a,i)=>(0,l.bo)(((0,l.uX)(),(0,l.Wv)(v,{class:"q-pa-none bg-transparent",key:a.id},{default:(0,l.k6)(()=>[(0,l.bF)(c,null,{default:(0,l.k6)(()=>[(0,l.bF)(ee,{modelValue:a.body,"onUpdate:modelValue":e=>a.body=e,modelModifiers:{trim:!0},dense:"",outlined:"",type:"textarea",maxlength:"4096",autogrow:"",name:"description",label:`${a.creationDate} (${a.creationDateTimeAgo})`,"start-mode-editable":!!a.startOnEditMode,disable:e.disable,clearable:"","max-lines":6,rules:(0,o.R1)(r),error:!a.body,"error-message":(0,o.R1)(d),autofocus:a.startOnEditMode,placeholder:(0,o.R1)(t)("type note body")},{"top-icon-append":(0,l.k6)(({showTopHoverIcons:e})=>[(0,l.bo)((0,l.bF)(u,{name:"delete",size:"sm",class:"q-ml-sm q-mr-sm",clickable:"",onClick:(0,s.D$)(e=>R(i),["stop","prevent"])},{default:(0,l.k6)(()=>[(0,l.bF)(V.A,null,{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)((0,o.R1)(t)("Click to remove note")),1)]),_:1})]),_:1},8,["onClick"]),[[s.aG,e]])]),"icon-append-on-edit":(0,l.k6)(()=>[(0,l.bF)(u,{name:"delete",size:"sm",class:"cursor-pointer",clickable:"",onClick:(0,s.D$)(e=>R(i),["stop","prevent"])},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","label","start-mode-editable","disable","rules","error","error-message","autofocus","placeholder"])]),_:2},1024)]),_:2},1024)),[[s.aG,!h.value.includes(a.id)]])),128))])):e.disable?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(I.A,{key:1,warning:"",text:"No document notes found",class:"q-ma-none"}))]),_:1})}}},le=(0,U.A)(te,[["__scopeId","data-v-252f544a"]]),oe=le;x()(te,"components",{QList:Q.A,QItem:M.A,QItemSection:S.A,QInput:_.A,QIcon:X.A,QBtn:z.A,QSeparator:P.A});const re={class:"text-left"},se={class:"text-left"},ne={__name:"DocumentDetailsHistory",props:{modelValue:{type:Array,required:!1,default:()=>[],validator(e){return Array.isArray(e)}},disable:{type:Boolean,required:!1,default:!1}},setup(e){const{t:a}=(0,i.s9)(),t=e,r=(0,l.EW)({get(){return t.modelValue},set(e){emit("update:modelValue",e)}}),s=(0,l.EW)(()=>r.value?.length>0);return(t,i)=>{const d=(0,l.g2)("q-icon"),u=(0,l.g2)("q-markup-table");return s.value?((0,l.uX)(),(0,l.Wv)(u,{key:0,class:"bg-transparent q-pa-sm q-list-history-container scroll"},{default:(0,l.k6)(()=>[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",re,(0,n.v_)((0,o.R1)(a)("Date")),1),(0,l.Lk)("th",se,(0,n.v_)((0,o.R1)(a)("Operation")),1)])]),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.value,e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.historyOperationTimestamp},[(0,l.Lk)("td",null,(0,n.v_)(e.creationDate)+" ("+(0,n.v_)(e.creationDateTimeAgo)+")",1),(0,l.Lk)("td",null,[(0,l.bF)(d,{size:"md",name:e.icon,class:"q-mr-sm"},null,8,["name"]),(0,l.eW)((0,n.v_)((0,o.R1)(a)(e.label)),1)])]))),128))])]),_:1})):e.disable?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(I.A,{key:1,warning:"",text:"No document history found",class:"q-ma-none"}))}}};var ie=t(857);const de=(0,U.A)(ne,[["__scopeId","data-v-05f6341b"]]),ue=de;x()(ne,"components",{QMarkupTable:ie.A,QList:Q.A,QIcon:X.A});var me=t(7091);const ce={class:"q-ma-md"},pe={__name:"DeleteDocumentConfirmationDialog",props:{documentId:{type:String,required:!0}},emits:["close"],setup(e,{emit:a}){const{t}=(0,i.s9)(),d=a,{bus:u}=(0,m.U)(),{api:p}=(0,c.M)(),v=(0,r.rd)(),b=e,g=(0,o.KR)(!0),h=(0,o.Kh)({loading:!1,loadingError:!1,errorMessage:null,apiError:null,deleted:!1}),f=()=>{h.loading=!0,h.loadingError=!1,h.errorMessage=null,h.apiError=null,p.document.remove(b.documentId).then(e=>{h.loading=!1,h.deleted=!0}).catch(e=>{switch(h.loadingError=!0,h.apiError=e.customAPIErrorDetails,e.response.status){case 401:h.errorMessage="Auth session expired, requesting new...",u.emit("reAuthRequired",{emitter:"DeleteDocumentConfirmationDialog.onDelete"});break;case 403:h.errorMessage="Error removing (non existent) document";break;case 404:h.errorMessage="Error removing document: access denied";break;default:h.errorMessage="API Error: fatal error";break}h.loading=!1})},k=()=>{g.value=!1,h.deleted?v.push({name:"index"}):d("close")};return(0,l.sV)(()=>{u.on("reAuthSucess",e=>{e.to?.includes("DeleteDocumentConfirmationDialog.onDelete")&&f()})}),(0,l.xo)(()=>{u.off("reAuthSucess")}),(e,a)=>{const r=(0,l.g2)("q-btn");return(0,l.uX)(),(0,l.Wv)(me.A,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=e=>g.value=e),onClose:k,width:"1280px","max-width":"80vw"},{"header-left":(0,l.k6)(()=>[(0,l.eW)((0,n.v_)((0,o.R1)(t)("Delete document")),1)]),body:(0,l.k6)(()=>[(0,l.Lk)("div",ce,[(0,l.Lk)("p",null,(0,n.v_)((0,o.R1)(t)("You are about to delete the current document. Are you sure? (this action cannot be undone).")),1),h.deleted?((0,l.uX)(),(0,l.Wv)(I.A,{key:0,class:"q-mt-lg",success:"",text:"The document has been deleted. Upon closing this dialog, you will be redirected to the home screen."})):h.loadingError?((0,l.uX)(),(0,l.Wv)(C.A,{key:1,text:h.errorMessage,"api-error":h.apiError,class:"q-mt-lg"},null,8,["text","api-error"])):(0,l.Q3)("",!0)])]),actions:(0,l.k6)(()=>[h.deleted?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(r,{key:0,class:"action-secondary",onClick:(0,s.D$)(k,["stop"]),icon:"close",label:(0,o.R1)(t)("Cancel"),disable:h.loading},null,8,["label","disable"])),h.deleted?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(r,{key:1,color:"primary",onClick:(0,s.D$)(f,["stop"]),icon:"done",label:(0,o.R1)(t)("Ok"),disable:h.loading},null,8,["label","disable"])),h.deleted?((0,l.uX)(),(0,l.Wv)(r,{key:2,color:"primary",onClick:(0,s.D$)(k,["stop"]),icon:"done",label:(0,o.R1)(t)("Close")},null,8,["label"])):(0,l.Q3)("",!0)]),_:1},8,["modelValue"])}}},ve=pe,be=ve;x()(pe,"components",{QBtn:z.A});const ge={class:"col-12 col-lg-6 col-xl-6 q-px-sm flex"},he={class:"col-12 col-lg-6 col-xl-6 q-px-sm flex"},fe={__name:"DocumentForm",props:{documentId:{type:String,required:!1}},setup(e){const{t:a}=(0,i.s9)(),t=(0,r.rd)(),{screen:v}=(0,u.A)(),{bus:b}=(0,m.U)(),{api:k}=(0,c.M)(),A=(0,h.o)(),{requiredFieldRules:y,fieldIsRequiredLabel:R}=(0,p.b)(),q=e;(0,l.wB)(()=>q.documentId,e=>{e?(x.id=e,P()):(x.reset(),w.value?.unsetReadOnly(),(0,l.dY)(()=>w.value?.focus()))});const _=(0,l.EW)(()=>v.gt.md),F=(0,l.EW)(()=>!q.documentId),x=g().getNewDocument(),D=(0,l.EW)(()=>A.maxUploadFileSize),T=(0,o.KR)(null),w=(0,o.KR)(null),V=(0,o.Kh)({loading:!1,loadingError:!1,errorMessage:null,apiError:null,saveSuccess:!1,saveError:!1}),O=(0,o.KR)(!1),W=(0,o.KR)(!1),U=((0,o.KR)(!1),(0,o.KR)(!1)),Q=(0,o.KR)(!1),M=(0,o.KR)("metadata"),S=(0,o.KR)("metadata"),X=(0,o.KR)("attachments"),z=e=>{e.preventDefault();const a=e.dataTransfer.files;a.length&&T.value?.addFiles(a)},P=()=>{x.id&&(O.value=!0,V.loading=!0,V.loadingError=!1,V.errorMessage=null,V.apiError=null,V.saveSuccess=!1,V.saveError=!1,M.value="metadata",k.document.get(x.id).then(e=>{x.setFromAPIJSON(e.data.document),O.value=!1,V.loading=!1,(0,l.dY)(()=>w.value?.focus())}).catch(e=>{switch(O.value=!1,V.apiError=e.customAPIErrorDetails,e.response.status){case 401:V.apiError=e.customAPIErrorDetails,V.errorMessage="Auth session expired, requesting new...",b.emit("reAuthRequired",{emitter:"DocumentPage.onRefresh"});break;default:V.loadingError=!0,V.errorMessage="API Error: fatal error";break}V.loading=!1}))},K=()=>{O.value=!0,V.loading=!0,V.loadingError=!1,V.errorMessage=null,V.apiError=null,V.saveSuccess=!1,V.saveError=!1,W.value=!0,F.value?(x.id||(x.id=(0,d.A)()),k.document.add(x).then(e=>{O.value=!1,W.value=!1,t.push({name:"document",params:{id:x.id}})}).catch(e=>{switch(x.id=null,O.value=!1,V.apiError=e.customAPIErrorDetails,V.saveError=!0,W.value=!1,e.response.status){case 400:e.response.data.invalidOrMissingParams.find(function(e){return"title"===e})?(V.errorMessage=a("API Error: missing document title param"),M.value="metadata",(0,l.dY)(()=>w.value?.focus())):e.response.data.invalidOrMissingParams.find(function(e){return"noteBody"===e})?(V.errorMessage=a("API Error: missing document note body"),M.value="details",X.value="notes"):V.errorMessage="API Error: fatal error";break;case 401:V.errorMessage="Auth session expired, requesting new...",b.emit("reAuthRequired",{emitter:"AdvancedSearchPage.onSubmitForm"});break;default:V.errorMessage="API Error: fatal error";break}V.loading=!1})):k.document.update(x).then(e=>{e.data.document?(x.setFromAPIJSON(e.data.document),O.value=!1,V.loading=!1,W.value=!1,V.saveSuccess=!0,"metadata"==M.value&&(0,l.dY)(()=>{w.value?.focus()})):O.value=!1}).catch(e=>{switch(O.value=!1,V.apiError=e.customAPIErrorDetails,V.saveError=!0,W.value=!1,e.response.status){case 400:e.response.data.invalidOrMissingParams.find(function(e){return"title"===e})?(V.errorMessage=a("API Error: missing document title param"),M.value="metadata",(0,l.dY)(()=>w.value?.focus())):e.response.data.invalidOrMissingParams.find(function(e){return"noteBody"===e})?(V.errorMessage=a("API Error: missing document note body"),M.value="details",X.value="notes"):V.errorMessage="API Error: fatal error";break;case 401:V.errorMessage="Auth session expired, requesting new...",b.emit("reAuthRequired",{emitter:"AdvancedSearchPage.onSubmitForm"});break;default:V.errorMessage="API Error: fatal error";break}V.loading=!1})},L=()=>{x.id&&(Q.value=!0)},N=()=>{X.value="attachments",(0,l.dY)(()=>{T.value.pickFiles()})},$=e=>{U.value=!0,b.emit("showUploadingDialog",{transfers:T.value?.files.map(e=>({name:e.name,size:e.size}))})},G=e=>{b.emit("refreshUploadingDialog.fileUploaded",{transfers:e.files.map(e=>({name:e.name,size:e.size}))}),x.addAttachment(JSON.parse(e.xhr.response).data.id,e.files[0].name,e.files[0].size)},H=e=>{const a=e.map(e=>({name:e.file.name,size:e.file.size,error:{status:"max-file-size"==e.failedPropValidation?413:500,statusText:"max-file-size"==e.failedPropValidation?"Content Too Large":"Internal Server Error"}}));b.emit("refreshUploadingDialog.fileUploadRejected",{transfers:a})},J=e=>{const a=e.files.map(a=>({name:a.name,size:a.size,error:{status:e.xhr.status,statusText:e.xhr.statusText}}));b.emit("refreshUploadingDialog.fileUploadFailed",{transfers:a})},Y=()=>{U.value=!1,T.value?.reset()};return(0,l.sV)(()=>{F.value||q.documentId&&(x.id=q.documentId,P()),b.on("reAuthSucess",e=>{e.to?.includes("DocumentPage.onRefresh")&&P(),e.to?.includes("DocumentPage.onSubmitForm")&&K()})}),(0,l.xo)(()=>{b.off("reAuthSucess")}),(e,t)=>{const r=(0,l.g2)("q-uploader"),i=(0,l.g2)("q-spinner-hourglass"),d=(0,l.g2)("q-btn"),u=(0,l.g2)("q-btn-group"),m=(0,l.g2)("q-tab"),c=(0,l.g2)("q-tabs"),p=(0,l.g2)("q-card-section"),v=(0,l.g2)("q-card"),b=(0,l.g2)("q-badge"),g=(0,l.g2)("q-tab-panel"),h=(0,l.g2)("q-tab-panels");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",{onDragover:t[11]||(t[11]=(0,s.D$)(()=>{},["prevent"])),onDragenter:t[12]||(t[12]=(0,s.D$)(()=>{},["prevent"])),onDrop:z},[(0,l.bF)(r,{ref_key:"uploaderRef",ref:T,class:"hidden","hide-upload-btn":"","no-thumbnails":"","auto-upload":"","field-name":"file",method:"post",url:"api2/attachment","max-file-size":D.value,multiple:"",onUploaded:G,onRejected:H,onFailed:J,onStart:$,onFinish:Y},null,8,["max-file-size"]),(0,l.bF)(v,{flat:"",class:"bg-transparent"},{default:(0,l.k6)(()=>[(0,l.Lk)("form",{onSubmit:(0,s.D$)(K,["prevent","stop"]),autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"},[(0,l.bF)(u,{class:"q-ma-sm",spread:""},{default:(0,l.k6)(()=>[(0,l.bF)(d,{type:"submit",icon:"save",size:"md",color:"primary",title:(0,o.R1)(a)("Save"),label:(0,o.R1)(a)("Save"),"no-caps":"",onClick:K,disable:O.value||W.value||U.value||!(0,o.R1)(x).title,loading:W.value},{loading:(0,l.k6)(()=>[(0,l.bF)(i,{class:"on-left"}),(0,l.eW)(" "+(0,n.v_)((0,o.R1)(a)("Saving...")),1)]),_:1},8,["title","label","disable","loading"]),F.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(d,{key:0,type:"button",icon:"autorenew",size:"md",color:"secondary",title:(0,o.R1)(a)("Reload"),label:(0,o.R1)(a)("Reload"),"no-caps":"",onClick:P,loading:O.value},{loading:(0,l.k6)(()=>[(0,l.bF)(i,{class:"on-left"}),(0,l.eW)(" "+(0,n.v_)((0,o.R1)(a)("Loading...")),1)]),_:1},8,["title","label","loading"])),F.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(d,{key:1,type:"button",icon:"delete",size:"md",color:"red",title:(0,o.R1)(a)("Delete"),label:(0,o.R1)(a)("Delete"),"no-caps":"",onClick:L},null,8,["title","label"]))]),_:1}),(0,l.bF)(c,{class:"lt-lg q-mb-sm",modelValue:M.value,"onUpdate:modelValue":t[0]||(t[0]=e=>M.value=e)},{default:(0,l.k6)(()=>[(0,l.bF)(m,{name:"metadata",icon:"description",label:(0,o.R1)(a)("Document metadata"),class:"cursor-default full-width"},null,8,["label"]),(0,l.bF)(m,{name:"details",icon:"list_alt",label:(0,o.R1)(a)("Document details"),class:"cursor-default full-width"},null,8,["label"])]),_:1},8,["modelValue"]),(0,l.bF)(p,{class:"row q-pa-none"},{default:(0,l.k6)(()=>[(0,l.bo)((0,l.Lk)("div",ge,[(0,l.bF)(v,{class:"q-ma-xs q-mt-sm full-width"},{default:(0,l.k6)(()=>[(0,l.bF)(p,{class:"q-pa-none q-mb-sm gt-md"},{default:(0,l.k6)(()=>[(0,l.bF)(c,{modelValue:S.value,"onUpdate:modelValue":t[1]||(t[1]=e=>S.value=e)},{default:(0,l.k6)(()=>[(0,l.bF)(m,{name:"metadata",icon:"description",label:(0,o.R1)(a)("Document metadata"),class:"cursor-default full-width"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(p,{class:"q-pa-md"},{default:(0,l.k6)(()=>[F.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(E,{key:0,"created-on-timestamp":(0,o.R1)(x).createdOn.timestamp,"last-update-timestamp":(0,o.R1)(x).lastUpdate.timestamp},null,8,["created-on-timestamp","last-update-timestamp"])),(0,l.bF)(ee,{ref_key:"documentTitleFieldRef",ref:w,dense:"",class:"q-mb-md",maxlength:"128",outlined:"",modelValue:(0,o.R1)(x).title,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,o.R1)(x).title=e),modelModifiers:{trim:!0},type:"textarea",autogrow:"",name:"title",label:(0,o.R1)(a)("Document title"),disable:O.value||W.value,autofocus:!0,clearable:"","start-mode-editable":F.value,rules:(0,o.R1)(y),error:!(0,o.R1)(x).title,"error-message":(0,o.R1)(R),"max-lines":1},null,8,["modelValue","label","disable","start-mode-editable","rules","error","error-message"]),(0,l.bF)(ee,{dense:"",class:"q-mb-md",outlined:"",modelValue:(0,o.R1)(x).description,"onUpdate:modelValue":t[3]||(t[3]=e=>(0,o.R1)(x).description=e),modelModifiers:{trim:!0},type:"textarea",maxlength:"4096",autogrow:"",name:"description",label:(0,o.R1)(a)("Document description"),disable:O.value||W.value,clearable:"","start-mode-editable":F.value,"max-lines":6},null,8,["modelValue","label","disable","start-mode-editable"]),(0,l.bF)(f.A,{dense:"",modelValue:(0,o.R1)(x).tags,"onUpdate:modelValue":t[4]||(t[4]=e=>(0,o.R1)(x).tags=e),disabled:O.value||W.value,"start-mode-editable":F.value,"deny-change-editable-mode":F.value,clearable:""},null,8,["modelValue","disabled","start-mode-editable","deny-change-editable-mode"])]),_:1})]),_:1})],512),[[s.aG,_.value||"metadata"==M.value]]),(0,l.bo)((0,l.Lk)("div",he,[(0,l.bF)(v,{class:"q-ma-xs q-mt-sm full-width"},{default:(0,l.k6)(()=>[(0,l.bF)(p,{class:"q-pa-none q-mb-sm",style:{"border-bottom":"2px solid rgba(0, 0, 0, 0.12)"}},{default:(0,l.k6)(()=>[(0,l.bF)(c,{modelValue:X.value,"onUpdate:modelValue":t[5]||(t[5]=e=>X.value=e),align:"left"},{default:(0,l.k6)(()=>[(0,l.bF)(m,{name:"attachments",icon:"attach_file",disable:V.loading,label:(0,o.R1)(a)("Attachments")},{default:(0,l.k6)(()=>[(0,l.bo)((0,l.bF)(b,{floating:""},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)((0,o.R1)(x).attachments.length),1)]),_:1},512),[[s.aG,(0,o.R1)(x).hasAttachments]])]),_:1},8,["disable","label"]),(0,l.bF)(m,{name:"notes",icon:"forum",disable:V.loading,label:(0,o.R1)(a)("Notes")},{default:(0,l.k6)(()=>[(0,l.bo)((0,l.bF)(b,{floating:""},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)((0,o.R1)(x).notes.length),1)]),_:1},512),[[s.aG,(0,o.R1)(x).hasNotes]])]),_:1},8,["disable","label"]),(0,o.R1)(x).id?((0,l.uX)(),(0,l.Wv)(m,{key:0,name:"history",icon:"view_timeline",disable:V.loading,label:(0,o.R1)(a)("History")},{default:(0,l.k6)(()=>[(0,l.bo)((0,l.bF)(b,{floating:""},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)((0,o.R1)(x).historyOperations.length),1)]),_:1},512),[[s.aG,(0,o.R1)(x).hasHistoryOperations]])]),_:1},8,["disable","label"])):(0,l.Q3)("",!0)]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(p,{class:"q-pa-none"},{default:(0,l.k6)(()=>[(0,l.bF)(h,{modelValue:X.value,"onUpdate:modelValue":t[10]||(t[10]=e=>X.value=e),animated:"",class:"bg-transparent"},{default:(0,l.k6)(()=>[(0,l.bF)(g,{name:"attachments",class:"q-pa-none"},{default:(0,l.k6)(()=>[(0,l.bF)(B,{modelValue:(0,o.R1)(x).attachments,"onUpdate:modelValue":t[6]||(t[6]=e=>(0,o.R1)(x).attachments=e),disable:O.value||W.value||V.loading,onAddAttachment:N,onPreviewAttachmentAtIndex:t[7]||(t[7]=e=>(0,o.R1)(x).previewAttachment(e))},null,8,["modelValue","disable"])]),_:1}),(0,l.bF)(g,{name:"notes",class:"q-pa-none"},{default:(0,l.k6)(()=>[(0,l.bF)(oe,{modelValue:(0,o.R1)(x).notes,"onUpdate:modelValue":t[8]||(t[8]=e=>(0,o.R1)(x).notes=e),disable:O.value||W.value||V.loading},null,8,["modelValue","disable"])]),_:1}),(0,o.R1)(x).id?((0,l.uX)(),(0,l.Wv)(g,{key:0,name:"history",class:"q-pa-none"},{default:(0,l.k6)(()=>[(0,l.bF)(ue,{modelValue:(0,o.R1)(x).historyOperations,"onUpdate:modelValue":t[9]||(t[9]=e=>(0,o.R1)(x).historyOperations=e),disable:O.value||W.value||V.loading},null,8,["modelValue","disable"])]),_:1})):(0,l.Q3)("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1})],512),[[s.aG,_.value||"details"==M.value]])]),_:1}),(0,l.bF)(p,{class:"q-ma-xs q-mt-sm q-px-xs"},{default:(0,l.k6)(()=>[V.saveSuccess?((0,l.uX)(),(0,l.Wv)(I.A,{key:0,class:"q-mt-md",text:"Document saved",success:""})):V.loadingError||V.saveError?((0,l.uX)(),(0,l.Wv)(C.A,{key:1,class:"q-mt-md","api-error":V.apiError,text:V.errorMessage},null,8,["api-error","text"])):(0,l.Q3)("",!0)]),_:1}),(0,l.bF)(u,{class:"q-ma-sm",spread:""},{default:(0,l.k6)(()=>[(0,l.bF)(d,{type:"submit",icon:"save",size:"md",color:"primary",title:(0,o.R1)(a)("Save"),label:(0,o.R1)(a)("Save"),"no-caps":"",onClick:K,disable:O.value||W.value||U.value||!(0,o.R1)(x).title,loading:W.value},{loading:(0,l.k6)(()=>[(0,l.bF)(i,{class:"on-left"}),(0,l.eW)(" "+(0,n.v_)((0,o.R1)(a)("Saving...")),1)]),_:1},8,["title","label","disable","loading"]),F.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(d,{key:0,type:"button",icon:"autorenew",size:"md",color:"secondary",title:(0,o.R1)(a)("Reload"),label:(0,o.R1)(a)("Reload"),"no-caps":"",onClick:P,loading:O.value},{loading:(0,l.k6)(()=>[(0,l.bF)(i,{class:"on-left"}),(0,l.eW)(" "+(0,n.v_)((0,o.R1)(a)("Loading...")),1)]),_:1},8,["title","label","loading"])),F.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(d,{key:1,type:"button",icon:"delete",size:"md",color:"red",title:(0,o.R1)(a)("Delete"),label:(0,o.R1)(a)("Delete"),"no-caps":"",onClick:L},null,8,["title","label"]))]),_:1})],32)]),_:1})],32),Q.value?((0,l.uX)(),(0,l.Wv)(be,{key:0,"document-id":(0,o.R1)(x).id,onClose:t[13]||(t[13]=e=>Q.value=!1)},null,8,["document-id"])):(0,l.Q3)("",!0)],64)}}};var ke=t(1298),Ae=t(3316),ye=t(6031),Re=t(3194),qe=t(2980),_e=t(327),Fe=t(4189),xe=t(3954),De=t(9041),Ee=t(1746);const Te=fe,we=Te;x()(fe,"components",{QUploader:ke.A,QCard:Ae.A,QBtnGroup:ye.A,QBtn:z.A,QSpinnerHourglass:Re.A,QTabs:qe.A,QTab:_e.A,QCardSection:Fe.A,QBadge:xe.A,QTabPanels:De.A,QTabPanel:Ee.A});const Ve={__name:"DocumentPage",setup(e){const a=(0,r.rd)(),t=(0,r.lq)(),s=(0,o.KR)("document"==t.name&&t.params?.id||null);return a.beforeEach(async(e,a)=>{"newDocument"==e.name?s.value=null:"document"==e.name&&e.params.id&&(s.value=e.params.id)}),(e,a)=>{const t=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(t,null,{default:(0,l.k6)(()=>[(0,l.bF)(we,{"document-id":s.value},null,8,["document-id"])]),_:1})}}};var Ce=t(7716);const Ie=Ve,Oe=Ie;x()(Ve,"components",{QPage:Ce.A})}}]);