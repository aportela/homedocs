"use strict";(globalThis["webpackChunkhomedocs"]=globalThis["webpackChunkhomedocs"]||[]).push([[793],{3075:(e,a,r)=>{r.r(a),r.d(a,{default:()=>C});var s=r(1758),l=r(9104),o=r(8790),n=r(8734),t=r(5192),i=r(3537),u=r(8051),d=r(7836),c=r(8887),g=r(5403),m=r(3465),p=r(9956),b=r(6956),f=r(4798),v=r(2139),h=r(1112);const k={class:"q-mt-sm q-mb-md text-h4 text-weight-bolder"},E={class:"text-grey-6"},A={__name:"SignUpForm",emits:["success"],setup(e,{emit:a}){const r=a,{t:A}=(0,i.s9)(),{api:_}=(0,u.M)(),w=(0,d.b)(),q=(0,c.o)(),F=(0,s.EW)((()=>!1===q.isSignUpAllowed)),R=(0,n.Kh)({loading:!1,loadingError:!1,errorMessage:null,apiError:null}),y=(0,n.Kh)({email:{hasErrors:!1,message:null},password:{hasErrors:!1,message:null}}),x=(0,n.Kh)({email:null,password:null}),M=(0,n.KR)(null),S=(0,n.KR)(null),P=(0,n.KR)(!1),Q=()=>{y.email.hasErrors=!1,y.email.message=null,y.password.hasErrors=!1,y.password.message=null,M.value?.resetValidation(),S.value?.resetValidation()},I=()=>{Q(),M.value?.validate(),S.value?.validate(),M.value?.hasError||S.value?.hasError||V()},V=()=>{R.loading=!0,R.loadingError=!1,R.errorMessage=null,R.apiError=null,P.value=!1,_.user.signUp((0,t.A)(),x.email,x.password).then((e=>{P.value=!0,R.loading=!1,r("success",e.data)})).catch((e=>{if(R.loadingError=!0,e.isAPIError)switch(R.apiError=e.customAPIErrorDetails,e.response.status){case 400:e.response.data.invalidOrMissingParams.find((function(e){return"email"===e}))?(R.loadingError=!0,R.errorMessage="API Error: missing email param",(0,s.dY)((()=>{M.value?.focus()}))):e.response.data.invalidOrMissingParams.find((function(e){return"password"===e}))?(R.loadingError=!0,R.errorMessage="API Error: missing password param",(0,s.dY)((()=>{S.value?.focus()}))):(R.loadingError=!0,R.errorMessage="API Error: invalid/missing param",(0,s.dY)((()=>{M.value?.focus()})));break;case 409:y.email.hasErrors=!0,y.email.message="Email already used",(0,s.dY)((()=>{M.value?.focus()}));break;default:R.loadingError=!0,R.errorMessage="API Error: fatal error";break}else R.errorMessage=`Uncaught exception: ${e}`,console.error(e);R.loading=!1}))};return(e,a)=>{const r=(0,s.g2)("q-avatar"),t=(0,s.g2)("q-card-section"),i=(0,s.g2)("q-icon"),u=(0,s.g2)("q-input"),d=(0,s.g2)("q-spinner-hourglass"),c=(0,s.g2)("q-btn"),_=(0,s.g2)("router-link"),q=(0,s.g2)("q-separator"),Q=(0,s.g2)("q-btn-group");return(0,s.uX)(),(0,s.CE)("form",{onSubmit:(0,l.D$)(I,["prevent","stop"]),autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"},[(0,s.bF)(t,{class:"text-center"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{square:"",size:"128px"},{default:(0,s.k6)((()=>[...a[2]||(a[2]=[(0,s.Lk)("img",{src:"icons/favicon-128x128.png"},null,-1)])])),_:1}),(0,s.Lk)("h4",k,(0,o.v_)((0,n.R1)(A)("Sign up now and take control.")),1),(0,s.Lk)("div",E,(0,o.v_)((0,n.R1)(A)("The first step to a more organized you starts here!")),1)])),_:1}),(0,s.bF)(t,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{dense:"",outlined:"",ref_key:"emailRef",ref:M,modelValue:x.email,"onUpdate:modelValue":a[0]||(a[0]=e=>x.email=e),type:"email",name:"email",label:(0,n.R1)(A)("Email"),disable:R.loading||F.value,autofocus:!0,rules:(0,n.R1)(w).requiredFieldRules,"lazy-rules":"",error:y.email.hasErrors,"error-message":y.email.message?(0,n.R1)(A)(y.email.message):""},{prepend:(0,s.k6)((()=>[(0,s.bF)(i,{name:"alternate_email"})])),_:1},8,["modelValue","label","disable","rules","error","error-message"]),(0,s.bF)(f.A,{dense:"",outlined:"",ref_key:"passwordRef",ref:S,class:"q-mt-md",modelValue:x.password,"onUpdate:modelValue":a[1]||(a[1]=e=>x.password=e),name:"password",label:(0,n.R1)(A)("Password"),disable:R.loading||F.value,rules:(0,n.R1)(w).requiredFieldRules,"lazy-rules":"",error:y.password.hasErrors,"error-message":y.password.message?(0,n.R1)(A)(y.password.message):""},null,8,["modelValue","label","disable","rules","error","error-message"])])),_:1}),(0,s.bF)(t,null,{default:(0,s.k6)((()=>[(0,s.bF)(c,{color:"primary",size:"md",label:e.$t("Sign up"),"no-caps":"",class:"full-width",icon:"account_circle",disable:R.loading||!(x.email&&x.password)||F.value,loading:R.loading,type:"submit"},{loading:(0,s.k6)((()=>[(0,s.bF)(d,{class:"on-left"}),(0,s.eW)(" "+(0,o.v_)((0,n.R1)(A)("Sign up")),1)])),_:1},8,["label","disable","loading"]),F.value?((0,s.uX)(),(0,s.Wv)(v.A,{key:0,text:"New sign ups are not allowed on this system",error:"",class:"q-mt-lg"})):P.value?((0,s.uX)(),(0,s.Wv)(v.A,{key:1,text:"Your account has been created",success:"",class:"q-mt-lg"},{details:(0,s.k6)((()=>[(0,s.bF)(c,{size:"sm",color:"primary",class:"float-right",label:(0,n.R1)(A)("Sign in"),to:"{ name: 'signIn'}"},null,8,["label"])])),_:1})):R.loadingError&&R.errorMessage?((0,s.uX)(),(0,s.Wv)(h.A,{key:2,text:R.errorMessage,"api-error":R.apiError,class:"q-mt-lg"},null,8,["text","api-error"])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(t,{class:"text-center q-pt-none"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.eW)((0,o.v_)((0,n.R1)(A)("Already have an account ?"))+" ",1),(0,s.bF)(_,{to:{name:"signIn"},class:"main-app-text-link-hover"},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)((0,n.R1)(A)("Click here to sign in")),1)])),_:1})])])),_:1}),(0,s.bF)(q,{class:"q-mb-sm"}),(0,s.bF)(t,{class:"text-center q-py-none"},{default:(0,s.k6)((()=>[(0,s.bF)(Q,{flat:"",square:""},{default:(0,s.k6)((()=>[(0,s.bF)(g.A),(0,s.bF)(m.A),(0,s.bF)(p.A,{label:"@2025 HomeDocs",href:(0,n.R1)(b.g)},null,8,["href"])])),_:1})])),_:1})],32)}}};var _=r(4189),w=r(3952),q=r(9270),F=r(492),R=r(6384),y=r(3194),x=r(386),M=r(6031),S=r(8582),P=r.n(S);const Q=A,I=Q;P()(A,"components",{QCardSection:_.A,QAvatar:w.A,QInput:q.A,QIcon:F.A,QBtn:R.A,QSpinnerHourglass:y.A,QSeparator:x.A,QBtnGroup:M.A});const V={__name:"SignUpPage",setup(e){const a=e=>{};return(e,r)=>{const l=(0,s.g2)("q-card"),o=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(o,null,{default:(0,s.k6)((()=>[(0,s.bF)(l,{class:"q-pa-xl",flat:""},{default:(0,s.k6)((()=>[(0,s.bF)(I,{onSuccess:a})])),_:1})])),_:1})}}};var W=r(7716),z=r(3316);const U=V,C=U;P()(V,"components",{QPage:W.A,QCard:z.A})}}]);