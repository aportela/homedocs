"use strict";(globalThis["webpackChunkhomedocs"]=globalThis["webpackChunkhomedocs"]||[]).push([[791],{3389:(e,a,t)=>{t.r(a),t.d(a,{default:()=>ke});var l=t(1758),o=t(8790),d=t(8734),s=t(9104),r=t(3394),n=t(3537),i=t(3597),u=t(8051),c=t(5679);const m=(0,c.nY)("advancedSearchData",{state:()=>({filters:null,sort:null}),actions:{reset(){this.filters=null,this.sort=null}}});var p=t(6246);function f(){const{t:e}=(0,n.s9)(),a=[{labelKey:"Any date",value:0},{labelKey:"Today",value:1},{labelKey:"Yesterday",value:2},{labelKey:"Last 7 days",value:3},{labelKey:"Last 15 days",value:4},{labelKey:"Last 31 days",value:5},{labelKey:"Last 365 days",value:6},{labelKey:"Fixed date",value:7},{labelKey:"From date",value:8},{labelKey:"To date",value:9},{labelKey:"Between dates",value:10}],t=(0,l.EW)((()=>a.map((a=>({...a,label:e(a.labelKey)}))))),o="YYYY/MM/DD",s=(e=0)=>p.Ay.formatDate(p.Ay.addToDate(Date.now(),{days:e}),o),r=()=>{const a=(0,d.Kh)({filterType:t.value[0],formattedDate:{fixed:null,from:null,to:null},timestamps:{from:null,to:null},state:{hasFrom:!1,hasTo:!1,hasFixed:!1,hasValue:!1,denyChanges:!1},skipClearOnRecalc:{from:!1,to:!1,fixed:!1}}),r=()=>{switch(a.skipClearOnRecalc.from||(a.formattedDate.from=null),a.skipClearOnRecalc.to||(a.formattedDate.to=null),a.skipClearOnRecalc.fixed||(a.formattedDate.fixed=null),a.skipClearOnRecalc.from=!1,a.skipClearOnRecalc.to=!1,a.skipClearOnRecalc.fixed=!1,a.timestamps.from=null,a.timestamps.to=null,a.filterType?.value){case 0:a.formattedDate.from=null,a.formattedDate.to=null,a.formattedDate.fixed=null;break;case 1:a.formattedDate.fixed=s();break;case 2:a.formattedDate.fixed=s(-1);break;case 3:a.formattedDate.from=s(-7),a.formattedDate.to=s();break;case 4:a.formattedDate.from=s(-15),a.formattedDate.to=s();break;case 5:a.formattedDate.from=s(-31),a.formattedDate.to=s();break;case 6:a.formattedDate.from=s(-365),a.formattedDate.to=s();break;case 7:break;case 8:break;case 9:break;case 10:break}},n=()=>{a.formattedDate.fixed?(a.timestamps.from=p.Ay.formatDate(p.Ay.adjustDate(p.Ay.extractDate(a.formattedDate.fixed,o),{hour:0,minute:0,second:0,millisecond:0}),"x"),a.timestamps.to=p.Ay.formatDate(p.Ay.adjustDate(p.Ay.extractDate(a.formattedDate.fixed,o),{hour:23,minute:59,second:59,millisecond:999}),"x")):(a.formattedDate.from&&(a.timestamps.from=p.Ay.formatDate(p.Ay.adjustDate(p.Ay.extractDate(a.formattedDate.from,"YYYY/MM/DD"),{hour:0,minute:0,second:0,millisecond:0}),"x")),a.formattedDate.to&&(a.timestamps.to=p.Ay.formatDate(p.Ay.adjustDate(p.Ay.extractDate(a.formattedDate.to,"YYYY/MM/DD"),{hour:23,minute:59,second:59,millisecond:999}),"x")))};return(0,l.wB)((()=>a.formattedDate.from),(e=>{a.state.hasValue=!!e,n()})),(0,l.wB)((()=>a.formattedDate.to),(e=>{a.state.hasValue=!!e,n()})),(0,l.wB)((()=>a.formattedDate.fixed),(e=>{a.state.hasValue=!!e,n()})),(0,l.wB)((()=>t.value[0].label),(t=>{a.filterType.label=e(a.filterType.labelKey)})),(0,l.wB)((()=>a.filterType),(e=>{e?(a.state.hasFrom=[3,4,5,6,8,10].includes(e.value),a.state.hasTo=[3,4,5,6,9,10].includes(e.value),a.state.hasFixed=[1,2,7].includes(e.value),a.state.denyChanges=[1,2,3,4,5,6].includes(e.value)):a.filterType=t.value[0],r(),n()})),a};return{dateMask:o,dateFilterTypeOptions:t,getDateFilterInstance:r}}var b=t(4199),g=t(1307),h=t(129),v=t(9295),k=t(3939),D=t(1112),y=t(2139);const x={class:"row q-col-gutter-xs"},F={class:"col"},C={key:0,class:"col"},_={class:"row items-center justify-end"},A={key:1,class:"col"},R={class:"row items-center justify-end"},q={key:2,class:"col"},V={class:"row items-center justify-end"},T={__name:"DateFieldCustomInput",props:{modelValue:{type:Object,required:!0},label:{type:String,default:""},dense:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},disable:{type:Boolean,required:!1,default:!1},autoOpenPopUps:{type:Boolean,required:!1,default:!0}},emits:["update:modelValue"],setup(e,{expose:a,emit:t}){const{t:o}=(0,n.s9)(),s=t,r=()=>{g.value?.hide()},i=()=>{h.value?.hide()},u=()=>{v.value?.hide()},c=e,m=(0,d.KR)(null),p=(0,d.KR)(null),b=(0,d.KR)(null),g=(0,d.KR)(null),h=(0,d.KR)(null),v=(0,d.KR)(null),k=(0,d.KR)(c.modelValue||{}),{dateFilterTypeOptions:D}=f(),y=(0,l.EW)((()=>c.disable||k.value.state.denyChanges));(0,l.wB)((()=>c.modelValue),(e=>k.value=e)),(0,l.wB)(k.value,(e=>{T(),s("update:modelValue",e),c.autoOpenPopUps&&(0,l.dY)((()=>{switch(e.filterType.value){case 7:e.formattedDate.fixed||v.value.show();break;case 8:e.formattedDate.from||g.value.show();break;case 9:e.formattedDate.to||h.value.show();break;case 10:e.formattedDate.from||g.value.show();break}}))}));const T=()=>{k.value.state.denyChanges||(0,l.dY)((()=>{switch(k.value.filterType.value){case 7:b.value?.focus();break;case 8:m.value?.focus();break;case 9:p.value?.focus();break;case 10:m.value?.focus();break}}))};return a({focus:T}),(0,l.sV)((()=>{c.autofocus&&T()})),(a,t)=>{const s=(0,l.g2)("q-icon"),n=(0,l.g2)("q-select"),c=(0,l.g2)("q-btn"),f=(0,l.g2)("q-date"),T=(0,l.g2)("q-popup-proxy"),w=(0,l.g2)("q-input"),U=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.CE)("div",x,[(0,l.Lk)("div",F,[(0,l.bF)(n,{class:"q-mb-md",dense:"","options-dense":"",outlined:"",clearable:0!==k.value.filterType.value,modelValue:k.value.filterType,"onUpdate:modelValue":t[0]||(t[0]=e=>k.value.filterType=e),options:(0,d.R1)(D),label:e.label,disable:e.disable},{prepend:(0,l.k6)((()=>[(0,l.RG)(a.$slots,"prepend",{},(()=>[(0,l.bF)(s,{name:"calendar_month"})]))])),_:3},8,["clearable","modelValue","options","label","disable"])]),k.value.state.hasFrom?((0,l.uX)(),(0,l.CE)("div",C,[(0,l.bF)(w,{dense:"",outlined:"",mask:"date",modelValue:k.value.formattedDate.from,"onUpdate:modelValue":t[2]||(t[2]=e=>k.value.formattedDate.from=e),label:(0,d.R1)(o)("From date"),disable:y.value,ref_key:"qInputFromDateRef",ref:m,error:!k.value.formattedDate.from,"error-message":(0,d.R1)(o)("Field is required")},{append:(0,l.k6)((()=>[(0,l.bF)(s,{name:"event",class:"cursor-pointer"},{default:(0,l.k6)((()=>[(0,l.bF)(T,{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"qInputFromDatePopupProfyRef",ref:g},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:k.value.formattedDate.from,"onUpdate:modelValue":[t[1]||(t[1]=e=>k.value.formattedDate.from=e),r],minimal:""},{default:(0,l.k6)((()=>[(0,l.Lk)("div",_,[(0,l.bo)((0,l.bF)(c,{label:"Close",color:"primary",flat:""},null,512),[[U]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue","label","disable","error","error-message"])])):(0,l.Q3)("",!0),k.value.state.hasTo?((0,l.uX)(),(0,l.CE)("div",A,[(0,l.bF)(w,{dense:"",outlined:"",mask:"date",modelValue:k.value.formattedDate.to,"onUpdate:modelValue":t[4]||(t[4]=e=>k.value.formattedDate.to=e),label:(0,d.R1)(o)("To date"),disable:y.value,ref_key:"qInputToDateRef",ref:p,error:!k.value.formattedDate.to,"error-message":(0,d.R1)(o)("Field is required")},{append:(0,l.k6)((()=>[(0,l.bF)(s,{name:"event",class:"cursor-pointer"},{default:(0,l.k6)((()=>[(0,l.bF)(T,{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"qInputToDatePopupProfyRef",ref:h},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:k.value.formattedDate.to,"onUpdate:modelValue":[t[3]||(t[3]=e=>k.value.formattedDate.to=e),i],minimal:""},{default:(0,l.k6)((()=>[(0,l.Lk)("div",R,[(0,l.bo)((0,l.bF)(c,{label:"Close",color:"primary",flat:""},null,512),[[U]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue","label","disable","error","error-message"])])):(0,l.Q3)("",!0),k.value.state.hasFixed?((0,l.uX)(),(0,l.CE)("div",q,[(0,l.bF)(w,{dense:"",outlined:"",mask:"date",modelValue:k.value.formattedDate.fixed,"onUpdate:modelValue":t[6]||(t[6]=e=>k.value.formattedDate.fixed=e),label:(0,d.R1)(o)("Fixed date"),disable:y.value,ref_key:"qInputFixedDateRef",ref:b,error:!k.value.formattedDate.fixed,"error-message":(0,d.R1)(o)("Field is required")},{append:(0,l.k6)((()=>[(0,l.bF)(s,{name:"event",class:"cursor-pointer"},{default:(0,l.k6)((()=>[(0,l.bF)(T,{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"qInputFixedDatePopupProfyRef",ref:v},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:k.value.formattedDate.fixed,"onUpdate:modelValue":[t[5]||(t[5]=e=>k.value.formattedDate.fixed=e),u],minimal:""},{default:(0,l.k6)((()=>[(0,l.Lk)("div",V,[(0,l.bo)((0,l.bF)(c,{label:"Close",color:"primary",flat:""},null,512),[[U]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue","label","disable","error","error-message"])])):(0,l.Q3)("",!0)])}}};var w=t(5848),U=t(492),O=t(9270),E=t(8975),P=t(8670),L=t(6384),K=t(8672),Q=t(8582),S=t.n(Q);const I=T,B=I;S()(T,"components",{QSelect:w.A,QIcon:U.A,QInput:O.A,QPopupProxy:E.A,QDate:P.A,QBtn:L.A}),S()(T,"directives",{ClosePopup:K.A});const W={__name:"SortByFieldCustomButtonDropdown",props:{options:{type:Array,required:!0,validator(e){return Array.isArray(e)}},current:{type:Object,required:!0},dense:{type:Boolean,required:!1,default:!1}},emits:["change"],setup(e,{emit:a}){const t=(0,l.OA)(),{t:s}=(0,n.s9)(),r=a,i=e,u=(0,d.Kh)({field:i.current?.field||null,label:i.current?.label||null,order:i.current?.order||null});u.label||(u.label=i.options.find((e=>e.field==u.field))?.label);const c=(0,l.EW)((()=>s("Current sort by",{label:u.label?s(u.label):null,order:u.order?s("DESC"==u.order?"descending":"ascending"):null}))),m=e=>{u.field=e.field,u.label=e.label,u.order=e.order,r("change",u)};(0,l.wB)((()=>i.current),(e=>{u.field=e.field,u.label=e.label,u.order=e.order}));const p=(0,d.Kh)([]);return i.options?.forEach((e=>{p.push({field:e.field,label:e.label,order:"ASC"}),p.push({field:e.field,label:e.label,order:"DESC"})})),(a,r)=>{const n=(0,l.g2)("q-icon"),i=(0,l.g2)("q-item-section"),f=(0,l.g2)("q-item-label"),b=(0,l.g2)("q-item"),g=(0,l.g2)("q-list"),h=(0,l.g2)("q-btn-dropdown"),v=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.Wv)(h,(0,l.v6)((0,d.R1)(t),{label:c.value,dense:e.dense}),{default:(0,l.k6)((()=>[(0,l.bF)(g,null,{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(p,((a,t)=>(0,l.bo)(((0,l.uX)(),(0,l.Wv)(b,{dense:e.dense,key:t,onClick:e=>m(a),clickable:!(a.field==u.field&&a.order==u.order),disable:a.field==u.field&&a.order==u.order},{default:(0,l.k6)((()=>[(0,l.bF)(i,{avatar:""},{default:(0,l.k6)((()=>[(0,l.bF)(n,{name:"ASC"==a.order?"keyboard_double_arrow_up":"keyboard_double_arrow_down"},null,8,["name"])])),_:2},1024),(0,l.bF)(i,null,{default:(0,l.k6)((()=>[(0,l.bF)(f,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)((0,d.R1)(s)("Current sort by",{label:(0,d.R1)(s)(a.label),order:"DESC"==a.order?(0,d.R1)(s)("descending"):(0,d.R1)(s)("ascending")})),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["dense","onClick","clickable","disable"])),[[v]]))),128))])),_:1})])),_:1},16,["label","dense"])}}};var M=t(8301),X=t(3999),Y=t(124),z=t(5173),$=t(3796);const j=W,N=j;S()(W,"components",{QBtnDropdown:M.A,QList:X.A,QItem:Y.A,QItemSection:z.A,QIcon:U.A,QItemLabel:$.A}),S()(W,"directives",{ClosePopup:K.A});var G=t(2588);const H={class:"row q-col-gutter-sm"},J={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6"},Z={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6"},ee={key:0,class:"q-ma-md flex flex-center"},ae={class:"lt-xl"},te=["style2","onClick"],le={class:"lt-xl"},oe={class:"td-document-link gt-lg"},de={class:"gt-lg"},se={class:"gt-lg"},re={class:"gt-lg"},ne={class:"gt-lg"},ie={key:1,class:"q-ma-md flex flex-center"},ue={__name:"AdvancedSearchPage",setup(e){const{t:a}=(0,n.s9)(),t=(0,r.lq)(),{api:c}=(0,u.M)(),{bus:p,onShowDocumentFiles:x,onShowDocumentNotes:F}=(0,i.U)(),{fullDateTimeHuman:C,timeAgo:_}=(0,b.c)(),{dateTimeFormat:A}=(0,g.M)(),R=[{field:"title",title:"Title",defaultClass:"gt-lg"},{field:"createdOnTimestamp",title:"Creation date",defaultClass:"gt-lg"},{field:"lastUpdateTimestamp",title:"Last update",defaultClass:"gt-lg"},{field:"attachmentCount",title:"Attachments",defaultClass:"gt-lg"},{field:"noteCount",title:"Notes",defaultClass:"gt-lg"}],q=R.map((e=>({field:e.field,label:e.title}))),V=(0,d.Kh)({loading:!1,loadingError:!1,errorMessage:null,apiError:null,searchLaunched:!1}),T=(0,d.KR)(t.meta.conditionsFilterExpanded),w=(0,d.KR)(null),{getDateFilterInstance:U,dateFilterTypeOptions:O}=f(),E=(0,l.EW)((()=>"advancedSearch"==t.name)),P=m(),L=(0,d.Kh)({text:{title:null,description:null,notes:null},tags:[],dates:{creationDate:U(),lastUpdate:U(),updatedOn:U()}}),K=(0,d.Kh)({currentPage:1,resultsPage:32,totalResults:0,totalPages:0}),Q=(0,d.Kh)({field:"lastUpdateTimestamp",order:"DESC"}),S=(0,d.Kh)([]),I=(0,l.EW)((()=>S.length>0)),W=(0,l.EW)((()=>!V.loading&&V.loadingError)),M=(0,l.EW)((()=>!V.loading&&V.searchLaunched&&!I.value));void 0!==t.params.tag&&L.tags.push(t.params.tag);const X=(0,l.EW)((()=>void 0!==t.params.fixedCreationDate)),Y=(0,l.EW)((()=>void 0!==t.params.fixedLastUpdate)),z=(0,l.EW)((()=>void 0!==t.params.fixedUpdatedOn)),$=(0,l.EW)((()=>"ASC"==Q.order?"keyboard_double_arrow_up":"keyboard_double_arrow_down")),j=(0,l.EW)((()=>{let e=0;return L.text.title&&e++,L.text.description&&e++,L.text.notesBody&&e++,L.text.attachmentsFilename&&e++,L.tags&&L.tags.length>0&&(e+=L.tags.length),L.dates.creationDate.state.hasValue&&e++,L.dates.lastUpdate.state.hasValue&&e++,L.dates.updatedOn.state.hasValue&&e++,e})),ue=e=>{K.currentPage=e,me(!1)},ce=(e,a)=>{V.loading||(Q.field==e?Q.order=a||("ASC"==Q.order?"DESC":"ASC"):(Q.field=e,Q.order=a||"ASC"),me(!1))},me=e=>{e&&(K.currentPage=1),V.loading=!0,V.loadingError=!1,V.errorMessage=null,V.apiError=null,E.value&&(P.filters=L,P.sort=Q),c.document.search(K.currentPage,K.resultsPage,L,Q.field,Q.order).then((e=>{e.data.results?(S.length=0,K.currentPage=e.data.results.pagination.currentPage,K.resultsPage=e.data.results.pagination.resultsPage,K.totalResults=e.data.results.pagination.totalResults,K.totalPages=e.data.results.pagination.totalPages,S.push(...e.data.results.documents.map((e=>(e.creationDate=C(e.createdOnTimestamp,A.get()),e.creationDateTimeAgo=_(e.createdOnTimestamp),e.lastUpdate=C(e.lastUpdateTimestamp,A.get()),e.lastUpdateTimeAgo=_(e.lastUpdateTimestamp),e)))),V.searchLaunched=!0,w.value?.expand(),V.loading=!1):V.loading=!1})).catch((e=>{if(e.isAPIError)switch(V.apiError=e.customAPIErrorDetails,e.response.status){case 400:V.loadingError=!0,V.errorMessage="API Error: invalid/missing param";break;case 401:V.apiError=e.customAPIErrorDetails,V.errorMessage="Auth session expired, requesting new...",p.emit("reAuthRequired",{emitter:"AdvancedSearchPage.onSubmitForm"});break;default:V.loadingError=!0,V.errorMessage="API Error: fatal error";break}else V.errorMessage=`Uncaught exception: ${e}`,console.error(e);V.loading=!1,V.searchLaunched=!0}))},pe=()=>{L.text.title=null,L.text.description=null,L.text.notesBody=null,L.text.attachmentsFilename=null,L.tags.length=0,L.dates={creationDate:U(),lastUpdate:U(),updatedOn:U()},Q.field="lastUpdateTimestamp",Q.order="DESC",V.searchLaunched=!1,S.length=0};return(0,l.sV)((()=>{X.value?(L.dates.creationDate.skipClearOnRecalc.fixed=!0,L.dates.creationDate.filterType=O.value[7],L.dates.creationDate.formattedDate.fixed=t.params.fixedCreationDate.replaceAll("-","/")):Y.value?(L.dates.lastUpdate.skipClearOnRecalc.fixed=!0,L.dates.lastUpdate.filterType=O.value[7],L.dates.lastUpdate.formattedDate.fixed=t.params.fixedLastUpdate.replaceAll("-","/")):z.value?(L.dates.updatedOn.skipClearOnRecalc.fixed=!0,L.dates.updatedOn.filterType=O.value[7],L.dates.updatedOn.formattedDate.fixed=t.params.fixedUpdatedOn.replaceAll("-","/")):E.value&&(L.text.title=P.filters?.text.title||null,L.text.description=P.filters?.text.description||null,L.text.notesBody=P.filters?.text.notesBody||null,L.text.attachmentsFilename=P.filters?.text.attachmentsFilename||null,L.tags=P.filters?.tags||[],P.filters?.dates&&(L.dates.creationDate.skipClearOnRecalc.fixed=!0,L.dates.creationDate.formattedDate.fixed=P.filters.dates.creationDate.formattedDate.fixed,L.dates.creationDate.skipClearOnRecalc.from=!0,L.dates.creationDate.formattedDate.from=P.filters.dates.creationDate.formattedDate.from,L.dates.creationDate.skipClearOnRecalc.to=!0,L.dates.creationDate.formattedDate.to=P.filters.dates.creationDate.formattedDate.to,L.dates.creationDate.filterType=P.filters.dates.creationDate.filterType,L.dates.lastUpdate.skipClearOnRecalc.fixed=!0,L.dates.lastUpdate.formattedDate.fixed=P.filters.dates.lastUpdate.formattedDate.fixed,L.dates.lastUpdate.skipClearOnRecalc.from=!0,L.dates.lastUpdate.formattedDate.from=P.filters.dates.lastUpdate.formattedDate.from,L.dates.lastUpdate.skipClearOnRecalc.to=!0,L.dates.lastUpdate.formattedDate.to=P.filters.dates.lastUpdate.formattedDate.to,L.dates.lastUpdate.filterType=P.filters.dates.lastUpdate.filterType,L.dates.updatedOn.skipClearOnRecalc.fixed=!0,L.dates.updatedOn.formattedDate.fixed=P.filters.dates.updatedOn.formattedDate.fixed,L.dates.updatedOn.skipClearOnRecalc.from=!0,L.dates.updatedOn.formattedDate.from=P.filters.dates.updatedOn.formattedDate.from,L.dates.updatedOn.skipClearOnRecalc.to=!0,L.dates.updatedOn.formattedDate.to=P.filters.dates.updatedOn.formattedDate.to,L.dates.updatedOn.filterType=P.filters.dates.updatedOn.filterType),P.sort?.field&&(Q.field=P.sort.field),P.sort?.order&&(Q.order=P.sort.order)),t.meta.autoLaunchSearch&&(0,l.dY)((()=>{me(!0)})),p.on("reAuthSucess",(e=>{e.to?.includes("AdvancedSearchPage.onSubmitForm")&&me(!1)}))})),(0,l.xo)((()=>{p.off("reAuthSucess")})),(e,t)=>{const r=(0,l.g2)("q-chip"),n=(0,l.g2)("q-icon"),i=(0,l.g2)("q-input"),u=(0,l.g2)("q-spinner-hourglass"),c=(0,l.g2)("q-btn"),m=(0,l.g2)("q-btn-group"),p=(0,l.g2)("q-pagination"),f=(0,l.g2)("q-item-label"),b=(0,l.g2)("q-item-section"),g=(0,l.g2)("q-item"),C=(0,l.g2)("q-list"),_=(0,l.g2)("q-markup-table"),A=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(A,null,{default:(0,l.k6)((()=>[(0,l.bF)(k.A,{title:"Advanced search",icon:"filter_alt",loading:V.loading,error:V.loadingError,expanded:T.value},{"header-extra":(0,l.k6)((()=>[(0,l.bF)(r,{square:"",size:"sm",color:"grey-7","text-color":"white"},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)((0,d.R1)(a)("Total search conditions count",{count:j.value})),1)])),_:1})])),content:(0,l.k6)((()=>[(0,l.Lk)("form",{onSubmit:t[8]||(t[8]=(0,s.D$)((e=>me(!0)),["prevent","stop"])),onReset:(0,s.D$)(pe,["prevent","stop"]),autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false",class:"q-pa-md"},[(0,l.Lk)("div",H,[(0,l.Lk)("div",J,[(0,l.bF)(i,{class:"q-mb-md",dense:"",outlined:"",modelValue:L.text.title,"onUpdate:modelValue":t[0]||(t[0]=e=>L.text.title=e),modelModifiers:{trim:!0},type:"text",name:"title",clearable:"",label:(0,d.R1)(a)("Document title"),disable:V.loading,autofocus:!0,placeholder:(0,d.R1)(a)("Type text condition")},{prepend:(0,l.k6)((()=>[(0,l.bF)(n,{name:"article"})])),_:1},8,["modelValue","label","disable","placeholder"]),(0,l.bF)(i,{class:"q-mb-md",dense:"",outlined:"",modelValue:L.text.description,"onUpdate:modelValue":t[1]||(t[1]=e=>L.text.description=e),modelModifiers:{trim:!0},type:"text",name:"description",clearable:"",label:(0,d.R1)(a)("Document description"),disable:V.loading,placeholder:(0,d.R1)(a)("Type text condition")},{prepend:(0,l.k6)((()=>[(0,l.bF)(n,{name:"article"})])),_:1},8,["modelValue","label","disable","placeholder"]),(0,l.bF)(i,{class:"q-mb-md",dense:"",outlined:"",modelValue:L.text.notesBody,"onUpdate:modelValue":t[2]||(t[2]=e=>L.text.notesBody=e),modelModifiers:{trim:!0},type:"text",name:"notesBody",clearable:"",label:(0,d.R1)(a)("Document notes"),disable:V.loading,placeholder:(0,d.R1)(a)("Type text condition")},{prepend:(0,l.k6)((()=>[(0,l.bF)(n,{name:"speaker_notes"})])),_:1},8,["modelValue","label","disable","placeholder"]),(0,l.bF)(i,{class:"q-mb-md",dense:"",outlined:"",modelValue:L.text.attachmentsFilename,"onUpdate:modelValue":t[3]||(t[3]=e=>L.text.attachmentsFilename=e),modelModifiers:{trim:!0},type:"text",name:"notesBody",clearable:"",label:(0,d.R1)(a)("Document attachment filenames"),disable:V.loading,placeholder:(0,d.R1)(a)("Type text condition")},{prepend:(0,l.k6)((()=>[(0,l.bF)(n,{name:"attach_file"})])),_:1},8,["modelValue","label","disable","placeholder"])]),(0,l.Lk)("div",Z,[(0,l.bF)(v.A,{modelValue:L.tags,"onUpdate:modelValue":t[4]||(t[4]=e=>L.tags=e),label:"Document tags",disabled:V.loading,dense:"","start-mode-editable":!0,"deny-change-editable-mode":!0,clearable:"",placeholder:(0,d.R1)(a)("Type text condition")},null,8,["modelValue","disabled","placeholder"]),(0,l.bF)(B,{options:(0,d.R1)(O),label:(0,d.R1)(a)("Document creation date"),disable:V.loading||X.value,modelValue:L.dates.creationDate,"onUpdate:modelValue":t[5]||(t[5]=e=>L.dates.creationDate=e),"auto-open-pop-ups":!X.value},null,8,["options","label","disable","modelValue","auto-open-pop-ups"]),(0,l.bF)(B,{options:(0,d.R1)(O),label:(0,d.R1)(a)("Document last update"),disable:V.loading||Y.value,modelValue:L.dates.lastUpdate,"onUpdate:modelValue":t[6]||(t[6]=e=>L.dates.lastUpdate=e),"auto-open-pop-ups":!Y.value},null,8,["options","label","disable","modelValue","auto-open-pop-ups"]),(0,l.bF)(B,{options:(0,d.R1)(O),label:(0,d.R1)(a)("Document updated on"),disable:V.loading||z.value,modelValue:L.dates.updatedOn,"onUpdate:modelValue":t[7]||(t[7]=e=>L.dates.updatedOn=e),"auto-open-pop-ups":!z.value},null,8,["options","label","disable","modelValue","auto-open-pop-ups"])])]),(0,l.bF)(m,{spread:""},{default:(0,l.k6)((()=>[(0,l.bF)(c,{color:"primary",size:"md",label:e.$t("Search"),"no-caps":"",icon:"search",disable:V.loading,loading:V.loading,type:"submit"},{loading:(0,l.k6)((()=>[(0,l.bF)(u,{class:"on-left"}),(0,l.eW)(" "+(0,o.v_)((0,d.R1)(a)("Searching...")),1)])),_:1},8,["label","disable","loading"]),E.value?((0,l.uX)(),(0,l.Wv)(c,{key:0,class:"action-secondary",size:"md",label:e.$t("Reset filters"),"no-caps":"",icon:"undo",disable:V.loading||j.value<1,type:"reset"},null,8,["label","disable"])):(0,l.Q3)("",!0)])),_:1})],32),W.value?((0,l.uX)(),(0,l.Wv)(D.A,{key:0,text:V.errorMessage||"Error loading data","api-error":V.apiError,class:"q-ma-md"},null,8,["text","api-error"])):M.value?((0,l.uX)(),(0,l.Wv)(y.A,{key:1,warning:"",text:"No results found with current filter",class:"q-ma-md"})):(0,l.Q3)("",!0)])),_:1},8,["loading","error","expanded"]),(0,l.bo)((0,l.bF)(k.A,{title:"Results",icon:"folder_open",staticIcon:!0,loading:V.loading,error:V.loadingError,expanded:"",class:"q-mt-sm",ref_key:"resultsWidgetRef",ref:w},{"header-extra":(0,l.k6)((()=>[(0,l.bF)(r,{square:"",size:"sm",color:"grey-7","text-color":"white"},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)((0,d.R1)(a)("Total search results count",{count:K.totalResults})),1)])),_:1})])),content:(0,l.k6)((()=>[K.totalPages>1?((0,l.uX)(),(0,l.CE)("div",ee,[(0,l.bF)(p,{modelValue:K.currentPage,"onUpdate:modelValue":[t[9]||(t[9]=e=>K.currentPage=e),ue],color:"dark",max:K.totalPages,"max-pages":5,"boundary-numbers":"","direction-links":"","boundary-links":"",disable:V.loading,class:"theme-default-q-pagination"},null,8,["modelValue","max","disable"])])):(0,l.Q3)("",!0),(0,l.bF)(_,{class:"q-ma-md"},{default:(0,l.k6)((()=>[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",ae,[(0,l.bF)(N,{square:"",dense:"","no-caps":"",options:(0,d.R1)(q),current:Q,onChange:t[10]||(t[10]=e=>ce(e.field,e.order)),flat:"",class:"action-primary fit full-height"},null,8,["options","current"])]),((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(R,((e,t)=>(0,l.Lk)("th",{key:t,style2:{width:e.width},class:(0,o.C4)(["text-left",e.defaultClass,{"cursor-not-allowed":V.loading,"cursor-pointer":!V.loading,"action-primary":Q.field===e.field}]),onClick:a=>ce(e.field)},[(0,l.bF)(n,{name:Q.field===e.field?$.value:"sort",size:"sm"},null,8,["name"]),(0,l.eW)(" "+(0,o.v_)((0,d.R1)(a)(e.title))+" ",1),(0,l.bF)(h.A,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)((0,d.R1)(a)("Toggle sort by this column",{field:(0,d.R1)(a)(e.title)})),1)])),_:2},1024)],10,te))),64))])]),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(S,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",le,[(0,l.bF)(C,{dense:""},{default:(0,l.k6)((()=>[(0,l.bF)(g,{clickable:"",disable:V.loading,to:{name:"document",params:{id:e.id}},class:"bg-transparent"},{default:(0,l.k6)((()=>[(0,l.bF)(b,null,{default:(0,l.k6)((()=>[(0,l.bF)(f,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)((0,d.R1)(a)("Title"))+": "+(0,o.v_)(e.title),1)])),_:2},1024),(0,l.bF)(f,{caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)((0,d.R1)(a)("Creation date"))+": "+(0,o.v_)(e.creationDate)+" ("+(0,o.v_)(e.creationDateTimeAgo)+")",1)])),_:2},1024),e.lastUpdate?((0,l.uX)(),(0,l.Wv)(f,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)((0,d.R1)(a)("Last update"))+": "+(0,o.v_)(e.lastUpdate)+" ("+(0,o.v_)(e.lastUpdateTimeAgo)+")",1)])),_:2},1024)):(0,l.Q3)("",!0)])),_:2},1024),(0,l.bF)(b,{side:"",top:""},{default:(0,l.k6)((()=>[(0,l.bF)(G.A,{size:"md",square:"",class:"min-width-9em",count:e.attachmentCount,label:"Total attachments count","tool-tip":"View document attachments",disable:V.loading,onClick:(0,s.D$)((a=>(0,d.R1)(x)(e.id,e.title)),["stop","prevent"])},null,8,["count","disable","onClick"]),(0,l.bF)(G.A,{size:"md",square:"",class:"min-width-9em",count:e.noteCount,label:"Total notes","tool-tip":"View document notes",disable:V.loading,onClick:(0,s.D$)((a=>(0,d.R1)(F)(e.id,e.title)),["stop","prevent"])},null,8,["count","disable","onClick"])])),_:2},1024)])),_:2},1032,["disable","to"])])),_:2},1024)]),(0,l.Lk)("td",oe,[(0,l.bF)(c,{align:"left","no-caps":"",flat:"",to:{name:"document",params:{id:e.id}},class:"fit text-decoration-hover",label:e.title},null,8,["to","label"])]),(0,l.Lk)("td",de,(0,o.v_)(e.creationDate),1),(0,l.Lk)("td",se,(0,o.v_)(e.lastUpdate),1),(0,l.Lk)("td",re,[(0,l.bF)(G.A,{size:"md",square:"",class:"min-width-8em",count:e.attachmentCount,label:"Total attachments count","tool-tip":"View document attachments",disable:V.loading,onClick:(0,s.D$)((a=>(0,d.R1)(x)(e.id,e.title)),["stop","prevent"]),"q-chip-class":"'q-chip-8em'"},null,8,["count","disable","onClick"])]),(0,l.Lk)("td",ne,[(0,l.bF)(G.A,{size:"md",square:"",class:"min-width-8em",count:e.noteCount,label:"Total notes","tool-tip":"View document notes",disable:V.loading,onClick:(0,s.D$)((a=>(0,d.R1)(F)(e.id,e.title)),["stop","prevent"]),"q-chip-class":"'q-chip-8em'"},null,8,["count","disable","onClick"])])])))),128))])])),_:1}),K.totalPages>1?((0,l.uX)(),(0,l.CE)("div",ie,[(0,l.bF)(p,{modelValue:K.currentPage,"onUpdate:modelValue":[t[11]||(t[11]=e=>K.currentPage=e),ue],color:"dark",max:K.totalPages,"max-pages":5,"boundary-numbers":"","direction-links":"","boundary-links":"",disable:V.loading,class:"theme-default-q-pagination"},null,8,["modelValue","max","disable"])])):(0,l.Q3)("",!0)])),_:1},8,["loading","error"]),[[s.aG,I.value]])])),_:1})}}};var ce=t(2807),me=t(7716),pe=t(6760),fe=t(6031),be=t(3194),ge=t(4700),he=t(857);const ve=(0,ce.A)(ue,[["__scopeId","data-v-5a50928d"]]),ke=ve;S()(ue,"components",{QPage:me.A,QChip:pe.A,QInput:O.A,QIcon:U.A,QBtnGroup:fe.A,QBtn:L.A,QSpinnerHourglass:be.A,QPagination:ge.A,QMarkupTable:he.A,QList:X.A,QItem:Y.A,QItemSection:z.A,QItemLabel:$.A})}}]);