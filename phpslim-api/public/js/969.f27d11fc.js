"use strict";(globalThis["webpackChunkhomedocs"]=globalThis["webpackChunkhomedocs"]||[]).push([[969],{5969:(e,a,l)=>{l.r(a),l.d(a,{default:()=>T});l(9665);var t=l(9835),u=l(499),n=l(6970),o=l(1569),s=l(5253),i=l(8339),r=l(3276),d=l(4170),c=l(9302),m=l(4537);const p=(0,t._)("img",{src:"icons/favicon-128x128.png"},null,-1),w={class:"text-center"},v={__name:"MainLayout",setup(e){const{t:a}=(0,r.QT)(),l=(0,c.Z)(),v=(0,s.F)(),g=(0,i.tv)(),f=(0,t.Fl)((()=>v.isLogged)),_=(0,u.iH)(l.screen.gt.lg),b=(0,u.iH)(""),h=(0,u.iH)([]),W=(0,u.iH)(!1),k=(0,u.iH)([{shortLabel:"EN",label:"English",value:"en-US"},{shortLabel:"ES",label:"EspaÃ±ol",value:"es-ES"},{shortLabel:"GL",label:"Galego",value:"gl-GL"}]),y=k.value.find((e=>e.value==v.lang)),q=(0,u.iH)(y||k.value[0]);function x(e,t){e&&e.trim().length>0?(h.value=[],W.value=!0,t((()=>{o.api.document.search(1,8,{title:e},"title","ASC").then((e=>{h.value=e.data.results.documents.map((e=>({id:e.id,label:e.title,caption:a("Fast search caption",{creation:d.ZP.formatDate(1e3*e.createdOnTimestamp,"YYYY-MM-DD HH:mm:ss"),attachmentCount:e.fileCount})}))),W.value=!1})).catch((e=>{W.value=!1,l.notify({type:"negative",message:a("API Error: fatal error"),caption:a("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})})}))}))):t((()=>{h.value=[]}))}function Z(e,a){q.value=e,m.i18n.global.locale.value=e.value,a&&v.saveLang(e.value)}Z(q.value,!1);const Q=(0,u.iH)([{icon:"storage",text:"Dashboard",routeName:"index"},{icon:"note_add",text:"Add",routeName:"newDocument"},{icon:"find_in_page",text:"Advanced search",routeName:"advancedSearch"}]);function S(){o.api.user.signOut().then((e=>{v.signOut(),g.push({name:"signIn"})})).catch((e=>{l.notify({type:"negative",message:a("API Error: fatal error"),caption:a("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})})}))}return(e,l)=>{const o=(0,t.up)("q-btn"),s=(0,t.up)("q-avatar"),i=(0,t.up)("q-spinner-pie"),r=(0,t.up)("q-item-section"),d=(0,t.up)("q-item"),c=(0,t.up)("q-icon"),m=(0,t.up)("q-item-label"),v=(0,t.up)("q-list"),g=(0,t.up)("q-select"),y=(0,t.up)("q-space"),U=(0,t.up)("q-separator"),H=(0,t.up)("q-menu"),L=(0,t.up)("q-toolbar"),z=(0,t.up)("q-header"),C=(0,t.up)("q-scroll-area"),A=(0,t.up)("q-drawer"),D=(0,t.up)("router-view"),E=(0,t.up)("q-page-container"),I=(0,t.up)("q-layout"),P=(0,t.Q2)("close-popup"),T=(0,t.Q2)("ripple");return(0,t.wg)(),(0,t.j4)(I,{class:"bg-grey-1"},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{elevated:"",class:"text-white",style:{background:"#24292e"},"height-hint":"61.59"},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{class:"q-py-sm q-px-md"},{default:(0,t.w5)((()=>[f.value?((0,t.wg)(),(0,t.j4)(o,{key:0,class:"mobile-only",flat:"",dense:"",round:"",onClick:l[0]||(l[0]=e=>_.value=!_.value),"aria-label":"Menu",icon:"menu"})):(0,t.kq)("",!0),(0,t.Wm)(s,{square:"",size:"42px"},{default:(0,t.w5)((()=>[p])),_:1}),(0,t.Uk)(" HomeDocs "),f.value?((0,t.wg)(),(0,t.j4)(g,{key:1,ref:"search",dark:"",dense:"",standout:"","use-input":"","hide-selected":"",class:"q-mx-md",color:"black","stack-label":!1,label:(0,u.SU)(a)("Search..."),modelValue:b.value,"onUpdate:modelValue":l[1]||(l[1]=e=>b.value=e),options:h.value,onFilter:x,style:{width:"100%"}},(0,t.Nv)({option:(0,t.w5)((e=>[(0,t.Wm)(v,{class:"bg-grey-9 text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,(0,t.dG)(e.itemProps,{to:{name:"document",params:{id:e.opt.id}}}),{default:(0,t.w5)((()=>[(0,t.Wm)(r,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{name:"collections_bookmark"})])),_:1}),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.opt.label),1)])),_:2},1024),(0,t.Wm)(m,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.opt.caption),1)])),_:2},1024)])),_:2},1024)])),_:2},1040,["to"])])),_:2},1024)])),_:2},[W.value?{name:"no-option",fn:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t._)("div",w,[(0,t.Wm)(i,{color:"grey-5",size:"24px"})])])),_:1})])),_:1})])),key:"0"}:void 0]),1032,["label","modelValue","options"])):(0,t.kq)("",!0),(0,t.Wm)(y),(0,t.Wm)(o,{dense:"",flat:"","no-wrap":""},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{rounded:"",size:"24px",class:"q-mr-sm"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{name:"language"})])),_:1}),(0,t.Uk)(" "+(0,n.zw)(q.value.shortLabel)+" ",1),(0,t.Wm)(c,{name:"arrow_drop_down",size:"16px"}),(0,t.Wm)(H,{"auto-close":""},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{dense:"",style:{"min-width":"200px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{class:"GL__menu-link-signed-in"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Uk)((0,n.zw)((0,u.SU)(a)("Selected language"))+": ",1),(0,t._)("strong",null,(0,n.zw)(q.value.label),1)])])),_:1})])),_:1}),(0,t.Wm)(U),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(k.value,(e=>(0,t.wy)(((0,t.wg)(),(0,t.j4)(d,{clickable:"",disable:q.value.value==e.value,key:e.value,onClick:a=>Z(e,!0)},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t._)("div",null,(0,n.zw)(e.label),1)])),_:2},1024)])),_:2},1032,["disable","onClick"])),[[P]]))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),f.value?((0,t.wg)(),(0,t.j4)(A,{key:0,modelValue:_.value,"onUpdate:modelValue":l[2]||(l[2]=e=>_.value=e),"show-if-above":"",bordered:"",class:"bg-grey-2",width:240},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{class:"fit"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{padding:""},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{header:"",class:"text-weight-bold text-uppercase"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Menu ")])),_:1}),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(Q.value,(e=>(0,t.wy)(((0,t.wg)(),(0,t.j4)(d,{key:e.text,clickable:"",to:{name:e.routeName}},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{color:"grey",name:e.icon},null,8,["name"])])),_:2},1024),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)((0,u.SU)(a)(e.text)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"])),[[T]]))),128)),(0,t.wy)(((0,t.wg)(),(0,t.j4)(d,{clickable:"",onClick:S},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{color:"grey",name:"logout"})])),_:1}),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)((0,u.SU)(a)("Sign out")),1)])),_:1})])),_:1})])),_:1})),[[T]])])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,t.kq)("",!0),(0,t.Wm)(E,null,{default:(0,t.w5)((()=>[(0,t.Wm)(D)])),_:1})])),_:1})}}};var g=l(249),f=l(6602),_=l(1663),b=l(8879),h=l(1357),W=l(6997),k=l(490),y=l(1233),q=l(132),x=l(3246),Z=l(2857),Q=l(3115),S=l(136),U=l(7858),H=l(926),L=l(906),z=l(6663),C=l(2133),A=l(2146),D=l(1136),E=l(9984),I=l.n(E);const P=v,T=P;I()(v,"components",{QLayout:g.Z,QHeader:f.Z,QToolbar:_.Z,QBtn:b.Z,QAvatar:h.Z,QSelect:W.Z,QItem:k.Z,QItemSection:y.Z,QSpinnerPie:q.Z,QList:x.Z,QIcon:Z.Z,QItemLabel:Q.Z,QSpace:S.Z,QMenu:U.Z,QSeparator:H.Z,QDrawer:L.Z,QScrollArea:z.Z,QPageContainer:C.Z}),I()(v,"directives",{ClosePopup:A.Z,Ripple:D.Z})}}]);