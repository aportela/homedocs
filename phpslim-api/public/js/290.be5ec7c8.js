"use strict";(globalThis["webpackChunkhomedocs"]=globalThis["webpackChunkhomedocs"]||[]).push([[290],{8887:(e,a,l)=>{l.d(a,{o:()=>t});var s=l(587),r=l(660);Array.from(window.location.host).reduce(((e,a)=>0|31*e+a.charCodeAt(0)),0);const t=(0,s.nY)("initialState",{state:()=>({initialState:{allowSignUp:!1,maxUploadFileSize:1}}),getters:{isSignUpAllowed:e=>e.initialState.allowSignUp,maxUploadFileSize:e=>e.initialState.maxUploadFileSize},actions:{load(){r.api.common.initialState().then((e=>{this.initialState.allowSignUp=e.data.initialState.allowSignUp,this.initialState.maxUploadFileSize=e.data.initialState.maxUploadFileSize})).catch((e=>{console.error(e.response)}))}}})},290:(e,a,l)=>{l.r(a),l.d(a,{default:()=>A});l(239);var s=l(1758),r=l(9104),t=l(8790),o=l(8734),i=l(4907),n=l(455),u=l(3537),d=l(660),c=l(8887);const p={class:"text-grey-8"},m={class:"text-grey-8"},g={class:"text-dark text-weight-bold",style:{"text-decoration":"none"}},v={__name:"SignInPage",setup(e){const{t:a}=(0,u.s9)(),l=(0,i.A)(),v=(0,n.rd)(),f=(0,c.o)(),b=(0,s.EW)((()=>f.isSignUpAllowed)),h=(0,o.KR)(!1),k=(0,o.KR)({email:{hasErrors:!1,message:null},password:{hasErrors:!1,message:null}}),w=[e=>!!e||a("Field is required")],S=(0,o.KR)(null),y=(0,o.KR)(null),_=(0,o.KR)(null),E=(0,o.KR)(null);function x(){k.value.email.hasErrors=!1,k.value.email.message=null,k.value.password.hasErrors=!1,k.value.password.message=null,y.value.resetValidation(),E.value.resetValidation()}function A(){x(),y.value.validate(),E.value.validate(),(0,s.dY)((()=>{y.value.hasError||E.value.hasError||F()}))}function F(){h.value=!0,d.api.user.signIn(S.value,_.value).then((e=>{v.push({name:"index"}),h.value=!1})).catch((e=>{switch(h.value=!1,e.response.status){case 400:e.response.data.invalidOrMissingParams.find((function(e){return"email"===e}))?(l.notify({type:"negative",message:a("API Error: missing email param")}),y.value.focus()):e.response.data.invalidOrMissingParams.find((function(e){return"password"===e}))?(l.notify({type:"negative",message:a("API Error: missing password param")}),E.value.focus()):l.notify({type:"negative",message:a("API Error: invalid/missing param")});break;case 404:k.value.email.hasErrors=!0,k.value.email.message=a("Email not registered"),(0,s.dY)((()=>{y.value.focus()}));break;case 401:k.value.password.hasErrors=!0,k.value.password.message=a("Invalid password"),(0,s.dY)((()=>{E.value.focus()}));break;default:l.notify({type:"negative",message:a("API Error: fatal error"),caption:a("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})});break}}))}return(e,l)=>{const i=(0,s.g2)("q-card-section"),n=(0,s.g2)("q-icon"),u=(0,s.g2)("q-input"),d=(0,s.g2)("q-spinner-hourglass"),c=(0,s.g2)("q-btn"),v=(0,s.g2)("router-link"),f=(0,s.g2)("q-card"),x=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(x,{class:"flex flex-center bg-grey-2"},{default:(0,s.k6)((()=>[(0,s.bF)(f,{class:"q-pa-md shadow-2 my_card",bordered:""},{default:(0,s.k6)((()=>[(0,s.Lk)("form",{onSubmit:(0,r.D$)(A,["prevent","stop"]),autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"},[(0,s.bF)(i,{class:"text-center"},{default:(0,s.k6)((()=>[(0,s.Lk)("h3",null,(0,t.v_)(e.$t("Homedocs")),1),(0,s.Lk)("div",p,(0,t.v_)(e.$t("Sign in below to access your account")),1)])),_:1}),(0,s.bF)(i,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{dense:"",outlined:"",ref_key:"emailRef",ref:y,modelValue:S.value,"onUpdate:modelValue":l[0]||(l[0]=e=>S.value=e),type:"email",name:"email",label:(0,o.R1)(a)("Email"),disable:h.value,autofocus:!0,rules:w,"lazy-rules":"",error:k.value.email.hasErrors,errorMessage:k.value.email.message},{prepend:(0,s.k6)((()=>[(0,s.bF)(n,{name:"alternate_email"})])),_:1},8,["modelValue","label","disable","error","errorMessage"]),(0,s.bF)(u,{dense:"",outlined:"",class:"q-mt-md",ref_key:"passwordRef",ref:E,modelValue:_.value,"onUpdate:modelValue":l[1]||(l[1]=e=>_.value=e),name:"password",type:"password",label:(0,o.R1)(a)("Password"),disable:h.value,rules:w,"lazy-rules":"",error:k.value.password.hasErrors,errorMessage:k.value.password.message},{prepend:(0,s.k6)((()=>[(0,s.bF)(n,{name:"key"})])),_:1},8,["modelValue","label","disable","error","errorMessage"])])),_:1}),(0,s.bF)(i,null,{default:(0,s.k6)((()=>[(0,s.bF)(c,{color:"dark",size:"md",label:e.$t("Sign in"),"no-caps":"",class:"full-width",icon:"account_circle",disable:h.value||!(S.value&&_.value),loading:h.value,type:"submit"},{loading:(0,s.k6)((()=>[(0,s.bF)(d,{class:"on-left"}),(0,s.eW)(" "+(0,t.v_)((0,o.R1)(a)("Loading...")),1)])),_:1},8,["label","disable","loading"])])),_:1}),b.value?((0,s.uX)(),(0,s.Wv)(i,{key:0,class:"text-center q-pt-none"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",m,[(0,s.eW)((0,t.v_)((0,o.R1)(a)("Don't have an account yet ?"))+" ",1),(0,s.bF)(v,{to:{name:"signUp"}},{default:(0,s.k6)((()=>[(0,s.Lk)("span",g,(0,t.v_)((0,o.R1)(a)("Click here to sign up")),1)])),_:1})])])),_:1})):(0,s.Q3)("",!0)],32)])),_:1})])),_:1})}}};var f=l(7716),b=l(3316),h=l(4189),k=l(9270),w=l(492),S=l(6384),y=l(3194),_=l(8582),E=l.n(_);const x=v,A=x;E()(v,"components",{QPage:f.A,QCard:b.A,QCardSection:h.A,QInput:k.A,QIcon:w.A,QBtn:S.A,QSpinnerHourglass:y.A})}}]);