"use strict";(globalThis["webpackChunkhomedocs"]=globalThis["webpackChunkhomedocs"]||[]).push([[655],{3389:(e,a,t)=>{t.r(a),t.d(a,{default:()=>ve});var l=t(1758),o=t(8790),d=t(8734),s=t(9104),r=t(3394),n=t(3537),i=t(3597),u=t(8051),c=t(5679);const m=(0,c.nY)("advancedSearchData",{state:()=>({filters:null,sort:null}),actions:{reset(){this.filters=null,this.sort=null}}});var p=t(6246);function f(){const{t:e}=(0,n.s9)(),a=[{labelKey:"Any date",value:0},{labelKey:"Today",value:1},{labelKey:"Yesterday",value:2},{labelKey:"Last 7 days",value:3},{labelKey:"Last 15 days",value:4},{labelKey:"Last 31 days",value:5},{labelKey:"Last 365 days",value:6},{labelKey:"Fixed date",value:7},{labelKey:"From date",value:8},{labelKey:"To date",value:9},{labelKey:"Between dates",value:10}],t=(0,l.EW)((()=>a.map((a=>({...a,label:e(a.labelKey)}))))),o="YYYY/MM/DD",s=(e=0)=>p.Ay.formatDate(p.Ay.addToDate(Date.now(),{days:e}),o),r=()=>{const a=(0,d.Kh)({filterType:t.value[0],formattedDate:{fixed:null,from:null,to:null},timestamps:{from:null,to:null},state:{hasFrom:!1,hasTo:!1,hasFixed:!1,hasValue:!1,denyChanges:!1},skipClearOnRecalc:{from:!1,to:!1,fixed:!1}}),r=()=>{switch(a.skipClearOnRecalc.from||(a.formattedDate.from=null),a.skipClearOnRecalc.to||(a.formattedDate.to=null),a.skipClearOnRecalc.fixed||(a.formattedDate.fixed=null),a.skipClearOnRecalc.from=!1,a.skipClearOnRecalc.to=!1,a.skipClearOnRecalc.fixed=!1,a.timestamps.from=null,a.timestamps.to=null,a.filterType?.value){case 0:a.formattedDate.from=null,a.formattedDate.to=null,a.formattedDate.fixed=null;break;case 1:a.formattedDate.fixed=s();break;case 2:a.formattedDate.fixed=s(-1);break;case 3:a.formattedDate.from=s(-7),a.formattedDate.to=s();break;case 4:a.formattedDate.from=s(-15),a.formattedDate.to=s();break;case 5:a.formattedDate.from=s(-31),a.formattedDate.to=s();break;case 6:a.formattedDate.from=s(-365),a.formattedDate.to=s();break;case 7:break;case 8:break;case 9:break;case 10:break}},n=()=>{a.formattedDate.fixed?(a.timestamps.from=p.Ay.formatDate(p.Ay.adjustDate(p.Ay.extractDate(a.formattedDate.fixed,o),{hour:0,minute:0,second:0,millisecond:0}),"x"),a.timestamps.to=p.Ay.formatDate(p.Ay.adjustDate(p.Ay.extractDate(a.formattedDate.fixed,o),{hour:23,minute:59,second:59,millisecond:999}),"x")):(a.formattedDate.from&&(a.timestamps.from=p.Ay.formatDate(p.Ay.adjustDate(p.Ay.extractDate(a.formattedDate.from,"YYYY/MM/DD"),{hour:0,minute:0,second:0,millisecond:0}),"x")),a.formattedDate.to&&(a.timestamps.to=p.Ay.formatDate(p.Ay.adjustDate(p.Ay.extractDate(a.formattedDate.to,"YYYY/MM/DD"),{hour:23,minute:59,second:59,millisecond:999}),"x")))};return(0,l.wB)((()=>a.formattedDate.from),(e=>{a.state.hasValue=!!e,n()})),(0,l.wB)((()=>a.formattedDate.to),(e=>{a.state.hasValue=!!e,n()})),(0,l.wB)((()=>a.formattedDate.fixed),(e=>{a.state.hasValue=!!e,n()})),(0,l.wB)((()=>t.value[0].label),(t=>{a.filterType.label=e(a.filterType.labelKey)})),(0,l.wB)((()=>a.filterType),(e=>{e?(a.state.hasFrom=[3,4,5,6,8,10].includes(e.value),a.state.hasTo=[3,4,5,6,9,10].includes(e.value),a.state.hasFixed=[1,2,7].includes(e.value),a.state.denyChanges=[1,2,3,4,5,6].includes(e.value)):a.filterType=t.value[0],r(),n()})),a};return{dateMask:o,dateFilterTypeOptions:t,getDateFilterInstance:r}}var b=t(4199),g=t(129),h=t(9295),v=t(3939),k=t(1112),D=t(2139);const y={class:"row q-col-gutter-xs"},x={class:"col"},F={key:0,class:"col"},C={class:"row items-center justify-end"},_={key:1,class:"col"},R={class:"row items-center justify-end"},A={key:2,class:"col"},q={class:"row items-center justify-end"},V={__name:"DateFieldCustomInput",props:{modelValue:{type:Object,required:!0},label:{type:String,default:""},dense:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},disable:{type:Boolean,required:!1,default:!1},autoOpenPopUps:{type:Boolean,required:!1,default:!0}},emits:["update:modelValue"],setup(e,{expose:a,emit:t}){const{t:o}=(0,n.s9)(),s=t,r=()=>{g.value?.hide()},i=()=>{h.value?.hide()},u=()=>{v.value?.hide()},c=e,m=(0,d.KR)(null),p=(0,d.KR)(null),b=(0,d.KR)(null),g=(0,d.KR)(null),h=(0,d.KR)(null),v=(0,d.KR)(null),k=(0,d.KR)(c.modelValue||{}),{dateFilterTypeOptions:D}=f(),V=(0,l.EW)((()=>c.disable||k.value.state.denyChanges));(0,l.wB)((()=>c.modelValue),(e=>k.value=e)),(0,l.wB)(k.value,(e=>{T(),s("update:modelValue",e),c.autoOpenPopUps&&(0,l.dY)((()=>{switch(e.filterType.value){case 7:e.formattedDate.fixed||v.value.show();break;case 8:e.formattedDate.from||g.value.show();break;case 9:e.formattedDate.to||h.value.show();break;case 10:e.formattedDate.from||g.value.show();break}}))}));const T=()=>{k.value.state.denyChanges||(0,l.dY)((()=>{switch(k.value.filterType.value){case 7:b.value?.focus();break;case 8:m.value?.focus();break;case 9:p.value?.focus();break;case 10:m.value?.focus();break}}))};return a({focus:T}),(0,l.sV)((()=>{c.autofocus&&T()})),(a,t)=>{const s=(0,l.g2)("q-icon"),n=(0,l.g2)("q-select"),c=(0,l.g2)("q-btn"),f=(0,l.g2)("q-date"),T=(0,l.g2)("q-popup-proxy"),w=(0,l.g2)("q-input"),U=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.CE)("div",y,[(0,l.Lk)("div",x,[(0,l.bF)(n,{class:"q-mb-md",dense:"","options-dense":"",outlined:"",clearable:0!==k.value.filterType.value,modelValue:k.value.filterType,"onUpdate:modelValue":t[0]||(t[0]=e=>k.value.filterType=e),options:(0,d.R1)(D),label:e.label,disable:e.disable},{prepend:(0,l.k6)((()=>[(0,l.RG)(a.$slots,"prepend",{},(()=>[(0,l.bF)(s,{name:"calendar_month"})]))])),_:3},8,["clearable","modelValue","options","label","disable"])]),k.value.state.hasFrom?((0,l.uX)(),(0,l.CE)("div",F,[(0,l.bF)(w,{dense:"",outlined:"",mask:"date",modelValue:k.value.formattedDate.from,"onUpdate:modelValue":t[2]||(t[2]=e=>k.value.formattedDate.from=e),label:(0,d.R1)(o)("From date"),disable:V.value,ref_key:"qInputFromDateRef",ref:m,error:!k.value.formattedDate.from,"error-message":(0,d.R1)(o)("Field is required")},{append:(0,l.k6)((()=>[(0,l.bF)(s,{name:"event",class:"cursor-pointer"},{default:(0,l.k6)((()=>[(0,l.bF)(T,{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"qInputFromDatePopupProfyRef",ref:g},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:k.value.formattedDate.from,"onUpdate:modelValue":[t[1]||(t[1]=e=>k.value.formattedDate.from=e),r],minimal:""},{default:(0,l.k6)((()=>[(0,l.Lk)("div",C,[(0,l.bo)((0,l.bF)(c,{label:"Close",color:"primary",flat:""},null,512),[[U]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue","label","disable","error","error-message"])])):(0,l.Q3)("",!0),k.value.state.hasTo?((0,l.uX)(),(0,l.CE)("div",_,[(0,l.bF)(w,{dense:"",outlined:"",mask:"date",modelValue:k.value.formattedDate.to,"onUpdate:modelValue":t[4]||(t[4]=e=>k.value.formattedDate.to=e),label:(0,d.R1)(o)("To date"),disable:V.value,ref_key:"qInputToDateRef",ref:p,error:!k.value.formattedDate.to,"error-message":(0,d.R1)(o)("Field is required")},{append:(0,l.k6)((()=>[(0,l.bF)(s,{name:"event",class:"cursor-pointer"},{default:(0,l.k6)((()=>[(0,l.bF)(T,{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"qInputToDatePopupProfyRef",ref:h},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:k.value.formattedDate.to,"onUpdate:modelValue":[t[3]||(t[3]=e=>k.value.formattedDate.to=e),i],minimal:""},{default:(0,l.k6)((()=>[(0,l.Lk)("div",R,[(0,l.bo)((0,l.bF)(c,{label:"Close",color:"primary",flat:""},null,512),[[U]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue","label","disable","error","error-message"])])):(0,l.Q3)("",!0),k.value.state.hasFixed?((0,l.uX)(),(0,l.CE)("div",A,[(0,l.bF)(w,{dense:"",outlined:"",mask:"date",modelValue:k.value.formattedDate.fixed,"onUpdate:modelValue":t[6]||(t[6]=e=>k.value.formattedDate.fixed=e),label:(0,d.R1)(o)("Fixed date"),disable:V.value,ref_key:"qInputFixedDateRef",ref:b,error:!k.value.formattedDate.fixed,"error-message":(0,d.R1)(o)("Field is required")},{append:(0,l.k6)((()=>[(0,l.bF)(s,{name:"event",class:"cursor-pointer"},{default:(0,l.k6)((()=>[(0,l.bF)(T,{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"qInputFixedDatePopupProfyRef",ref:v},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:k.value.formattedDate.fixed,"onUpdate:modelValue":[t[5]||(t[5]=e=>k.value.formattedDate.fixed=e),u],minimal:""},{default:(0,l.k6)((()=>[(0,l.Lk)("div",q,[(0,l.bo)((0,l.bF)(c,{label:"Close",color:"primary",flat:""},null,512),[[U]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue","label","disable","error","error-message"])])):(0,l.Q3)("",!0)])}}};var T=t(5848),w=t(492),U=t(9270),O=t(8975),E=t(8670),P=t(6384),L=t(8672),K=t(8582),Q=t.n(K);const S=V,B=S;Q()(V,"components",{QSelect:T.A,QIcon:w.A,QInput:U.A,QPopupProxy:O.A,QDate:E.A,QBtn:P.A}),Q()(V,"directives",{ClosePopup:L.A});const I={__name:"SortByFieldCustomButtonDropdown",props:{options:{type:Array,required:!0,validator(e){return Array.isArray(e)}},current:{type:Object,required:!0},dense:{type:Boolean,required:!1,default:!1}},emits:["change"],setup(e,{emit:a}){const t=(0,l.OA)(),{t:s}=(0,n.s9)(),r=a,i=e,u=(0,d.Kh)({field:i.current?.field||null,label:i.current?.label||null,order:i.current?.order||null});u.label||(u.label=i.options.find((e=>e.field==u.field))?.label);const c=(0,l.EW)((()=>s("Current sort by",{label:u.label?s(u.label):null,order:u.order?s("DESC"==u.order?"descending":"ascending"):null}))),m=e=>{u.field=e.field,u.label=e.label,u.order=e.order,r("change",u)};(0,l.wB)((()=>i.current),(e=>{u.field=e.field,u.label=e.label,u.order=e.order}));const p=(0,d.Kh)([]);return i.options?.forEach((e=>{p.push({field:e.field,label:e.label,order:"ASC"}),p.push({field:e.field,label:e.label,order:"DESC"})})),(a,r)=>{const n=(0,l.g2)("q-icon"),i=(0,l.g2)("q-item-section"),f=(0,l.g2)("q-item-label"),b=(0,l.g2)("q-item"),g=(0,l.g2)("q-list"),h=(0,l.g2)("q-btn-dropdown"),v=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.Wv)(h,(0,l.v6)((0,d.R1)(t),{label:c.value,dense:e.dense}),{default:(0,l.k6)((()=>[(0,l.bF)(g,null,{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(p,((a,t)=>(0,l.bo)(((0,l.uX)(),(0,l.Wv)(b,{dense:e.dense,key:t,onClick:e=>m(a),clickable:!(a.field==u.field&&a.order==u.order),disable:a.field==u.field&&a.order==u.order},{default:(0,l.k6)((()=>[(0,l.bF)(i,{avatar:""},{default:(0,l.k6)((()=>[(0,l.bF)(n,{name:"ASC"==a.order?"keyboard_double_arrow_up":"keyboard_double_arrow_down"},null,8,["name"])])),_:2},1024),(0,l.bF)(i,null,{default:(0,l.k6)((()=>[(0,l.bF)(f,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)((0,d.R1)(s)("Current sort by",{label:(0,d.R1)(s)(a.label),order:"DESC"==a.order?(0,d.R1)(s)("descending"):(0,d.R1)(s)("ascending")})),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["dense","onClick","clickable","disable"])),[[v]]))),128))])),_:1})])),_:1},16,["label","dense"])}}};var W=t(8301),M=t(3999),X=t(124),Y=t(5173),z=t(3796);const j=I,$=j;Q()(I,"components",{QBtnDropdown:W.A,QList:M.A,QItem:X.A,QItemSection:Y.A,QIcon:w.A,QItemLabel:z.A}),Q()(I,"directives",{ClosePopup:L.A});var N=t(2588);const G={class:"row q-col-gutter-sm"},H={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6"},J={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6"},Z={key:0,class:"q-ma-md flex flex-center"},ee={class:"lt-xl"},ae=["style2","onClick"],te={class:"lt-xl"},le={class:"td-document-link gt-lg"},oe={class:"gt-lg"},de={class:"gt-lg"},se={class:"gt-lg"},re={class:"gt-lg"},ne={key:1,class:"q-ma-md flex flex-center"},ie={__name:"AdvancedSearchPage",setup(e){const{t:a}=(0,n.s9)(),t=(0,r.lq)(),{api:c}=(0,u.M)(),{bus:p,onShowDocumentFiles:y,onShowDocumentNotes:x}=(0,i.U)(),{fullDateTimeHuman:F,timeAgo:C}=(0,b.c)(),_=[{field:"title",title:"Title",defaultClass:"gt-lg"},{field:"createdOnTimestamp",title:"Creation date",defaultClass:"gt-lg"},{field:"lastUpdateTimestamp",title:"Last update",defaultClass:"gt-lg"},{field:"attachmentCount",title:"Attachments",defaultClass:"gt-lg"},{field:"noteCount",title:"Notes",defaultClass:"gt-lg"}],R=_.map((e=>({field:e.field,label:e.title}))),A=(0,d.Kh)({loading:!1,loadingError:!1,errorMessage:null,apiError:null,searchLaunched:!1}),q=(0,d.KR)(t.meta.conditionsFilterExpanded),V=(0,d.KR)(null),{getDateFilterInstance:T,dateFilterTypeOptions:w}=f(),U=(0,l.EW)((()=>"advancedSearch"==t.name)),O=m(),E=(0,d.Kh)({text:{title:null,description:null,notes:null},tags:[],dates:{creationDate:T(),lastUpdate:T(),updatedOn:T()}}),P=(0,d.Kh)({currentPage:1,resultsPage:32,totalResults:0,totalPages:0}),L=(0,d.Kh)({field:"lastUpdateTimestamp",order:"DESC"}),K=(0,d.Kh)([]),Q=(0,l.EW)((()=>K.length>0)),S=(0,l.EW)((()=>!A.loading&&A.loadingError)),I=(0,l.EW)((()=>!A.loading&&A.searchLaunched&&!Q.value));void 0!==t.params.tag&&E.tags.push(t.params.tag);const W=(0,l.EW)((()=>void 0!==t.params.fixedCreationDate)),M=(0,l.EW)((()=>void 0!==t.params.fixedLastUpdate)),X=(0,l.EW)((()=>void 0!==t.params.fixedUpdatedOn)),Y=(0,l.EW)((()=>"ASC"==L.order?"keyboard_double_arrow_up":"keyboard_double_arrow_down")),z=(0,l.EW)((()=>{let e=0;return E.text.title&&e++,E.text.description&&e++,E.text.notesBody&&e++,E.text.attachmentsFilename&&e++,E.tags&&E.tags.length>0&&(e+=E.tags.length),E.dates.creationDate.state.hasValue&&e++,E.dates.lastUpdate.state.hasValue&&e++,E.dates.updatedOn.state.hasValue&&e++,e})),j=e=>{P.currentPage=e,ue(!1)},ie=(e,a)=>{A.loading||(L.field==e?L.order=a||("ASC"==L.order?"DESC":"ASC"):(L.field=e,L.order=a||"ASC"),ue(!1))},ue=e=>{e&&(P.currentPage=1),A.loading=!0,A.loadingError=!1,A.errorMessage=null,A.apiError=null,U.value&&(O.filters=E,O.sort=L),c.document.search(P.currentPage,P.resultsPage,E,L.field,L.order).then((e=>{e.data.results?(K.length=0,P.currentPage=e.data.results.pagination.currentPage,P.resultsPage=e.data.results.pagination.resultsPage,P.totalResults=e.data.results.pagination.totalResults,P.totalPages=e.data.results.pagination.totalPages,K.push(...e.data.results.documents.map((e=>(e.creationDate=F(e.createdOnTimestamp),e.creationDateTimeAgo=C(e.createdOnTimestamp),e.lastUpdate=F(e.lastUpdateTimestamp),e.lastUpdateTimeAgo=C(e.lastUpdateTimestamp),e)))),A.searchLaunched=!0,V.value?.expand(),A.loading=!1):A.loading=!1})).catch((e=>{switch(A.apiError=e.customAPIErrorDetails,e.response.status){case 400:A.loadingError=!0,A.errorMessage="API Error: invalid/missing param";break;case 401:A.apiError=e.customAPIErrorDetails,A.errorMessage="Auth session expired, requesting new...",p.emit("reAuthRequired",{emitter:"AdvancedSearchPage.onSubmitForm"});break;default:A.loadingError=!0,A.errorMessage="API Error: fatal error";break}A.loading=!1,A.searchLaunched=!0}))},ce=()=>{E.text.title=null,E.text.description=null,E.text.notesBody=null,E.text.attachmentsFilename=null,E.tags.length=0,E.dates={creationDate:T(),lastUpdate:T(),updatedOn:T()},L.field="lastUpdateTimestamp",L.order="DESC",A.searchLaunched=!1,K.length=0};return(0,l.sV)((()=>{W.value?(E.dates.creationDate.skipClearOnRecalc.fixed=!0,E.dates.creationDate.filterType=w.value[7],E.dates.creationDate.formattedDate.fixed=t.params.fixedCreationDate.replaceAll("-","/")):M.value?(E.dates.lastUpdate.skipClearOnRecalc.fixed=!0,E.dates.lastUpdate.filterType=w.value[7],E.dates.lastUpdate.formattedDate.fixed=t.params.fixedLastUpdate.replaceAll("-","/")):X.value?(E.dates.updatedOn.skipClearOnRecalc.fixed=!0,E.dates.updatedOn.filterType=w.value[7],E.dates.updatedOn.formattedDate.fixed=t.params.fixedUpdatedOn.replaceAll("-","/")):U.value&&(E.text.title=O.filters?.text.title||null,E.text.description=O.filters?.text.description||null,E.text.notesBody=O.filters?.text.notesBody||null,E.text.attachmentsFilename=O.filters?.text.attachmentsFilename||null,E.tags=O.filters?.tags||[],O.filters?.dates&&(E.dates.creationDate.skipClearOnRecalc.fixed=!0,E.dates.creationDate.formattedDate.fixed=O.filters.dates.creationDate.formattedDate.fixed,E.dates.creationDate.skipClearOnRecalc.from=!0,E.dates.creationDate.formattedDate.from=O.filters.dates.creationDate.formattedDate.from,E.dates.creationDate.skipClearOnRecalc.to=!0,E.dates.creationDate.formattedDate.to=O.filters.dates.creationDate.formattedDate.to,E.dates.creationDate.filterType=O.filters.dates.creationDate.filterType,E.dates.lastUpdate.skipClearOnRecalc.fixed=!0,E.dates.lastUpdate.formattedDate.fixed=O.filters.dates.lastUpdate.formattedDate.fixed,E.dates.lastUpdate.skipClearOnRecalc.from=!0,E.dates.lastUpdate.formattedDate.from=O.filters.dates.lastUpdate.formattedDate.from,E.dates.lastUpdate.skipClearOnRecalc.to=!0,E.dates.lastUpdate.formattedDate.to=O.filters.dates.lastUpdate.formattedDate.to,E.dates.lastUpdate.filterType=O.filters.dates.lastUpdate.filterType,E.dates.updatedOn.skipClearOnRecalc.fixed=!0,E.dates.updatedOn.formattedDate.fixed=O.filters.dates.updatedOn.formattedDate.fixed,E.dates.updatedOn.skipClearOnRecalc.from=!0,E.dates.updatedOn.formattedDate.from=O.filters.dates.updatedOn.formattedDate.from,E.dates.updatedOn.skipClearOnRecalc.to=!0,E.dates.updatedOn.formattedDate.to=O.filters.dates.updatedOn.formattedDate.to,E.dates.updatedOn.filterType=O.filters.dates.updatedOn.filterType),O.sort?.field&&(L.field=O.sort.field),O.sort?.order&&(L.order=O.sort.order)),t.meta.autoLaunchSearch&&(0,l.dY)((()=>{ue(!0)})),p.on("reAuthSucess",(e=>{e.to?.includes("AdvancedSearchPage.onSubmitForm")&&ue(!1)}))})),(0,l.xo)((()=>{p.off("reAuthSucess")})),(e,t)=>{const r=(0,l.g2)("q-chip"),n=(0,l.g2)("q-icon"),i=(0,l.g2)("q-input"),u=(0,l.g2)("q-spinner-hourglass"),c=(0,l.g2)("q-btn"),m=(0,l.g2)("q-btn-group"),p=(0,l.g2)("q-pagination"),f=(0,l.g2)("q-item-label"),b=(0,l.g2)("q-item-section"),F=(0,l.g2)("q-item"),C=(0,l.g2)("q-list"),T=(0,l.g2)("q-markup-table"),O=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(O,null,{default:(0,l.k6)((()=>[(0,l.bF)(v.A,{title:"Advanced search",icon:"filter_alt",loading:A.loading,error:A.loadingError,expanded:q.value},{"header-extra":(0,l.k6)((()=>[(0,l.bF)(r,{square:"",size:"sm",color:"grey-7","text-color":"white"},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)((0,d.R1)(a)("Total search conditions count",{count:z.value})),1)])),_:1})])),content:(0,l.k6)((()=>[(0,l.Lk)("form",{onSubmit:t[8]||(t[8]=(0,s.D$)((e=>ue(!0)),["prevent","stop"])),onReset:(0,s.D$)(ce,["prevent","stop"]),autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false",class:"q-pa-md"},[(0,l.Lk)("div",G,[(0,l.Lk)("div",H,[(0,l.bF)(i,{class:"q-mb-md",dense:"",outlined:"",modelValue:E.text.title,"onUpdate:modelValue":t[0]||(t[0]=e=>E.text.title=e),modelModifiers:{trim:!0},type:"text",name:"title",clearable:"",label:(0,d.R1)(a)("Document title"),disable:A.loading,autofocus:!0,placeholder:(0,d.R1)(a)("Type text condition")},{prepend:(0,l.k6)((()=>[(0,l.bF)(n,{name:"article"})])),_:1},8,["modelValue","label","disable","placeholder"]),(0,l.bF)(i,{class:"q-mb-md",dense:"",outlined:"",modelValue:E.text.description,"onUpdate:modelValue":t[1]||(t[1]=e=>E.text.description=e),modelModifiers:{trim:!0},type:"text",name:"description",clearable:"",label:(0,d.R1)(a)("Document description"),disable:A.loading,placeholder:(0,d.R1)(a)("Type text condition")},{prepend:(0,l.k6)((()=>[(0,l.bF)(n,{name:"article"})])),_:1},8,["modelValue","label","disable","placeholder"]),(0,l.bF)(i,{class:"q-mb-md",dense:"",outlined:"",modelValue:E.text.notesBody,"onUpdate:modelValue":t[2]||(t[2]=e=>E.text.notesBody=e),modelModifiers:{trim:!0},type:"text",name:"notesBody",clearable:"",label:(0,d.R1)(a)("Document notes"),disable:A.loading,placeholder:(0,d.R1)(a)("Type text condition")},{prepend:(0,l.k6)((()=>[(0,l.bF)(n,{name:"speaker_notes"})])),_:1},8,["modelValue","label","disable","placeholder"]),(0,l.bF)(i,{class:"q-mb-md",dense:"",outlined:"",modelValue:E.text.attachmentsFilename,"onUpdate:modelValue":t[3]||(t[3]=e=>E.text.attachmentsFilename=e),modelModifiers:{trim:!0},type:"text",name:"notesBody",clearable:"",label:(0,d.R1)(a)("Document attachment filenames"),disable:A.loading,placeholder:(0,d.R1)(a)("Type text condition")},{prepend:(0,l.k6)((()=>[(0,l.bF)(n,{name:"attach_file"})])),_:1},8,["modelValue","label","disable","placeholder"])]),(0,l.Lk)("div",J,[(0,l.bF)(h.A,{modelValue:E.tags,"onUpdate:modelValue":t[4]||(t[4]=e=>E.tags=e),label:"Document tags",disabled:A.loading,dense:"","start-mode-editable":!0,"deny-change-editable-mode":!0,clearable:"",placeholder:(0,d.R1)(a)("Type text condition")},null,8,["modelValue","disabled","placeholder"]),(0,l.bF)(B,{options:(0,d.R1)(w),label:(0,d.R1)(a)("Document creation date"),disable:A.loading||W.value,modelValue:E.dates.creationDate,"onUpdate:modelValue":t[5]||(t[5]=e=>E.dates.creationDate=e),"auto-open-pop-ups":!W.value},null,8,["options","label","disable","modelValue","auto-open-pop-ups"]),(0,l.bF)(B,{options:(0,d.R1)(w),label:(0,d.R1)(a)("Document last update"),disable:A.loading||M.value,modelValue:E.dates.lastUpdate,"onUpdate:modelValue":t[6]||(t[6]=e=>E.dates.lastUpdate=e),"auto-open-pop-ups":!M.value},null,8,["options","label","disable","modelValue","auto-open-pop-ups"]),(0,l.bF)(B,{options:(0,d.R1)(w),label:(0,d.R1)(a)("Document updated on"),disable:A.loading||X.value,modelValue:E.dates.updatedOn,"onUpdate:modelValue":t[7]||(t[7]=e=>E.dates.updatedOn=e),"auto-open-pop-ups":!X.value},null,8,["options","label","disable","modelValue","auto-open-pop-ups"])])]),(0,l.bF)(m,{spread:""},{default:(0,l.k6)((()=>[(0,l.bF)(c,{color:"primary",size:"md",label:e.$t("Search"),"no-caps":"",icon:"search",disable:A.loading,loading:A.loading,type:"submit"},{loading:(0,l.k6)((()=>[(0,l.bF)(u,{class:"on-left"}),(0,l.eW)(" "+(0,o.v_)((0,d.R1)(a)("Searching...")),1)])),_:1},8,["label","disable","loading"]),U.value?((0,l.uX)(),(0,l.Wv)(c,{key:0,class:"action-secondary",size:"md",label:e.$t("Reset filters"),"no-caps":"",icon:"undo",disable:A.loading||z.value<1,type:"reset"},null,8,["label","disable"])):(0,l.Q3)("",!0)])),_:1})],32),S.value?((0,l.uX)(),(0,l.Wv)(k.A,{key:0,text:A.errorMessage||"Error loading data","api-error":A.apiError,class:"q-ma-md"},null,8,["text","api-error"])):I.value?((0,l.uX)(),(0,l.Wv)(D.A,{key:1,warning:"",text:"No results found with current filter",class:"q-ma-md"})):(0,l.Q3)("",!0)])),_:1},8,["loading","error","expanded"]),(0,l.bo)((0,l.bF)(v.A,{title:"Results",icon:"folder_open",staticIcon:!0,loading:A.loading,error:A.loadingError,expanded:"",class:"q-mt-sm",ref_key:"resultsWidgetRef",ref:V},{"header-extra":(0,l.k6)((()=>[(0,l.bF)(r,{square:"",size:"sm",color:"grey-7","text-color":"white"},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)((0,d.R1)(a)("Total search results count",{count:P.totalResults})),1)])),_:1})])),content:(0,l.k6)((()=>[P.totalPages>1?((0,l.uX)(),(0,l.CE)("div",Z,[(0,l.bF)(p,{modelValue:P.currentPage,"onUpdate:modelValue":[t[9]||(t[9]=e=>P.currentPage=e),j],color:"dark",max:P.totalPages,"max-pages":5,"boundary-numbers":"","direction-links":"","boundary-links":"",disable:A.loading,class:"theme-default-q-pagination"},null,8,["modelValue","max","disable"])])):(0,l.Q3)("",!0),(0,l.bF)(T,{class:"q-ma-md"},{default:(0,l.k6)((()=>[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",ee,[(0,l.bF)($,{square:"",dense:"","no-caps":"",options:(0,d.R1)(R),current:L,onChange:t[10]||(t[10]=e=>ie(e.field,e.order)),flat:"",class:"action-primary fit full-height"},null,8,["options","current"])]),((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(_,((e,t)=>(0,l.Lk)("th",{key:t,style2:{width:e.width},class:(0,o.C4)(["text-left",e.defaultClass,{"cursor-not-allowed":A.loading,"cursor-pointer":!A.loading,"action-primary":L.field===e.field}]),onClick:a=>ie(e.field)},[(0,l.bF)(n,{name:L.field===e.field?Y.value:"sort",size:"sm"},null,8,["name"]),(0,l.eW)(" "+(0,o.v_)((0,d.R1)(a)(e.title))+" ",1),(0,l.bF)(g.A,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)((0,d.R1)(a)("Toggle sort by this column",{field:(0,d.R1)(a)(e.title)})),1)])),_:2},1024)],10,ae))),64))])]),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(K,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",te,[(0,l.bF)(C,{dense:""},{default:(0,l.k6)((()=>[(0,l.bF)(F,{clickable:"",disable:A.loading,to:{name:"document",params:{id:e.id}},class:"bg-transparent"},{default:(0,l.k6)((()=>[(0,l.bF)(b,null,{default:(0,l.k6)((()=>[(0,l.bF)(f,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)((0,d.R1)(a)("Title"))+": "+(0,o.v_)(e.title),1)])),_:2},1024),(0,l.bF)(f,{caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)((0,d.R1)(a)("Creation date"))+": "+(0,o.v_)(e.creationDate)+" ("+(0,o.v_)(e.creationDateTimeAgo)+")",1)])),_:2},1024),e.lastUpdate?((0,l.uX)(),(0,l.Wv)(f,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)((0,d.R1)(a)("Last update"))+": "+(0,o.v_)(e.lastUpdate)+" ("+(0,o.v_)(e.lastUpdateTimeAgo)+")",1)])),_:2},1024)):(0,l.Q3)("",!0)])),_:2},1024),(0,l.bF)(b,{side:"",top:""},{default:(0,l.k6)((()=>[(0,l.bF)(N.A,{size:"md",square:"",class:"min-width-9em",count:e.attachmentCount,label:"Total attachments count","tool-tip":"View document attachments",disable:A.loading,onClick:(0,s.D$)((a=>(0,d.R1)(y)(e.id,e.title)),["stop","prevent"])},null,8,["count","disable","onClick"]),(0,l.bF)(N.A,{size:"md",square:"",class:"min-width-9em",count:e.noteCount,label:"Total notes","tool-tip":"View document notes",disable:A.loading,onClick:(0,s.D$)((a=>(0,d.R1)(x)(e.id,e.title)),["stop","prevent"])},null,8,["count","disable","onClick"])])),_:2},1024)])),_:2},1032,["disable","to"])])),_:2},1024)]),(0,l.Lk)("td",le,[(0,l.bF)(c,{align:"left","no-caps":"",flat:"",to:{name:"document",params:{id:e.id}},class:"fit text-decoration-hover",label:e.title},null,8,["to","label"])]),(0,l.Lk)("td",oe,(0,o.v_)(e.creationDate),1),(0,l.Lk)("td",de,(0,o.v_)(e.lastUpdate),1),(0,l.Lk)("td",se,[(0,l.bF)(N.A,{size:"md",square:"",class:"min-width-8em",count:e.attachmentCount,label:"Total attachments count","tool-tip":"View document attachments",disable:A.loading,onClick:(0,s.D$)((a=>(0,d.R1)(y)(e.id,e.title)),["stop","prevent"]),"q-chip-class":"'q-chip-8em'"},null,8,["count","disable","onClick"])]),(0,l.Lk)("td",re,[(0,l.bF)(N.A,{size:"md",square:"",class:"min-width-8em",count:e.noteCount,label:"Total notes","tool-tip":"View document notes",disable:A.loading,onClick:(0,s.D$)((a=>(0,d.R1)(x)(e.id,e.title)),["stop","prevent"]),"q-chip-class":"'q-chip-8em'"},null,8,["count","disable","onClick"])])])))),128))])])),_:1}),P.totalPages>1?((0,l.uX)(),(0,l.CE)("div",ne,[(0,l.bF)(p,{modelValue:P.currentPage,"onUpdate:modelValue":[t[11]||(t[11]=e=>P.currentPage=e),j],color:"dark",max:P.totalPages,"max-pages":5,"boundary-numbers":"","direction-links":"","boundary-links":"",disable:A.loading,class:"theme-default-q-pagination"},null,8,["modelValue","max","disable"])])):(0,l.Q3)("",!0)])),_:1},8,["loading","error"]),[[s.aG,Q.value]])])),_:1})}}};var ue=t(2807),ce=t(7716),me=t(6760),pe=t(6031),fe=t(3194),be=t(4700),ge=t(857);const he=(0,ue.A)(ie,[["__scopeId","data-v-b5ca418a"]]),ve=he;Q()(ie,"components",{QPage:ce.A,QChip:me.A,QInput:U.A,QIcon:w.A,QBtnGroup:pe.A,QBtn:P.A,QSpinnerHourglass:fe.A,QPagination:be.A,QMarkupTable:ge.A,QList:M.A,QItem:X.A,QItemSection:Y.A,QItemLabel:z.A})}}]);