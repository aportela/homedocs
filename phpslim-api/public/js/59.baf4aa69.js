"use strict";(globalThis["webpackChunkhomedocs"]=globalThis["webpackChunkhomedocs"]||[]).push([[59],{2537:(e,t,a)=>{a.r(t),a.d(t,{default:()=>V});var o=a(1758),r=a(8734),l=a(4907),n=a(8790),s=a(9104),i=a(3537),u=a(3597),d=a(8051),c=a(4199),g=a(3939),p=a(1112),m=a(2139),h=a(6178),k=a(2588);const b={class:"row items-left q-gutter-sm"},v={class:"text-weight-bold"},x={class:"text-weight-bold"},E={__name:"RecentDocumentsWidget",props:{expanded:{type:Boolean,required:!1,default:!0}},setup(e){const{t}=(0,i.s9)(),{timeAgo:a}=(0,c.c)(),{api:l}=(0,d.M)(),{bus:E,onShowDocumentFiles:A,onShowDocumentNotes:q}=(0,u.U)(),_=e,F=(0,r.KR)(_.expanded),f=(0,r.Kh)({loading:!1,loadingError:!1,errorMessage:null,apiError:null}),y=(0,r.Kh)([]),w=(0,o.EW)((()=>y.length>0)),C=()=>{f.loading||(f.loading=!0,f.loadingError=!1,f.errorMessage=null,f.apiError=null,l.document.searchRecent(16).then((e=>{y.length=0,y.push(...e.data.recentDocuments.map((e=>(e.lastUpdateTimeAgo=a(e.lastUpdateTimestamp),e)))),f.loading=!1})).catch((e=>{switch(f.loadingError=!0,e.response.status){case 401:f.apiError=e.customAPIErrorDetails,f.errorMessage="Auth session expired, requesting new...",E.emit("reAuthRequired",{emitter:"RecentDocumentsWidget"});break;default:f.apiError=e.customAPIErrorDetails,f.errorMessage="API Error: fatal error";break}f.loading=!1})))};return(0,o.sV)((()=>{C(),E.on("reAuthSucess",(e=>{e.to?.includes("RecentDocumentsWidget")&&C()}))})),(0,o.xo)((()=>{E.off("reAuthSucess")})),(e,a)=>{const l=(0,o.g2)("q-chip"),i=(0,o.g2)("q-skeleton"),u=(0,o.g2)("q-item-section"),d=(0,o.g2)("q-item-label"),c=(0,o.g2)("q-item"),E=(0,o.g2)("q-list"),_=(0,o.g2)("q-avatar");return(0,o.uX)(),(0,o.Wv)(g.A,{title:"Most recent activity",icon:"work_history","icon-tool-tip":"Click to refresh data","on-header-icon-click":C,loading:f.loading,error:f.loadingError,expanded:F.value,onExpand:a[0]||(a[0]=e=>F.value=!0),onCollapse:a[1]||(a[1]=e=>F.value=!1)},{"header-extra":(0,o.k6)((()=>[(0,o.bF)(l,{square:"",size:"sm",color:"grey-7","text-color":"white"},{default:(0,o.k6)((()=>[(0,o.eW)((0,n.v_)((0,r.R1)(t)("Total document count",{count:y.length})),1)])),_:1})])),content:(0,o.k6)((()=>[f.loading?((0,o.uX)(),(0,o.Wv)(E,{key:0},{default:(0,o.k6)((()=>[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(4,(e=>(0,o.Lk)("div",{key:e,class:"border-bottom-except-last-item"},[(0,o.bF)(c,{class:"transparent-background text-color-primary q-pa-sm"},{default:(0,o.k6)((()=>[(0,o.bF)(u,{top:"",avatar:"",class:"gt-xs q-mt-lg"},{default:(0,o.k6)((()=>[(0,o.bF)(i,{type:"QAvatar",square:"",size:"32px"})])),_:1}),(0,o.bF)(u,{class:"q-mx-md"},{default:(0,o.k6)((()=>[(0,o.bF)(d,null,{default:(0,o.k6)((()=>[(0,o.bF)(i,{type:"text"})])),_:1}),(0,o.bF)(d,{caption:"",lines:"2"},{default:(0,o.k6)((()=>[(0,o.bF)(i,{type:"text",height:"2em"})])),_:1}),(0,o.bF)(d,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",b,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(5,(e=>(0,o.bF)(i,{square:"",width:"6em",height:"2em",class:"",key:e}))),64))])])),_:1})])),_:1}),(0,o.bF)(u,{side:"",top:""},{default:(0,o.k6)((()=>[(0,o.bF)(d,{caption:""},{default:(0,o.k6)((()=>[(0,o.bF)(i,{type:"text",width:"8em",height:"2em"}),(0,o.bF)(i,{square:"",width:"8em",height:"2em",class:"q-mt-sm"}),(0,o.bF)(i,{square:"",width:"8em",height:"2em",class:"q-mt-sm"})])),_:1})])),_:1})])),_:1})]))),64))])),_:1})):f.loadingError?((0,o.uX)(),(0,o.Wv)(p.A,{key:1,text:f.errorMessage||"Error loading data","api-error":f.apiError},null,8,["text","api-error"])):w.value?((0,o.uX)(),(0,o.Wv)(E,{key:2},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(y,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"border-bottom-except-last-item"},[(0,o.bF)(c,{class:"transparent-background text-color-primary q-pa-sm",clickable:"",to:{name:"document",params:{id:e.id}}},{default:(0,o.k6)((()=>[(0,o.bF)(u,{top:"",avatar:"",class:"gt-xs"},{default:(0,o.k6)((()=>[(0,o.bF)(_,{square:"",icon:"work",size:"64px","aria-label":"Document avatar"})])),_:1}),(0,o.bF)(u,{top:""},{default:(0,o.k6)((()=>[(0,o.bF)(d,null,{default:(0,o.k6)((()=>[(0,o.Lk)("span",v,(0,n.v_)((0,r.R1)(t)("Title"))+":",1),(0,o.eW)(" "+(0,n.v_)(e.title),1)])),_:2},1024),e.description?((0,o.uX)(),(0,o.Wv)(d,{key:0,caption:"",lines:"2"},{default:(0,o.k6)((()=>[(0,o.Lk)("span",x,(0,n.v_)((0,r.R1)(t)("Description"))+":",1),(0,o.eW)(" "+(0,n.v_)(e.description),1)])),_:2},1024)):(0,o.Q3)("",!0),e.tags?.length>0?((0,o.uX)(),(0,o.Wv)(d,{key:1},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.tags,(e=>((0,o.uX)(),(0,o.Wv)(h.A,{key:e,tag:e,icon:"tag"},null,8,["tag"])))),128))])),_:2},1024)):(0,o.Q3)("",!0)])),_:2},1024),(0,o.bF)(u,{side:"",top:""},{default:(0,o.k6)((()=>[(0,o.bF)(d,{caption:""},{default:(0,o.k6)((()=>[(0,o.eW)((0,n.v_)(e.lastUpdateTimeAgo),1)])),_:2},1024),(0,o.bF)(k.A,{size:"md",square:"",class:"min-width-9em",count:e.attachmentCount,label:"Total attachments count","tool-tip":"View document attachments",disable:f.loading,onClick:(0,s.D$)((t=>(0,r.R1)(A)(e.id,e.title)),["stop","prevent"])},null,8,["count","disable","onClick"]),(0,o.bF)(k.A,{size:"md",square:"",class:"min-width-9em",count:e.noteCount,label:"Total notes","tool-tip":"View document notes",disable:f.loading,onClick:(0,s.D$)((t=>(0,r.R1)(q)(e.id,e.title)),["stop","prevent"])},null,8,["count","disable","onClick"])])),_:2},1024)])),_:2},1032,["to"])])))),128))])),_:1})):((0,o.uX)(),(0,o.Wv)(m.A,{key:3,warning:"",text:"You haven't created any documents yet"}))])),_:1},8,["loading","error","expanded"])}}};var A=a(6760),q=a(3999),_=a(124),F=a(5173),f=a(3820),y=a(3796),w=a(3952),C=a(8582),W=a.n(C);const X=E,I=X;W()(E,"components",{QChip:A.A,QList:q.A,QItem:_.A,QItemSection:F.A,QSkeleton:f.Ay,QItemLabel:y.A,QAvatar:w.A});const R={key:0,class:"row items-center q-gutter-sm q-mt-none q-pa-xs"},D={key:2},T={__name:"TagCloudWidget",props:{expanded:{type:Boolean,required:!1,default:!0}},setup(e){const{t}=(0,i.s9)(),{api:a}=(0,d.M)(),{bus:l}=(0,u.U)(),s=e,c=(0,r.KR)(s.expanded),k=(0,r.Kh)({loading:!1,loadingError:!1,errorMessage:null,apiError:null}),b=(0,r.Kh)([]),v=(0,o.EW)((()=>b.length>0)),x=()=>{k.loading||(k.loading=!0,k.loadingError=!1,k.errorMessage=null,k.apiError=null,a.tag.getCloud().then((e=>{b.length=0,b.push(...e.data.tags),k.loading=!1})).catch((e=>{switch(k.loadingError=!0,e.response.status){case 401:k.apiError=e.customAPIErrorDetails,k.errorMessage="Auth session expired, requesting new...",l.emit("reAuthRequired",{emitter:"TagCloudWidget"});break;default:k.apiError=e.customAPIErrorDetails,k.errorMessage="API Error: fatal error";break}k.loading=!1})))};return(0,o.sV)((()=>{x(),l.on("reAuthSucess",(e=>{e.to?.includes("TagCloudWidget")&&x()}))})),(0,o.xo)((()=>{l.off("reAuthSucess")})),(e,a)=>{const l=(0,o.g2)("q-chip"),s=(0,o.g2)("q-skeleton");return(0,o.uX)(),(0,o.Wv)(g.A,{title:"Tag cloud",icon:"tag","icon-tool-tip":"Click to refresh data","on-header-icon-click":x,loading:k.loading,error:k.loadingError,expanded:c.value,onExpand:a[0]||(a[0]=e=>c.value=!0),onCollapse:a[1]||(a[1]=e=>c.value=!1)},{"header-extra":(0,o.k6)((()=>[(0,o.bF)(l,{square:"",size:"sm",color:"grey-7","text-color":"white"},{default:(0,o.k6)((()=>[(0,o.eW)((0,n.v_)((0,r.R1)(t)("Total tags",{count:b.length})),1)])),_:1})])),content:(0,o.k6)((()=>[k.loading?((0,o.uX)(),(0,o.CE)("div",R,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(32,(e=>(0,o.bF)(s,{square:"",width:"12em",height:"2em",class:"",key:e}))),64))])):k.loadingError?((0,o.uX)(),(0,o.Wv)(p.A,{key:1,text:k.errorMessage||"Error loading data","api-error":k.apiError},null,8,["text","api-error"])):v.value?((0,o.uX)(),(0,o.CE)("div",D,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(b,(e=>((0,o.uX)(),(0,o.Wv)(h.A,{key:e.tag,tag:e.tag,caption:String(e.total),"q-chip-class":"q-chip-10em"},null,8,["tag","caption"])))),128))])):((0,o.uX)(),(0,o.Wv)(m.A,{key:3,warning:"",text:"You haven't created any tags yet"}))])),_:1},8,["loading","error","expanded"])}}},K=T,M=K;W()(T,"components",{QChip:A.A,QSkeleton:f.Ay});const Q={class:"row q-col-gutter-sm"},S={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6"},L={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6"},P={__name:"IndexPage",setup(e){const t=(0,l.A)(),a=(0,r.KR)(!t.screen.lt.md);return(e,t)=>{const r=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(r,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",Q,[(0,o.Lk)("div",S,[(0,o.bF)(I,{expanded:a.value},null,8,["expanded"])]),(0,o.Lk)("div",L,[(0,o.bF)(M,{expanded:a.value},null,8,["expanded"])])])])),_:1})}}};var z=a(7716);const U=P,V=U;W()(P,"components",{QPage:z.A})}}]);