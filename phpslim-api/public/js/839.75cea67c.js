"use strict";(globalThis["webpackChunkhomedocs"]=globalThis["webpackChunkhomedocs"]||[]).push([[839],{1745:(e,a,s)=>{s.d(a,{H:()=>n});var l=s(1809),t=s(8612),r=s.n(t),i=s(1569);const o={namespace:"homedocs",storages:["local","cookie","session","memory"],storage:"local",expireDays:3650},n=(0,l.Q_)("initialState",{state:()=>({initialState:{allowSignUp:!1,maxUploadFileSize:1}}),getters:{isSignUpAllowed:e=>e.initialState.allowSignUp,maxUploadFileSize:e=>e.initialState.maxUploadFileSize},actions:{load(){i.api.common.initialState().then((e=>{this.initialState.allowSignUp=e.data.initialState.allowSignUp,this.initialState.maxUploadFileSize=e.data.initialState.maxUploadFileSize})).catch((e=>{console.error(e.response)}))},save(e){const a=r()(o);a.set("initialState",e)}}})},8839:(e,a,s)=>{s.r(a),s.d(a,{default:()=>q});s(9665);var l=s(9835),t=s(1957),r=s(6970),i=s(499),o=s(9302),n=s(8339),u=s(3276),d=s(1569),m=s(1745);const c=["onSubmit"],p={class:"text-grey-9 text-h5 text-weight-bold"},g={class:"text-grey-8"},v={class:"text-grey-8"},w={class:"text-dark text-weight-bold",style:{"text-decoration":"none"}},f={__name:"SignInPage",setup(e){const{t:a}=(0,u.QT)(),s=(0,o.Z)(),f=(0,n.tv)(),h=(0,m.H)(),S=(0,l.Fl)((()=>h.isSignUpAllowed)),b=(0,i.iH)(!1),y=(0,i.iH)({email:{hasErrors:!1,message:null},password:{hasErrors:!1,message:null}}),_=[e=>!!e||a("Field is required")],k=(0,i.iH)(null),x=(0,i.iH)(null),U=(0,i.iH)(null),E=(0,i.iH)(null);function z(){y.value.email.hasErrors=!1,y.value.email.message=null,y.value.password.hasErrors=!1,y.value.password.message=null,x.value.resetValidation(),E.value.resetValidation()}function q(){z(),x.value.validate(),E.value.validate(),(0,l.Y3)((()=>{x.value.hasError||E.value.hasError||W()}))}function W(){b.value=!0,d.api.user.signIn(k.value,U.value).then((e=>{f.push({name:"index"}),b.value=!1})).catch((e=>{switch(b.value=!1,e.response.status){case 400:e.response.data.invalidOrMissingParams.find((function(e){return"email"===e}))?(s.notify({type:"negative",message:a("API Error: missing email param")}),x.value.focus()):e.response.data.invalidOrMissingParams.find((function(e){return"password"===e}))?(s.notify({type:"negative",message:a("API Error: missing password param")}),E.value.focus()):s.notify({type:"negative",message:a("API Error: invalid/missing param")});break;case 404:y.value.email.hasErrors=!0,y.value.email.message=a("Email not registered"),(0,l.Y3)((()=>{x.value.focus()}));break;case 401:y.value.password.hasErrors=!0,y.value.password.message=a("Invalid password"),(0,l.Y3)((()=>{E.value.focus()}));break;default:s.notify({type:"negative",message:a("API Error: fatal error"),caption:a("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})});break}}))}return(e,s)=>{const o=(0,l.up)("q-card-section"),n=(0,l.up)("q-icon"),u=(0,l.up)("q-input"),d=(0,l.up)("q-spinner-hourglass"),m=(0,l.up)("q-btn"),f=(0,l.up)("router-link"),h=(0,l.up)("q-card"),z=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(z,{class:"flex flex-center bg-grey-2"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"q-pa-md shadow-2 my_card",bordered:""},{default:(0,l.w5)((()=>[(0,l._)("form",{onSubmit:(0,t.iM)(q,["prevent","stop"]),autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"},[(0,l.Wm)(o,{class:"text-center"},{default:(0,l.w5)((()=>[(0,l._)("h3",null,(0,r.zw)(e.$t("Homedocs")),1),(0,l._)("div",p,(0,r.zw)(e.$t("Sign in")),1),(0,l._)("div",g,(0,r.zw)(e.$t("Sign in below to access your account")),1)])),_:1}),(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{dense:"",outlined:"",ref_key:"emailRef",ref:x,modelValue:k.value,"onUpdate:modelValue":s[0]||(s[0]=e=>k.value=e),type:"email",name:"email",label:(0,i.SU)(a)("Email"),disable:b.value,autofocus:!0,rules:_,"lazy-rules":"",error:y.value.email.hasErrors,errorMessage:y.value.email.message},{prepend:(0,l.w5)((()=>[(0,l.Wm)(n,{name:"alternate_email"})])),_:1},8,["modelValue","label","disable","error","errorMessage"]),(0,l.Wm)(u,{dense:"",outlined:"",class:"q-mt-md",ref_key:"passwordRef",ref:E,modelValue:U.value,"onUpdate:modelValue":s[1]||(s[1]=e=>U.value=e),name:"password",type:"password",label:(0,i.SU)(a)("Password"),disable:b.value,rules:_,"lazy-rules":"",error:y.value.password.hasErrors,errorMessage:y.value.password.message},{prepend:(0,l.w5)((()=>[(0,l.Wm)(n,{name:"key"})])),_:1},8,["modelValue","label","disable","error","errorMessage"])])),_:1}),(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,{color:"dark",size:"md",label:e.$t("Sign in"),"no-caps":"",class:"full-width",icon:"account_circle",disable:b.value||!(k.value&&U.value),loading:b.value,type:"submit"},{loading:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"on-left"}),(0,l.Uk)(" "+(0,r.zw)((0,i.SU)(a)("Loading...")),1)])),_:1},8,["label","disable","loading"])])),_:1}),S.value?((0,l.wg)(),(0,l.j4)(o,{key:0,class:"text-center q-pt-none"},{default:(0,l.w5)((()=>[(0,l._)("div",v,[(0,l.Uk)((0,r.zw)((0,i.SU)(a)("Don't have an account yet ?"))+" ",1),(0,l.Wm)(f,{to:{name:"signUp"}},{default:(0,l.w5)((()=>[(0,l._)("span",w,(0,r.zw)((0,i.SU)(a)("Click here to sign up")),1)])),_:1})])])),_:1})):(0,l.kq)("",!0)],40,c)])),_:1})])),_:1})}}};var h=s(9885),S=s(4458),b=s(3190),y=s(6611),_=s(2857),k=s(8879),x=s(3358),U=s(9984),E=s.n(U);const z=f,q=z;E()(f,"components",{QPage:h.Z,QCard:S.Z,QCardSection:b.Z,QInput:y.Z,QIcon:_.Z,QBtn:k.Z,QSpinnerHourglass:x.Z})}}]);