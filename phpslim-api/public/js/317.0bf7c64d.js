"use strict";(globalThis["webpackChunkhomedocs"]=globalThis["webpackChunkhomedocs"]||[]).push([[317],{1745:(e,a,l)=>{l.d(a,{H:()=>n});var t=l(1809),o=l(1569);Array.from(window.location.host).reduce(((e,a)=>0|31*e+a.charCodeAt(0)),0);const n=(0,t.Q_)("initialState",{state:()=>({initialState:{allowSignUp:!1,maxUploadFileSize:1}}),getters:{isSignUpAllowed:e=>e.initialState.allowSignUp,maxUploadFileSize:e=>e.initialState.maxUploadFileSize},actions:{load(){o.api.common.initialState().then((e=>{this.initialState.allowSignUp=e.data.initialState.allowSignUp,this.initialState.maxUploadFileSize=e.data.initialState.maxUploadFileSize})).catch((e=>{console.error(e.response)}))}}})},8317:(e,a,l)=>{l.r(a),l.d(a,{default:()=>j});l(9665);var t=l(9835),o=l(499),n=l(6970),i=l(1569),u=l(5253),s=l(1745),r=l(8339),d=l(6647),c=l(4170),m=l(9302),p=l(4537),w=l(353);const g=(0,t._)("img",{src:"icons/favicon-128x128.png"},null,-1),f={class:"text-center"},v={__name:"MainLayout",setup(e){const{t:a}=(0,d.QT)(),l=(0,m.Z)(),v=(0,u.F)();v.isLoaded||v.load();const h=(0,s.H)(),_=(0,r.tv)(),b=(0,t.Fl)((()=>v.isLogged)),W=(0,o.iH)(l.screen.gt.lg),S=(0,o.iH)(""),k=(0,o.iH)([]),x=(0,o.iH)(!1),y=[{shortLabel:"EN",label:"English",value:"en-US"},{shortLabel:"ES",label:"EspaÃ±ol",value:"es-ES"},{shortLabel:"GL",label:"Galego",value:"gl-GL"}],q=[{icon:"storage",text:"Dashboard",routeName:"index"},{icon:"note_add",text:"Add",routeName:"newDocument"},{icon:"find_in_page",text:"Advanced search",routeName:"advancedSearch"}],U=y.find((e=>e.value==p.defaultLocale)),Q=(0,o.iH)(U||y[0]);function Z(e,t){e&&e.trim().length>0?(k.value=[],x.value=!0,t((()=>{i.api.document.search(1,8,{title:e},"title","ASC").then((e=>{k.value=e.data.results.documents.map((e=>({id:e.id,label:e.title,caption:a("Fast search caption",{creation:c.ZP.formatDate(1e3*e.createdOnTimestamp,"YYYY-MM-DD HH:mm:ss"),attachmentCount:e.fileCount})}))),x.value=!1})).catch((e=>{x.value=!1,l.notify({type:"negative",message:a("API Error: fatal error"),caption:a("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})})}))}))):t((()=>{k.value=[]}))}function z(e,a){Q.value=e,p.i18n.global.locale.value=e.value,a&&v.saveLocale(e.value)}function L(){i.api.user.signOut().then((e=>{v.signOut(),_.push({name:"signIn"})})).catch((e=>{l.notify({type:"negative",message:a("API Error: fatal error"),caption:a("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})})}))}return h.load(),(e,l)=>{const i=(0,t.up)("q-btn"),u=(0,t.up)("q-avatar"),s=(0,t.up)("q-spinner-pie"),r=(0,t.up)("q-item-section"),d=(0,t.up)("q-item"),c=(0,t.up)("q-icon"),m=(0,t.up)("q-item-label"),p=(0,t.up)("q-list"),v=(0,t.up)("q-select"),h=(0,t.up)("q-space"),_=(0,t.up)("q-separator"),U=(0,t.up)("q-menu"),H=(0,t.up)("q-toolbar"),A=(0,t.up)("q-header"),C=(0,t.up)("q-scroll-area"),D=(0,t.up)("q-drawer"),E=(0,t.up)("router-view"),F=(0,t.up)("q-page-container"),I=(0,t.up)("q-layout"),P=(0,t.Q2)("close-popup"),T=(0,t.Q2)("ripple");return(0,t.wg)(),(0,t.j4)(I,{class:"bg-grey-1"},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{elevated:"",class:"text-white",style:{background:"#24292e"},"height-hint":"61.59"},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{class:"q-py-sm q-px-md"},{default:(0,t.w5)((()=>[b.value?((0,t.wg)(),(0,t.j4)(i,{key:0,class:"mobile-only",flat:"",dense:"",round:"",onClick:l[0]||(l[0]=e=>W.value=!W.value),"aria-label":"Menu",icon:"menu"})):(0,t.kq)("",!0),(0,t.Wm)(u,{square:"",size:"42px"},{default:(0,t.w5)((()=>[g])),_:1}),(0,t.Uk)(" HomeDocs "),b.value?((0,t.wg)(),(0,t.j4)(v,{key:1,ref:"search",dark:"",dense:"",standout:"","use-input":"","hide-selected":"",class:"q-mx-md",color:"black","stack-label":!1,label:(0,o.SU)(a)("Search..."),modelValue:S.value,"onUpdate:modelValue":l[1]||(l[1]=e=>S.value=e),options:k.value,onFilter:Z,style:{width:"100%"}},(0,t.Nv)({option:(0,t.w5)((e=>[(0,t.Wm)(p,{class:"bg-grey-9 text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,(0,t.dG)(e.itemProps,{to:{name:"document",params:{id:e.opt.id}}}),{default:(0,t.w5)((()=>[(0,t.Wm)(r,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{name:"collections_bookmark"})])),_:1}),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.opt.label),1)])),_:2},1024),(0,t.Wm)(m,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.opt.caption),1)])),_:2},1024)])),_:2},1024)])),_:2},1040,["to"])])),_:2},1024)])),_:2},[x.value?{name:"no-option",fn:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t._)("div",f,[(0,t.Wm)(s,{color:"grey-5",size:"24px"})])])),_:1})])),_:1})])),key:"0"}:void 0]),1032,["label","modelValue","options"])):(0,t.kq)("",!0),(0,t.Wm)(h),(0,t.Wm)(i,{dense:"",flat:"","no-wrap":""},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{rounded:"",size:"24px",class:"q-mr-sm"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{name:"language"})])),_:1}),(0,t.Uk)(" "+(0,n.zw)(Q.value.shortLabel)+" ",1),(0,t.Wm)(c,{name:"arrow_drop_down",size:"16px"}),(0,t.Wm)(U,{"auto-close":""},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{dense:"",style:{"min-width":"200px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{class:"GL__menu-link-signed-in"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Uk)((0,n.zw)((0,o.SU)(a)("Selected language"))+": ",1),(0,t._)("strong",null,(0,n.zw)(Q.value.label),1)])])),_:1})])),_:1}),(0,t.Wm)(_),((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(y,(e=>(0,t.wy)((0,t.Wm)(d,{clickable:"",disable:Q.value.value==e.value,key:e.value,onClick:a=>z(e,!0)},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t._)("div",null,(0,n.zw)(e.label),1)])),_:2},1024)])),_:2},1032,["disable","onClick"]),[[P]]))),64))])),_:1})])),_:1})])),_:1}),(0,t.Wm)(i,{round:"",dense:"",flat:"",ripple:!1,icon:(0,o.SU)(w.hjv),size:"md",color:"white",class:"q-ml-sm","no-caps":"",href:"http://github.com/aportela/homedocs",target:"_blank"},null,8,["icon"])])),_:1})])),_:1}),b.value?((0,t.wg)(),(0,t.j4)(D,{key:0,modelValue:W.value,"onUpdate:modelValue":l[2]||(l[2]=e=>W.value=e),"show-if-above":"",bordered:"",class:"bg-grey-2",width:240},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{class:"fit"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{padding:""},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{header:"",class:"text-weight-bold text-uppercase"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Menu ")])),_:1}),((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(q,(e=>(0,t.wy)((0,t.Wm)(d,{key:e.text,clickable:"",to:{name:e.routeName}},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{color:"grey",name:e.icon},null,8,["name"])])),_:2},1024),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)((0,o.SU)(a)(e.text)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"]),[[T]]))),64)),(0,t.wy)(((0,t.wg)(),(0,t.j4)(d,{clickable:"",onClick:L},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{color:"grey",name:"logout"})])),_:1}),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)((0,o.SU)(a)("Sign out")),1)])),_:1})])),_:1})])),_:1})),[[T]])])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,t.kq)("",!0),(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t.Wm)(E)])),_:1})])),_:1})}}};var h=l(249),_=l(6602),b=l(1663),W=l(8879),S=l(1357),k=l(6997),x=l(490),y=l(1233),q=l(132),U=l(3246),Q=l(2857),Z=l(3115),z=l(136),L=l(7858),H=l(926),A=l(906),C=l(6663),D=l(2133),E=l(2146),F=l(1136),I=l(9984),P=l.n(I);const T=v,j=T;P()(v,"components",{QLayout:h.Z,QHeader:_.Z,QToolbar:b.Z,QBtn:W.Z,QAvatar:S.Z,QSelect:k.Z,QItem:x.Z,QItemSection:y.Z,QSpinnerPie:q.Z,QList:U.Z,QIcon:Q.Z,QItemLabel:Z.Z,QSpace:z.Z,QMenu:L.Z,QSeparator:H.Z,QDrawer:A.Z,QScrollArea:C.Z,QPageContainer:D.Z}),P()(v,"directives",{ClosePopup:E.Z,Ripple:F.Z})}}]);