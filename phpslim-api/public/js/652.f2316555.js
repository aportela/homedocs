"use strict";(globalThis["webpackChunkhomedocs"]=globalThis["webpackChunkhomedocs"]||[]).push([[652],{8887:(e,a,l)=>{l.d(a,{o:()=>r});var s=l(587),t=l(660);Array.from(window.location.host).reduce(((e,a)=>0|31*e+a.charCodeAt(0)),0);const r=(0,s.nY)("initialState",{state:()=>({initialState:{allowSignUp:!1,maxUploadFileSize:1}}),getters:{isSignUpAllowed:e=>e.initialState.allowSignUp,maxUploadFileSize:e=>e.initialState.maxUploadFileSize},actions:{load(){t.api.common.initialState().then((e=>{this.initialState.allowSignUp=e.data.initialState.allowSignUp,this.initialState.maxUploadFileSize=e.data.initialState.maxUploadFileSize})).catch((e=>{console.error(e.response)}))}}})},652:(e,a,l)=>{l.r(a),l.d(a,{default:()=>U});l(239);var s=l(1758),t=l(9104),r=l(8790),i=l(8734),o=l(5192),n=l(4907),u=l(455),d=l(3537),c=l(660),p=l(8887);const m={class:"text-grey-8"},g={class:"text-grey-8"},v={class:"text-dark text-weight-bold",style:{"text-decoration":"none"}},f={class:"text-red-8 text-bold"},b={__name:"SignUpPage",setup(e){const{t:a}=(0,d.s9)(),l=(0,n.A)(),b=(0,u.rd)(),h=(0,i.KR)(!1),k=(0,p.o)(),w=(0,s.EW)((()=>k.isSignUpAllowed)),y=(0,i.KR)({email:{hasErrors:!1,message:null},password:{hasErrors:!1,message:null}}),S=[e=>!!e||a("Field is required")],_=(0,i.KR)(null),x=(0,i.KR)(null),A=(0,i.KR)(null),F=(0,i.KR)(null);function E(){y.value.email.hasErrors=!1,y.value.email.message=null,y.value.password.hasErrors=!1,y.value.password.message=null,x.value.resetValidation(),F.value.resetValidation()}function U(){E(),x.value.validate(),F.value.validate(),(0,s.dY)((()=>{x.value.hasError||F.value.hasError||R()}))}function R(){h.value=!0,c.api.user.signUp((0,o.A)(),_.value,A.value).then((e=>{l.notify({type:"positive",message:a("Your account has been created"),actions:[{label:a("Sign in"),color:"white",handler:()=>{b.push({name:"signIn"})}}]}),h.value=!1})).catch((e=>{switch(h.value=!1,e.response.status){case 400:e.response.data.invalidOrMissingParams.find((function(e){return"email"===e}))?(l.notify({type:"negative",message:a("API Error: missing email param")}),x.value.focus()):e.response.data.invalidOrMissingParams.find((function(e){return"password"===e}))?(l.notify({type:"negative",message:a("API Error: missing password param")}),F.value.focus()):l.notify({type:"negative",message:a("API Error: invalid/missing param")});break;case 409:y.value.email.hasErrors=!0,y.value.email.message=a("Email already used"),(0,s.dY)((()=>{x.value.focus()}));break;default:l.notify({type:"negative",message:a("API Error: fatal error"),caption:a("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})});break}}))}return(e,l)=>{const o=(0,s.g2)("q-card-section"),n=(0,s.g2)("q-icon"),u=(0,s.g2)("q-input"),d=(0,s.g2)("q-spinner-hourglass"),c=(0,s.g2)("q-btn"),p=(0,s.g2)("router-link"),b=(0,s.g2)("q-card"),k=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(k,{class:"flex flex-center bg-grey-2"},{default:(0,s.k6)((()=>[(0,s.bF)(b,{class:"q-pa-md shadow-2 my_card",bordered:""},{default:(0,s.k6)((()=>[(0,s.Lk)("form",{onSubmit:(0,t.D$)(U,["prevent","stop"]),autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"},[(0,s.bF)(o,{class:"text-center"},{default:(0,s.k6)((()=>[(0,s.Lk)("h3",null,(0,r.v_)(e.$t("Homedocs")),1),(0,s.Lk)("div",m,(0,r.v_)(e.$t("Sign up below to create your account")),1)])),_:1}),(0,s.bF)(o,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{dense:"",outlined:"",ref_key:"emailRef",ref:x,modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=e=>_.value=e),type:"email",name:"email",label:(0,i.R1)(a)("Email"),disable:h.value,autofocus:!0,rules:S,"lazy-rules":"",error:y.value.email.hasErrors,errorMessage:y.value.email.message},{prepend:(0,s.k6)((()=>[(0,s.bF)(n,{name:"alternate_email"})])),_:1},8,["modelValue","label","disable","error","errorMessage"]),(0,s.bF)(u,{dense:"",outlined:"",class:"q-mt-md",ref_key:"passwordRef",ref:F,modelValue:A.value,"onUpdate:modelValue":l[1]||(l[1]=e=>A.value=e),name:"password",type:"password",label:(0,i.R1)(a)("Password"),disable:h.value,rules:S,"lazy-rules":"",error:y.value.password.hasErrors,errorMessage:y.value.password.message},{prepend:(0,s.k6)((()=>[(0,s.bF)(n,{name:"key"})])),_:1},8,["modelValue","label","disable","error","errorMessage"])])),_:1}),(0,s.bF)(o,null,{default:(0,s.k6)((()=>[(0,s.bF)(c,{color:"dark",size:"md",label:e.$t("Sign up"),"no-caps":"",class:"full-width",icon:"account_circle",disable:h.value||!(_.value&&A.value)||!w.value,loading:h.value,type:"submit"},{loading:(0,s.k6)((()=>[(0,s.bF)(d,{class:"on-left"}),(0,s.eW)(" "+(0,r.v_)((0,i.R1)(a)("Loading...")),1)])),_:1},8,["label","disable","loading"])])),_:1}),(0,s.bF)(o,{class:"text-center q-pt-none"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",g,[(0,s.eW)((0,r.v_)((0,i.R1)(a)("Already have an account ?"))+" ",1),(0,s.bF)(p,{to:{name:"signIn"}},{default:(0,s.k6)((()=>[(0,s.Lk)("span",v,(0,r.v_)((0,i.R1)(a)("Click here to sign in")),1)])),_:1})])])),_:1}),w.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(o,{key:0,class:"text-center q-pt-none"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",f,[(0,s.bF)(n,{name:"info"}),(0,s.eW)(" "+(0,r.v_)((0,i.R1)(a)("New sign ups are not allowed on this system")),1)])])),_:1}))],32)])),_:1})])),_:1})}}};var h=l(7716),k=l(3316),w=l(4189),y=l(9270),S=l(492),_=l(6384),x=l(3194),A=l(8582),F=l.n(A);const E=b,U=E;F()(b,"components",{QPage:h.A,QCard:k.A,QCardSection:w.A,QInput:y.A,QIcon:S.A,QBtn:_.A,QSpinnerHourglass:x.A})}}]);